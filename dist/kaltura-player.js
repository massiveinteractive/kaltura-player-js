!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("KalturaPlayer",[],t):"object"==typeof exports?exports.KalturaPlayer=t():e.KalturaPlayer=t()}(this,function(){return function(e){function t(e){delete installedChunks[e]}function r(e){var t=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.src=h.p+""+e+"."+E+".hot-update.js",t.appendChild(r)}function n(e){return e=e||1e4,new Promise(function(t,r){if("undefined"==typeof XMLHttpRequest)return r(new Error("No browser support"));try{var n=new XMLHttpRequest,i=h.p+""+E+".hot-update.json";n.open("GET",i,!0),n.timeout=e,n.send(null)}catch(e){return r(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)r(new Error("Manifest request to "+i+" timed out."));else if(404===n.status)t();else if(200!==n.status&&304!==n.status)r(new Error("Manifest request to "+i+" failed."));else{try{var e=JSON.parse(n.responseText)}catch(e){return void r(e)}t(e)}}})}function i(e){var t=C[e];if(!t)return h;var r=function(r){return t.hot.active?(C[r]?C[r].parents.indexOf(e)<0&&C[r].parents.push(e):(S=[e],v=r),t.children.indexOf(r)<0&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),S=[]),h(r)};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&"e"!==n&&Object.defineProperty(r,n,function(e){return{configurable:!0,enumerable:!0,get:function(){return h[e]},set:function(t){h[e]=t}}}(n));return r.e=function(e){function t(){R--,"prepare"===O&&(P[e]||c(e),0===R&&0===w&&f())}return"ready"===O&&o("prepare"),R++,h.e(e).then(t,function(e){throw t(),e})},r}function a(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:v!==e,active:!0,accept:function(e,r){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._acceptedDependencies[e[n]]=r||function(){};else t._acceptedDependencies[e]=r||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._declinedDependencies[e[r]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var r=t._disposeHandlers.indexOf(e);r>=0&&t._disposeHandlers.splice(r,1)},check:u,apply:d,status:function(e){if(!e)return O;k.push(e)},addStatusHandler:function(e){k.push(e)},removeStatusHandler:function(e){var t=k.indexOf(e);t>=0&&k.splice(t,1)},data:T[e]};return v=void 0,t}function o(e){O=e;for(var t=0;t<k.length;t++)k[t].call(null,e)}function s(e){return+e+""===e?+e:e}function u(e){if("idle"!==O)throw new Error("check() is only allowed in idle status");return m=e,o("check"),n(b).then(function(e){if(!e)return o("idle"),null;L={},P={},D=e.c,_=e.h,o("prepare");var t=new Promise(function(e,t){g={resolve:e,reject:t}});y={};return c(0),"prepare"===O&&0===R&&0===w&&f(),t})}function l(e,t){if(D[e]&&L[e]){L[e]=!1;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(y[r]=t[r]);0==--w&&0===R&&f()}}function c(e){D[e]?(L[e]=!0,w++,r(e)):P[e]=!0}function f(){o("ready");var e=g;if(g=null,e)if(m)Promise.resolve().then(function(){return d(m)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var r in y)Object.prototype.hasOwnProperty.call(y,r)&&t.push(s(r));e.resolve(t)}}function d(r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.indexOf(n)<0&&e.push(n)}}if("ready"!==O)throw new Error("apply() is only allowed in ready status");r=r||{};var i,a,u,l,c,f={},d=[],p={},v=function(){console.warn("[HMR] unexpected require("+m.moduleId+") to disposed module")};for(var g in y)if(Object.prototype.hasOwnProperty.call(y,g)){c=s(g);var m;m=y[g]?function(e){for(var t=[e],r={},i=t.slice().map(function(e){return{chain:[e],id:e}});i.length>0;){var a=i.pop(),o=a.id,s=a.chain;if((l=C[o])&&!l.hot._selfAccepted){if(l.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:o};if(l.hot._main)return{type:"unaccepted",chain:s,moduleId:o};for(var u=0;u<l.parents.length;u++){var c=l.parents[u],f=C[c];if(f){if(f.hot._declinedDependencies[o])return{type:"declined",chain:s.concat([c]),moduleId:o,parentId:c};t.indexOf(c)>=0||(f.hot._acceptedDependencies[o]?(r[c]||(r[c]=[]),n(r[c],[o])):(delete r[c],t.push(c),i.push({chain:s.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:r}}(c):{type:"disposed",moduleId:g};var b=!1,A=!1,k=!1,w="";switch(m.chain&&(w="\nUpdate propagation: "+m.chain.join(" -> ")),m.type){case"self-declined":r.onDeclined&&r.onDeclined(m),r.ignoreDeclined||(b=new Error("Aborted because of self decline: "+m.moduleId+w));break;case"declined":r.onDeclined&&r.onDeclined(m),r.ignoreDeclined||(b=new Error("Aborted because of declined dependency: "+m.moduleId+" in "+m.parentId+w));break;case"unaccepted":r.onUnaccepted&&r.onUnaccepted(m),r.ignoreUnaccepted||(b=new Error("Aborted because "+c+" is not accepted"+w));break;case"accepted":r.onAccepted&&r.onAccepted(m),A=!0;break;case"disposed":r.onDisposed&&r.onDisposed(m),k=!0;break;default:throw new Error("Unexception type "+m.type)}if(b)return o("abort"),Promise.reject(b);if(A){p[c]=y[c],n(d,m.outdatedModules);for(c in m.outdatedDependencies)Object.prototype.hasOwnProperty.call(m.outdatedDependencies,c)&&(f[c]||(f[c]=[]),n(f[c],m.outdatedDependencies[c]))}k&&(n(d,[m.moduleId]),p[c]=v)}var R=[];for(a=0;a<d.length;a++)c=d[a],C[c]&&C[c].hot._selfAccepted&&R.push({module:c,errorHandler:C[c].hot._selfAccepted});o("dispose"),Object.keys(D).forEach(function(e){!1===D[e]&&t(e)});for(var P,L=d.slice();L.length>0;)if(c=L.pop(),l=C[c]){var I={},M=l.hot._disposeHandlers;for(u=0;u<M.length;u++)(i=M[u])(I);for(T[c]=I,l.hot.active=!1,delete C[c],delete f[c],u=0;u<l.children.length;u++){var x=C[l.children[u]];x&&((P=x.parents.indexOf(c))>=0&&x.parents.splice(P,1))}}var N,j;for(c in f)if(Object.prototype.hasOwnProperty.call(f,c)&&(l=C[c]))for(j=f[c],u=0;u<j.length;u++)N=j[u],(P=l.children.indexOf(N))>=0&&l.children.splice(P,1);o("apply"),E=_;for(c in p)Object.prototype.hasOwnProperty.call(p,c)&&(e[c]=p[c]);var F=null;for(c in f)if(Object.prototype.hasOwnProperty.call(f,c)&&(l=C[c])){j=f[c];var U=[];for(a=0;a<j.length;a++)if(N=j[a],i=l.hot._acceptedDependencies[N]){if(U.indexOf(i)>=0)continue;U.push(i)}for(a=0;a<U.length;a++){i=U[a];try{i(j)}catch(e){r.onErrored&&r.onErrored({type:"accept-errored",moduleId:c,dependencyId:j[a],error:e}),r.ignoreErrored||F||(F=e)}}}for(a=0;a<R.length;a++){var B=R[a];c=B.module,S=[c];try{h(c)}catch(e){if("function"==typeof B.errorHandler)try{B.errorHandler(e)}catch(t){r.onErrored&&r.onErrored({type:"self-accept-error-handler-errored",moduleId:c,error:t,orginalError:e,originalError:e}),r.ignoreErrored||F||(F=t),F||(F=e)}else r.onErrored&&r.onErrored({type:"self-accept-errored",moduleId:c,error:e}),r.ignoreErrored||F||(F=e)}}return F?(o("fail"),Promise.reject(F)):(o("idle"),new Promise(function(e){e(d)}))}function h(t){if(C[t])return C[t].exports;var r=C[t]={i:t,l:!1,exports:{},hot:a(t),parents:(A=S,S=[],A),children:[]};return e[t].call(r.exports,r,r.exports,i(t)),r.l=!0,r.exports}var p=this.webpackHotUpdateKalturaPlayer;this.webpackHotUpdateKalturaPlayer=function(e,t){l(e,t),p&&p(e,t)};var v,g,y,_,m=!0,E="1c879605d8ee03f9760a",b=1e4,T={},S=[],A=[],k=[],O="idle",w=0,R=0,P={},L={},D={},C={};return h.m=e,h.c=C,h.d=function(e,t,r){h.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},h.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return h.d(t,"a",t),t},h.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},h.p="",h.h=function(){return E},i(140)(h.s=140)}([function(e,t,r){var n=r(2),i=r(22),a=r(13),o=r(14),s=r(19),u=function(e,t,r){var l,c,f,d,h=e&u.F,p=e&u.G,v=e&u.S,g=e&u.P,y=e&u.B,_=p?n:v?n[t]||(n[t]={}):(n[t]||{}).prototype,m=p?i:i[t]||(i[t]={}),E=m.prototype||(m.prototype={});p&&(r=t);for(l in r)c=!h&&_&&void 0!==_[l],f=(c?_:r)[l],d=y&&c?s(f,n):g&&"function"==typeof f?s(Function.call,f):f,_&&o(_,l,f,e&u.U),m[l]!=f&&a(m,l,d),g&&E[l]!=f&&(E[l]=f)};n.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){var n=r(4);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){var n=r(54)("wks"),i=r(34),a=r(2).Symbol,o="function"==typeof a;(e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=n},function(e,t,r){e.exports=!r(3)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(1),i=r(98),a=r(23),o=Object.defineProperty;t.f=r(6)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(25),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){var n=r(24);e.exports=function(e){return Object(n(e))}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){!function(t,r){e.exports=r()}(0,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=39)}([function(e,t,r){"use strict";function n(e){return e?s.get(e):s}function i(e){return n(e).getLevel()}function a(e,t){n(t).setLevel(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevelType=t.LogLevel=void 0;var o=r(44),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),u={DEBUG:s.DEBUG,INFO:s.INFO,TIME:s.TIME,WARN:s.WARN,ERROR:s.ERROR,OFF:s.OFF},l={};Object.keys(u).forEach(function(e){l[e]=e}),s.useDefaults({defaultLevel:s.ERROR}),t.default=n,t.LogLevel=u,t.LogLevelType=l,t.getLogLevel=i,t.setLogLevel=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=r(45),s=r(46),u=r(48),l=function e(t,r,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(this,e),this.severity=t,this.category=r,this.code=a,this.data=o,(0,i.getLogLevel)("Error")!==i.LogLevel.OFF&&e._logger.error("Category:"+r+" | Code:"+a+" |",o)};l.Severity=o.Severity,l.Category=u.Category,l.Code=s.Code,l._logger=(0,a.default)("Error"),t.default=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r){n(this,e),this.bubbles=!1,this.cancelable=!1,this.defaultPrevented=!1,this.timeStamp=window.performance?window.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.currentTarget=null,this.target=null,this.stopped=!1,this.payload=r}return i(e,[{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.stopped=!0}},{key:"stopPropagation",value:function(){}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomEventType=t.Html5EventType=t.EventType=void 0;var n=r(5),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),a=r(16),o={ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting",ENTER_PICTURE_IN_PICTURE:"enterpictureinpicture",LEAVE_PICTURE_IN_PICTURE:"leavepictureinpicture",PRESENTATION_MODE_CHANGED:"webkitpresentationmodechanged"},s={MEDIA_LOADED:"medialoaded",PLAYER_RESET:"playerreset",PLAYER_DESTROY:"playerdestroy",ENTER_FULLSCREEN:"enterfullscreen",EXIT_FULLSCREEN:"exitfullscreen",REQUESTED_ENTER_FULLSCREEN:"requestedenterfullscreen",REQUESTED_EXIT_FULLSCREEN:"requestedexitfullscreen",AUTOPLAY_FAILED:"autoplayfailed",FALLBACK_TO_MUTED_AUTOPLAY:"fallbacktomutedautoplay",CHANGE_SOURCE_STARTED:"changesourcestarted",CHANGE_SOURCE_ENDED:"changesourceended",MUTE_CHANGE:"mutechange",VIDEO_TRACK_CHANGED:"videotrackchanged",AUDIO_TRACK_CHANGED:"audiotrackchanged",TEXT_TRACK_CHANGED:"texttrackchanged",TEXT_CUE_CHANGED:"textcuechanged",TRACKS_CHANGED:"trackschanged",ABR_MODE_CHANGED:"abrmodechanged",PLAYER_STATE_CHANGED:"playerstatechanged",PLAYBACK_START:"playbackstart",FIRST_PLAY:"firstplay",FIRST_PLAYING:"firstplaying",PLAYBACK_ENDED:"playbackended",SOURCE_SELECTED:"sourceselected",TEXT_STYLE_CHANGED:"textstylechanged",MEDIA_RECOVERED:"mediarecovered",VR_STEREO_MODE_CHANGED:"vrstereomodechanged",FPS_DROP:"fpsdrop",BOOKMARK_ERROR:"bookmarkerror",CONCURRENCY_LIMIT:"concurrencylimit"},u=i.Object.merge([o,s,a.AdEventType]);t.EventType=u,t.Html5EventType=o,t.CustomEventType=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(15),s=n(o),u=r(2),l=(n(u),function(){function e(){i(this,e),this._bindingMap=new s.default}return a(e,[{key:"destroy",value:function(){return this.removeAll(),this._bindingMap=null,Promise.resolve()}},{key:"listenOnce",value:function(e,t,r,n){var i=this,a=function n(a){i.unlisten(e,t,n),r.call(i,a)};this.listen(e,t,a,n)}},{key:"listen",value:function(e,t,r,n){var i=new c(e,t,r,n);this._bindingMap&&this._bindingMap.push(t,i)}},{key:"unlisten",value:function(e,t,r){if(this._bindingMap)for(var n=this._bindingMap.get(t),i=0;i<n.length;++i){var a=n[i];a.target!==e||a.listener!==r&&r||(a.unlisten(),this._bindingMap&&this._bindingMap.remove(t,a))}}},{key:"removeAll",value:function(){if(this._bindingMap){var e=this._bindingMap.getAll(),t=!0,r=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)i.value.unlisten()}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}this._bindingMap&&this._bindingMap.clear()}}}]),e}()),c=function(){function e(t,r,n,a){i(this,e),this.target=t,this.type=r,this.listener=n,this.options=a,this.target.addEventListener(r,n,a)}return a(e,[{key:"unlisten",value:function(){this.target&&(this.target.removeEventListener(this.type,this.listener,this.options),this.target=null,this.listener=null,this.options=null)}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e){return Array.isArray(e)?e:Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.Http=t.Dom=t.Generator=t.Object=t.String=t.Number=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=r(43),u={isNumber:function(e){return Number(e)===e},isInt:function(e){return this.isNumber(e)&&e%1==0},isFloat:function(e){return this.isNumber(e)&&e%1!=0}},l={capitlize:function(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)},endsWith:function(e,t){return"string"==typeof e&&"string"==typeof t&&-1!=e.indexOf(t,e.length-t.length)}},c={merge:function(e){var t={},r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;Object.assign(t,s)}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return t},isObject:function(e){return e&&"object"===(void 0===e?"undefined":o(e))&&!Array.isArray(e)},mergeDeep:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!r.length)return e;var o=r.shift();if(this.isObject(e)&&this.isObject(o))for(var s in o)this.isObject(o[s])?(e[s]||Object.assign(e,a({},s,{})),this.mergeDeep(e[s],o[s])):Object.assign(e,a({},s,o[s]));return this.mergeDeep.apply(this,[e].concat(i(r)))},copyDeep:function(e){var t=this,r=void 0;return Array.isArray(e)?(r=e.length>0?e.slice(0):[],r.forEach(function(e,n){("object"===(void 0===e?"undefined":o(e))&&e!=={}||Array.isArray(e)&&e.length>0)&&(r[n]=t.copyDeep(e))})):null!==e&&"object"===(void 0===e?"undefined":o(e))?e.clone&&"function"==typeof e.clone?r=e.clone():(r=Object.assign({__proto__:e.__proto__},e),Object.keys(r).forEach(function(e){("object"===o(r[e])&&r[e]!=={}||Array.isArray(r[e])&&r[e].length>0)&&(r[e]=t.copyDeep(r[e]))})):r=e,r},isEmptyObject:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},getPropertyPath:function(e,t){return t.split(".").reduce(function(e,t){return void 0===e||null===e?e:e[t]},e)},hasPropertyPath:function(e,t){if(!t)return!1;for(var r=t.split("."),n=0;n<r.length;n++){var i=r[n];if(!e||!e.hasOwnProperty(i))return!1;e=e[i]}return!0},createPropertyPath:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.split("."),a=e;i.length>1;){var o=i,s=n(o),u=s[0];i=s.slice(1),void 0===a[u]&&(a[u]={}),a=a[u]}return a[i[0]]=r,e},deletePropertyPath:function(e,t){if(e&&t){for(var r=t.split("."),n=0;n<r.length-1;n++)if(void 0===(e=e[r[n]]))return;delete e[r.pop()]}},defer:function(){var e=void 0,t=void 0,r=new Promise(function(r,n){e=r,t=n});return r.resolve=e,r.reject=t,r},bind:function(e,t){return function(){t.apply(e,arguments)}}},f={uniqueId:function(e){var t=2+(!e||e<0?0:e-2);return"_"+Math.random().toString(36).substr(2,t)},guid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},d={addClassName:function(e,t){e.classList?e.classList.add(t):d.hasClassName(e,t)||(e.className+=t)},removeClassName:function(e,t){e.classList?e.classList.remove(t):d.hasClassName(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))},hasClassName:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},setAttribute:function(e,t,r){e.setAttribute(t,r)},removeAttribute:function(e,t){e.removeAttribute(t)},setStyle:function(e,t,r){void 0!==e.style.getPropertyValue(t)&&e.style.setProperty(t,r)},appendChild:function(e,t){e&&t&&e.appendChild&&e.appendChild(t)},removeChild:function(e,t){e&&t&&e.removeChild&&e.removeChild(t)},prependTo:function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},getElementById:function(e){return document.getElementById(e)},getElementsByTagName:function(e){return document.getElementsByTagName(e)},createElement:function(e){return document.createElement(e)},loadScriptAsync:function(e){var t=this;return new Promise(function(r,n){var i=!1,a=document.getElementsByTagName("script")[0],o=t.createElement("script");o.type="text/javascript",o.src=e,o.async=!0,o.onload=o.onreadystatechange=function(){i||this.readyState&&"complete"!==this.readyState||(i=!0,r(this))},o.onerror=o.onabort=n,a&&a.parentNode&&a.parentNode.insertBefore(o,a)})},getElementBySelector:function(e){try{return document.querySelector(e)}catch(e){return}},insertBefore:function(e,t,r){try{return e.insertBefore(t,r)}catch(e){return null}}},h={execute:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",n=arguments[3],i=new XMLHttpRequest;return new Promise(function(a,o){i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status)try{var e=JSON.parse(i.responseText);a(e)}catch(e){a(i.responseText)}else o(i.responseText)},i.open(r,e),n&&n.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send(t)})},jsonp:s.jsonp},p={compare:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r=c.merge([{lexicographical:!1,zeroExtend:!0},r]);var n=r.lexicographical,i=r.zeroExtend,a=(e||"0").split("."),o=(t||"0").split("."),s=function(e){return(n?/^\d+[A-Za-zαß]*$/:/^\d+[A-Za-zαß]?$/).test(e)},u=function(e){return e.map(function(e){var t=/[A-Za-zαß]/.exec(e);return Number(t?e.replace(t[0],"."+e.charCodeAt(t.index)):e)})};if(!a.every(s)||!o.every(s))return NaN;if(i){for(;a.length<o.length;)a.push("0");for(;o.length<a.length;)o.push("0")}n||(a=u(a),o=u(o));for(var l=0;l<a.length;++l){if(o.length===l)return 1;if(a[l]!==o[l])return a[l]>o[l]?1:-1}return a.length!==o.length?-1:0}};t.Number=u,t.String=l,t.Object=c,t.Generator=f,t.Dom=d,t.Http=h,t.VERSION=p},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this._id=t.id,this._active=t.active,this._label=t.label,this._language=t.language,this._index=t.index,this.clone=e.clone.bind(null,this)}return i(e,[{key:"id",get:function(){return this._id}},{key:"active",get:function(){return this._active},set:function(e){this._active=e}},{key:"label",get:function(){return this._label},set:function(e){this._label=e}},{key:"language",get:function(){return this._language}},{key:"index",get:function(){return this._index},set:function(e){this._index=e}}],[{key:"langComparer",value:function(e,t){try{return e=e.toLowerCase(),t=t.toLowerCase(),!!e&&(e.startsWith(t)||t.startsWith(e))}catch(e){return!1}}},{key:"clone",value:function(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=(n(o),r(15)),u=n(s),l=function(){function e(){i(this,e),this._listeners=new u.default,this.dispatchTarget=this}return a(e,[{key:"addEventListener",value:function(e,t){this._listeners.push(e,t)}},{key:"removeEventListener",value:function(e,t){this._listeners.remove(e,t)}},{key:"dispatchEvent",value:function(e){for(var t=this._listeners.get(e.type)||[],r=0;r<t.length;++r){e.target=this.dispatchTarget,e.currentTarget=this.dispatchTarget;var n=t[r];try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.stopped)break}return e.defaultPrevented}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(12),c=n(l),f=r(4),d=n(f),h=r(42),p=n(h),v=r(2),g=n(v),y=r(7),_=n(y),m=r(3),E=r(5),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(E),T=r(49),S=n(T),A=r(0),k=n(A),O=r(17),w=n(O),R=r(18),P=(n(R),r(50)),L=n(P),D=r(6),C=n(D),I=r(10),M=n(I),x=r(11),N=n(x),j=r(9),F=n(j),U=r(24),B=n(U),G=(r(13),r(20)),H=r(19),V=r(14),K=r(52),Y=r(25),W=r(26),q=r(27),X=r(28),z=r(29),J=r(54),Q=n(J),$=r(56);r(57);var Z=r(1),ee=n(Z),te=r(30),re=r(72),ne=r(34),ie=r(35),ae=r(36),oe=r(16),se=r(73),ue="off",le=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._activeTextCues=[],r._textDisplaySettings={},r._playbackAttributesState={muted:void 0,volume:void 0,rate:void 0,audioLanguage:"",textLanguage:""},r._setConfigLogLevel(e),r._playerId=b.Generator.uniqueId(5),r._prepareVideoElement(),t.runCapabilities(),r._env=c.default,r._tracks=[],r._firstPlay=!0,r._fullscreen=!1,r._repositionCuesTimeout=!1,r._loadingMedia=!1,r._loading=!1,r._playbackStart=!1,r._firstPlaying=!1,r._reset=!0,r._destroyed=!1,r._fallbackToMutedAutoPlay=!1,r._config=t._defaultConfig,r._eventManager=new d.default,r._posterManager=new p.default,r._stateManager=new L.default(r),r._pluginManager=new w.default,r._controllerProvider=new se.ControllerProvider(r._pluginManager),r._playbackMiddleware=new Q.default,r._textStyle=new B.default,r._createReadyPromise(),r._createPlayerContainer(),r._appendDomElements(),r._externalCaptionsHandler=new re.ExternalCaptionsHandler(r),r.configure(e),r}return o(t,e),u(t,null,[{key:"runCapabilities",value:function(){t._logger.debug("Running player capabilities"),te.EngineProvider.getEngines().forEach(function(e){return e.runCapabilities()})}},{key:"getCapabilities",value:function(e){t._logger.debug("Get player capabilities",e);var r=[];return te.EngineProvider.getEngines().forEach(function(e){return r.push(e.getCapabilities())}),Promise.all(r).then(function(r){var n={};return r.forEach(function(e){return Object.assign(n,e)}),b.Object.mergeDeep(n,t._playerCapabilities),e?n[e]:n})}},{key:"setCapabilities",value:function(e,r){t._logger.debug("Set player capabilities",e,r),t._playerCapabilities[e]=b.Object.mergeDeep({},t._playerCapabilities[e],r)}}]),u(t,[{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setConfigLogLevel(e),this._hasSources(e.sources)?(this._configureOrLoadPlugins(e.plugins),this._maybeCreateAdsController(),this.reset(),t._logger.debug("Change source started"),this.dispatchEvent(new g.default(m.CustomEventType.CHANGE_SOURCE_STARTED)),b.Object.mergeDeep(this._config,e),this._reset=!1,this._selectEngineByPriority()?(this.dispatchEvent(new g.default(m.CustomEventType.SOURCE_SELECTED,{selectedSource:this._config.sources[this._streamType]})),this._attachMedia(),this._handlePlaybackOptions(),this._posterManager.setSrc(this._config.sources.poster),this._handlePreload(),this._handleAutoPlay(),t._logger.debug("Change source ended"),this.dispatchEvent(new g.default(m.CustomEventType.CHANGE_SOURCE_ENDED))):(t._logger.warn("No playable engines was found to play the given sources"),this.dispatchEvent(new g.default(m.Html5EventType.ERROR,new ee.default(ee.default.Severity.CRITICAL,ee.default.Category.PLAYER,ee.default.Code.NO_ENGINE_FOUND_TO_PLAY_THE_SOURCE,"No Engine Found To Play The Source"))))):(b.Object.mergeDeep(this._config,e),this._configureOrLoadPlugins(e.plugins),this._maybeCreateAdsController())}},{key:"ready",value:function(){return this._readyPromise?this._readyPromise:Promise.resolve()}},{key:"load",value:function(){var e=this,t=function(){e._loading=!1,e._reset=!1};if(this._engine&&!this.src&&!this._loading){this._loading=!0;var r=this._config.playback.startTime;this._engine.load(r).then(function(r){e._updateTracks(r.tracks),e.dispatchEvent(new g.default(m.CustomEventType.TRACKS_CHANGED,{tracks:e._tracks})),t()}).catch(function(r){e.dispatchEvent(new g.default(m.Html5EventType.ERROR,r)),t()})}}},{key:"play",value:function(){var e=this;this._playbackStart||(this._playbackStart=!0,this.dispatchEvent(new g.default(m.CustomEventType.PLAYBACK_START))),this._engine?this._playbackMiddleware.play(function(){return e._play()}):this._loadingMedia?(this._prepareVideoElement(),this._playbackMiddleware.play(function(){return e._playAfterAsyncMiddleware()})):this.dispatchEvent(new g.default(m.Html5EventType.ERROR,new ee.default(ee.default.Severity.CRITICAL,ee.default.Category.PLAYER,ee.default.Code.NO_SOURCE_PROVIDED,"No Source Provided")))}},{key:"pause",value:function(){this._engine&&this._playbackMiddleware.pause(this._pause.bind(this))}},{key:"getView",value:function(){return this._el}},{key:"getVideoElement",value:function(){if(this._engine)return this._engine.getVideoElement()}},{key:"reset",value:function(){this._reset||(this.pause(),this._externalCaptionsHandler.reset(),this._posterManager.reset(),this._pluginManager.reset(),this._stateManager.reset(),this._config.sources={},this._activeTextCues=[],this._updateTextDisplay([]),this._tracks=[],this._resetStateFlags(),this._engineType="",this._streamType="",this._engine.reset(),this._showBlackCover(),this._reset=!0,this.dispatchEvent(new g.default(m.CustomEventType.PLAYER_RESET)),this._eventManager.removeAll(),this._createReadyPromise())}},{key:"destroy",value:function(){this._destroyed||(this._externalCaptionsHandler.destroy(),t._playerCapabilities={},this._posterManager.destroy(),this._pluginManager.destroy(),this._stateManager.destroy(),this._activeTextCues=[],this._textDisplaySettings={},this._config={},this._tracks=[],this._engineType="",this._streamType="",this._readyPromise=null,this._resetStateFlags(),this._playbackAttributesState={},this._engine&&this._engine.destroy(),this._el&&b.Dom.removeChild(this._el.parentNode,this._el),this._destroyed=!0,this.dispatchEvent(new g.default(m.CustomEventType.PLAYER_DESTROY)),this._eventManager.destroy())}},{key:"isLive",value:function(){return!!(this._config.sources.type===q.MediaType.LIVE||this._engine&&this._engine.isLive())}},{key:"isDvr",value:function(){return this.isLive()&&this._config.sources.dvr}},{key:"seekToLiveEdge",value:function(){this._engine&&this.isLive()&&this._engine.seekToLiveEdge()}},{key:"getStartTimeOfDvrWindow",value:function(){return this._engine?this._engine.getStartTimeOfDvrWindow():0}},{key:"getTracks",value:function(e){return b.Object.copyDeep(this._getTracksByType(e))}},{key:"getActiveTracks",value:function(){return b.Object.copyDeep({video:this._getTracksByType(V.TrackType.VIDEO).find(function(e){return e.active}),audio:this._getTracksByType(V.TrackType.AUDIO).find(function(e){return e.active}),text:this._getTracksByType(V.TrackType.TEXT).find(function(e){return e.active})})}},{key:"selectTrack",value:function(e){this._engine&&(e instanceof M.default?this._engine.selectVideoTrack(e):e instanceof N.default?this._engine.selectAudioTrack(e):e instanceof F.default&&(e.language===ue?(this.hideTextTrack(),this._externalCaptionsHandler.hideTextTrack(),this._playbackAttributesState.textLanguage=ue):e.external&&!this._config.playback.useNativeTextTrack?(this._engine.hideTextTrack(),this._externalCaptionsHandler.selectTextTrack(e)):(this._externalCaptionsHandler.hideTextTrack(),this._engine.selectTextTrack(e))))}},{key:"hideTextTrack",value:function(){if(this._engine){this._engine.hideTextTrack(),this._activeTextCues=[],this._updateTextDisplay([]);var e=this._getTracksByType(V.TrackType.TEXT);e.map(function(e){return e.active=!1});var t=e.find(function(e){return e.language===ue});t&&(t.active=!0,this.dispatchEvent(new g.default(m.CustomEventType.TEXT_TRACK_CHANGED,{selectedTextTrack:t})))}}},{key:"enableAdaptiveBitrate",value:function(){this._engine&&this._engine.enableAdaptiveBitrate()}},{key:"isAdaptiveBitrateEnabled",value:function(){return!!this._engine&&this._engine.isAdaptiveBitrateEnabled()}},{key:"setTextDisplaySettings",value:function(e){this._textDisplaySettings=e,this._updateCueDisplaySettings();for(var t=0;t<this._activeTextCues.length;t++)this._activeTextCues[t].hasBeenReset=!0;this._updateTextDisplay(this._activeTextCues)}},{key:"isFullscreen",value:function(){return this._fullscreen}},{key:"notifyEnterFullscreen",value:function(){this._fullscreen||(this._fullscreen=!0,this.dispatchEvent(new g.default(m.CustomEventType.ENTER_FULLSCREEN)))}},{key:"notifyExitFullscreen",value:function(){this._fullscreen&&(this._fullscreen=!1,this.dispatchEvent(new g.default(m.CustomEventType.EXIT_FULLSCREEN)))}},{key:"enterFullscreen",value:function(){this._fullscreen||(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.dispatchEvent(new g.default(m.CustomEventType.REQUESTED_ENTER_FULLSCREEN)))}},{key:"exitFullscreen",value:function(){this._fullscreen&&this.dispatchEvent(new g.default(m.CustomEventType.REQUESTED_EXIT_FULLSCREEN))}},{key:"enterPictureInPicture",value:function(){this.isFullscreen()&&this.exitFullscreen(),this._engine.isInPictureInPicture||this._engine.enterPictureInPicture()}},{key:"exitPictureInPicture",value:function(){this._engine.isInPictureInPicture&&this._engine.exitPictureInPicture()}},{key:"isInPictureInPicture",value:function(){return this._engine.isInPictureInPicture}},{key:"isPictureInPictureSupported",value:function(){return!!this._config.playback.pictureInPicture&&this._engine.isPictureInPictureSupported()}},{key:"isVr",value:function(){return!!this._config.sources.vr}},{key:"toggleVrStereoMode",value:function(){var e=this._pluginManager.get("vr");e&&"function"==typeof e.toggleVrStereoMode&&e.toggleVrStereoMode()}},{key:"isInVrStereoMode",value:function(){var e=this._pluginManager.get("vr");return!(!e||"function"!=typeof e.isInStereoMode)&&e.isInStereoMode()}},{key:"getLogLevel",value:function(e){return(0,A.getLogLevel)(e)}},{key:"setLogLevel",value:function(e,t){(0,A.setLogLevel)(e,t)}},{key:"_prepareVideoElement",value:function(){var e=this;te.EngineProvider.getEngines().forEach(function(t){t.prepareVideoElement(e._playerId)})}},{key:"_setConfigLogLevel",value:function(e){e.logLevel&&A.LogLevel[e.logLevel]&&(0,A.setLogLevel)(A.LogLevel[e.logLevel])}},{key:"_hasSources",value:function(e){return!!e&&!!Object.values(Y.StreamType).find(function(t){return e[t]&&e[t].length>0})}},{key:"_createPlayerContainer",value:function(){var e=this._el=b.Dom.createElement("div");b.Dom.addClassName(e,"playkit-container"),b.Dom.setAttribute(e,"id",this._playerId),b.Dom.setAttribute(e,"tabindex","-1")}},{key:"_appendEngineEl",value:function(){if(this._el){var e=this._engine.getVideoElement();b.Dom.addClassName(e,"playkit-engine");var t="playkit-engine-"+this._engine.id;b.Dom.addClassName(e,t),b.Dom.prependTo(e,this._el)}}},{key:"_appendDomElements",value:function(){this._textDisplayEl=b.Dom.createElement("div"),b.Dom.addClassName(this._textDisplayEl,"playkit-subtitles"),b.Dom.appendChild(this._el,this._textDisplayEl),this._blackCoverEl=b.Dom.createElement("div"),b.Dom.addClassName(this._blackCoverEl,"playkit-black-cover"),b.Dom.appendChild(this._el,this._blackCoverEl);var e=this._posterManager.getElement();b.Dom.addClassName(e,"playkit-poster"),b.Dom.appendChild(this._el,e)}},{key:"_configureOrLoadPlugins",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&Object.keys(t).forEach(function(r){var n=e._pluginManager.get(r);if(n)n.updateConfig(t[r]),e._config.plugins[r]=n.getConfig();else if(e._engine)delete e._config.plugins[r];else{try{e._pluginManager.load(r,e,t[r])}catch(t){e.dispatchEvent(t)}var i=e._pluginManager.get(r);i&&(e._config.plugins[r]=i.getConfig(),"function"==typeof i.getMiddlewareImpl&&e._playbackMiddleware.use(i.getMiddlewareImpl()))}})}},{key:"_createReadyPromise",value:function(){var e=this;this._readyPromise=new Promise(function(t,r){e._eventManager.listenOnce(e,m.CustomEventType.TRACKS_CHANGED,function(){e.dispatchEvent(new g.default(m.CustomEventType.MEDIA_LOADED)),t()}),e._eventManager.listen(e,m.Html5EventType.ERROR,r)}).catch(function(){})}},{key:"_selectEngineByPriority",value:function(){var e=this,r=this._config.playback.streamPriority,n=this._config.playback.preferNative,i=this._config.sources,a=!0,o=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=function(){var r=l.value,a="string"==typeof r.engine?r.engine.toLowerCase():"",o="string"==typeof r.format?r.format.toLowerCase():"",s=te.EngineProvider.getEngines().find(function(e){return e.id===a});if(s){var u=i[o];if(u&&u.length>0){var c=u[0];if(s.canPlaySource(c,n[o],e._config.drm))return t._logger.debug("Source selected: ",u),e._loadEngine(s,c),e._engineType=a,e._streamType=o,{v:!0}}}}();if("object"===(void 0===f?"undefined":s(f)))return f.v}}catch(e){o=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw u}}return!1}},{key:"_loadEngine",value:function(e,t){this._engine?this._engine.id===e.id?this._engine.restore(t,this._config):(this._engine.destroy(),this._engine=e.createEngine(t,this._config,this._playerId),this._appendEngineEl()):(this._engine=e.createEngine(t,this._config,this._playerId),this._appendEngineEl())}},{key:"_attachMedia",value:function(){var e=this;this._engine&&(Object.keys(m.Html5EventType).forEach(function(t){e._eventManager.listen(e._engine,m.Html5EventType[t],function(t){return e.dispatchEvent(t)})}),this._eventManager.listen(this._engine,m.Html5EventType.SEEKED,function(){var t=e._env.browser.name;"Edge"!==t&&"IE"!==t||e._removeTextCuePatch()}),this._eventManager.listen(this._engine,m.CustomEventType.VIDEO_TRACK_CHANGED,function(t){return e._markActiveTrack(t.payload.selectedVideoTrack),e.dispatchEvent(t)}),this._eventManager.listen(this._engine,m.CustomEventType.AUDIO_TRACK_CHANGED,function(t){e.ready().then(function(){return e._playbackAttributesState.audioLanguage=t.payload.selectedAudioTrack.language}),e._markActiveTrack(t.payload.selectedAudioTrack),e.dispatchEvent(t)}),this._eventManager.listen(this._engine,m.CustomEventType.TEXT_TRACK_CHANGED,function(t){return e._onTextTrackChanged(t)}),this._eventManager.listen(this._engine,m.CustomEventType.TRACKS_CHANGED,function(t){return e._onTracksChanged(t)}),this._eventManager.listen(this._engine,m.CustomEventType.TEXT_CUE_CHANGED,function(t){return e._onCueChange(t)}),this._eventManager.listen(this._engine,m.CustomEventType.ABR_MODE_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._engine,m.CustomEventType.AUTOPLAY_FAILED,function(t){e.pause(),e.dispatchEvent(t)}),this._eventManager.listen(this._engine,m.CustomEventType.FPS_DROP,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this,m.Html5EventType.PLAY,this._onPlay.bind(this)),this._eventManager.listen(this,m.Html5EventType.PLAYING,this._onPlaying.bind(this)),this._eventManager.listen(this,m.Html5EventType.ENDED,this._onEnded.bind(this)),this._eventManager.listen(this,m.CustomEventType.PLAYBACK_ENDED,this._onPlaybackEnded.bind(this)),this._eventManager.listen(this,m.CustomEventType.MUTE_CHANGE,function(){e._playbackAttributesState.muted=e.muted}),this._eventManager.listen(this,m.Html5EventType.VOLUME_CHANGE,function(){e._playbackAttributesState.volume=e.volume}),this._eventManager.listen(this,m.Html5EventType.RATE_CHANGE,function(){e._playbackAttributesState.rate=e.playbackRate}),this._eventManager.listen(this,m.CustomEventType.ENTER_FULLSCREEN,function(){return e._resetTextCuesAndReposition()}),this._eventManager.listen(this,m.CustomEventType.EXIT_FULLSCREEN,function(){return e._resetTextCuesAndReposition()}),this._eventManager.listen(window,"resize",function(){e._resetTextCuesAndReposition()}),this._eventManager.listen(this._engine,m.CustomEventType.MEDIA_RECOVERED,function(){return e._handleRecovered()}),this._eventManager.listen(this._externalCaptionsHandler,m.CustomEventType.TEXT_CUE_CHANGED,function(t){return e._onCueChange(t)}),this._eventManager.listen(this._externalCaptionsHandler,m.CustomEventType.TEXT_TRACK_CHANGED,function(t){return e._onTextTrackChanged(t)}),this._eventManager.listen(this._externalCaptionsHandler,m.Html5EventType.ERROR,function(t){return e.dispatchEvent(t)}))}},{key:"_handleRecovered",value:function(){this._stateManager.currentState.type===H.StateType.PLAYING&&this.play()}},{key:"_onTextTrackChanged",value:function(e){var t=this;this.ready().then(function(){return t._playbackAttributesState.textLanguage=e.payload.selectedTextTrack.language}),this._markActiveTrack(e.payload.selectedTextTrack),this._config.playback.useNativeTextTrack&&this._externalCaptionsHandler.selectTextTrack(e.payload.selectedTextTrack),this.dispatchEvent(e)}},{key:"_resetTextCuesAndReposition",value:function(){var e=this;this._updateTextDisplay([]);for(var t=0;t<this._activeTextCues.length;t++)this._activeTextCues[t].hasBeenReset=!0;this._repositionCuesTimeout&&clearTimeout(this._repositionCuesTimeout),this._repositionCuesTimeout=setTimeout(function(){e._updateTextDisplay(e._activeTextCues),e._repositionCuesTimeout=!1},1e3)}},{key:"_removeTextCuePatch",value:function(){var e=this,t=this._activeTextCues.filter(function(t){var r=t._endTime,n=t._startTime,i=e.currentTime;if(i<r&&i>n)return t});this._updateTextDisplay(t)}},{key:"_handlePlaybackOptions",value:function(){this._config.playback=this._config.playback||{},"boolean"==typeof this._playbackAttributesState.muted?this.muted=this._playbackAttributesState.muted:"boolean"==typeof this._config.playback.muted&&(this.muted=this._config.playback.muted),"number"==typeof this._playbackAttributesState.volume?this.volume=this._playbackAttributesState.volume:"number"==typeof this._config.playback.volume&&(this.volume=this._config.playback.volume),"boolean"==typeof this._config.playback.playsinline&&(this.playsinline=this._config.playback.playsinline),"string"==typeof this._config.playback.crossOrigin&&(this.crossOrigin=this._config.playback.crossOrigin)}},{key:"_handlePreload",value:function(){"auto"===this._config.playback.preload&&!this._config.playback.autoplay&&this._canPreload()&&this.load()}},{key:"_canPreload",value:function(){return!this._config.plugins||this._config.plugins&&!this._config.plugins.ima||this._config.plugins.ima&&this._config.plugins.ima.disable}},{key:"_handleAutoPlay",value:function(){var e=this;if(!0===this._config.playback.autoplay){var r=this._config.playback.allowMutedAutoPlay;t.getCapabilities(this.engineType).then(function(t){t.autoplay?n():t.mutedAutoPlay?e.muted&&!e._fallbackToMutedAutoPlay?i():r?a():o():o()})}else this._posterManager.show();var n=function(){t._logger.debug("Start autoplay"),e._fallbackToMutedAutoPlay&&(e._fallbackToMutedAutoPlay=!1,e.muted=!1),e.play()},i=function(){t._logger.debug("Start muted autoplay"),e.play()},a=function(){t._logger.debug("Fallback to muted autoplay"),e._fallbackToMutedAutoPlay=!0,e.muted=!0,e.dispatchEvent(new g.default(m.CustomEventType.FALLBACK_TO_MUTED_AUTOPLAY)),e.play()},o=function(){t._logger.warn("Autoplay failed, pause player"),e._posterManager.show(),e._canPreload()&&e.load(),e.ready().then(function(){return e.pause()}),e.dispatchEvent(new g.default(m.CustomEventType.AUTOPLAY_FAILED))}}},{key:"_maybeCreateAdsController",value:function(){if(!this._adsController){var e=this._controllerProvider.getAdsController();e&&(this._adsController=new ae.AdsController(this,e))}}},{key:"_playAfterAsyncMiddleware",value:function(){var e=this;this._engine?this._play():this._eventManager.listenOnce(this,m.CustomEventType.SOURCE_SELECTED,function(){return e._play()})}},{key:"_play",value:function(){var e=this;this._engine.src||this.load(),this.ready().then(function(){e.isLive()&&!e.isDvr()&&e.seekToLiveEdge(),e._engine.play()}).catch(function(t){e.dispatchEvent(new g.default(m.Html5EventType.ERROR,t))})}},{key:"_pause",value:function(){this._engine.pause()}},{key:"_onPlay",value:function(){this._firstPlay&&(this._firstPlay=!1,this.dispatchEvent(new g.default(m.CustomEventType.FIRST_PLAY)),this._posterManager.hide(),this._hideBlackCover(),"number"==typeof this._playbackAttributesState.rate&&(this.playbackRate=this._playbackAttributesState.rate))}},{key:"_onPlaying",value:function(){this._firstPlaying||(this._firstPlaying=!0,this.dispatchEvent(new g.default(m.CustomEventType.FIRST_PLAYING)))}},{key:"_hideBlackCover",value:function(){this._blackCoverEl&&(this._blackCoverEl.style.visibility="hidden")}},{key:"_showBlackCover",value:function(){this._blackCoverEl&&(this._blackCoverEl.style.visibility="visible")}},{key:"_onEnded",value:function(){var e=this;this._adsController&&!this._adsController.allAdsCompleted?this._eventManager.listenOnce(this._adsController,oe.AdEventType.ALL_ADS_COMPLETED,function(){e.dispatchEvent(new g.default(m.CustomEventType.PLAYBACK_ENDED))}):setTimeout(function(){return e.dispatchEvent(new g.default(m.CustomEventType.PLAYBACK_ENDED))},0),this.paused||this._pause()}},{key:"_onPlaybackEnded",value:function(){this.config.playback.loop&&(this.currentTime=0,this.play())}},{key:"_resetStateFlags",value:function(){this._loading=!1,this._firstPlay=!0,this._loadingMedia=!1,this._playbackStart=!1,this._firstPlaying=!1}},{key:"_onTracksChanged",value:function(e){this._updateTracks(e.payload.tracks),this.dispatchEvent(e)}},{key:"_updateTracks",value:function(e){t._logger.debug("Tracks changed",e),this._tracks=e.concat(this._externalCaptionsHandler.getExternalTracks(e)),this._addTextTrackOffOption(),this._maybeSetTracksLabels(),this._maybeAdjustTextTracksIndexes(),this._setDefaultTracks()}},{key:"_maybeAdjustTextTracksIndexes",value:function(){var e=this;if(this._config.playback.useNativeTextTrack){var t=function(t){var r=e.getVideoElement();return r?Array.from(r.textTracks).findIndex(function(e){return!!e&&e.language===t.language}):-1};this._getTracksByType(V.TrackType.TEXT).forEach(function(e){return e.index=t(e)})}}},{key:"_getTracksByType",value:function(e){return e?this._tracks.filter(function(t){return e===V.TrackType.VIDEO?t instanceof M.default:e===V.TrackType.AUDIO?t instanceof N.default:e!==V.TrackType.TEXT||t instanceof F.default}):this._tracks}},{key:"_markActiveTrack",value:function(e){var t=void 0;if(e instanceof M.default?t=V.TrackType.VIDEO:e instanceof N.default?t=V.TrackType.AUDIO:e instanceof F.default&&(t=V.TrackType.TEXT),t)for(var r=this._getTracksByType(t),n=0;n<r.length;n++)r[n].active=e.index===r[n].index}},{key:"_onCueChange",value:function(e){t._logger.debug("Text cue changed",e.payload.cues),this._activeTextCues=e.payload.cues,this._updateCueDisplaySettings(),this._updateTextDisplay(this._activeTextCues)}},{key:"_updateCueDisplaySettings",value:function(){for(var e=this._activeTextCues,t=this._textDisplaySettings,r=0;r<e.length;r++){var n=e[r];for(var i in t)n[i]=t[i]}}},{key:"_updateTextDisplay",value:function(e){this._config.playback.useNativeTextTrack||(0,G.processCues)(window,e,this._textDisplayEl)}},{key:"_addTextTrackOffOption",value:function(){var e=this._getTracksByType(V.TrackType.TEXT);e&&e.length&&this._tracks.push(new F.default({active:!1,index:e.length,kind:"subtitles",label:"Off",language:ue}))}},{key:"_setDefaultTracks",value:function(){var e=this.getActiveTracks(),t=this.config.playback,r=this._getTracksByType(V.TrackType.TEXT).find(function(e){return F.default.langComparer(ue,e.language)}),n=this._playbackAttributesState.textLanguage||this._getLanguage(t.textLanguage,e.text,V.TrackType.TEXT),i=this._playbackAttributesState.audioLanguage||t.audioLanguage;this._setDefaultTrack(V.TrackType.TEXT,n,r),this._setDefaultTrack(V.TrackType.AUDIO,i,e.audio)}},{key:"_getLanguage",value:function(e,t,r){var n=e;if("auto"===n){var i=this._getTracksByType(r),a=i.find(function(e){return C.default.langComparer(S.default.language,e.language)});a?n=a.language:t&&t.language!==ue?n=t.language:i&&i.length>0&&(n=i[0].language)}return n}},{key:"_setDefaultTrack",value:function(e,t,r){var n=this._getTracksByType(e).find(function(e){return C.default.langComparer(t,e.language)});n?(this.selectTrack(n),this._markActiveTrack(n)):r&&!r.active&&this.selectTrack(r)}},{key:"_maybeSetTracksLabels",value:function(){var e=this._config.customLabels;if(e)for(var t in e)this._setTracksCustomLabels(this._getTracksByType(K.LabelToTrackMap[t]),e[t])}},{key:"_setTracksCustomLabels",value:function(e,t){e.forEach(function(e){var r=t(b.Object.copyDeep(e));r&&(e.label=r)})}},{key:"buffered",get:function(){if(this._engine)return this._engine.buffered}},{key:"currentTime",set:function(e){if(this._engine&&b.Number.isNumber(e)){var t=e;e<0&&(t=0),t>this._engine.duration-.1&&(t=this._engine.duration-.1),this._engine.currentTime=t}},get:function(){if(this._engine)return this._engine.currentTime}},{key:"duration",get:function(){if(this._engine)return this._engine.duration}},{key:"volume",set:function(e){if(this._engine&&(b.Number.isFloat(e)||0===e||1===e)){var t=e;t<0&&(t=0),t>1&&(t=1),this._engine.volume=t}},get:function(){if(this._engine)return this._engine.volume}},{key:"paused",get:function(){if(this._engine)return this._engine.paused}},{key:"seeking",get:function(){if(this._engine)return this._engine.seeking}},{key:"playsinline",set:function(e){this._engine&&(this._engine.playsinline=e)},get:function(){if(this._engine)return this._engine.playsinline}},{key:"muted",set:function(e){this._engine&&(this._engine.muted=e,this.dispatchEvent(new g.default(m.CustomEventType.MUTE_CHANGE,{mute:e})),!1===e&&(this._fallbackToMutedAutoPlay=e))},get:function(){if(this._engine)return this._engine.muted}},{key:"src",get:function(){if(this._engine)return this._engine.src}},{key:"dimensions",get:function(){return{width:this._el.clientWidth,height:this._el.clientHeight}}},{key:"poster",get:function(){return this._posterManager.src}},{key:"playbackRate",set:function(e){this._engine&&(this._engine.playbackRate=e)},get:function(){if(this._engine)return this._engine.playbackRate}},{key:"playbackRates",get:function(){return this._engine?this._engine.playbackRates:[]}},{key:"defaultPlaybackRate",get:function(){return this._engine?this._engine.defaultPlaybackRate:1}},{key:"engineType",get:function(){return this._engineType}},{key:"streamType",get:function(){return this._streamType}},{key:"env",get:function(){return this._env}},{key:"config",get:function(){return b.Object.mergeDeep({},this._config)}},{key:"loadingMedia",set:function(e){this._loadingMedia=e}},{key:"crossOrigin",set:function(e){this._engine&&(this._engine.crossOrigin=e)},get:function(){if(this._engine)return this._engine.crossOrigin}},{key:"ended",get:function(){if(this._engine)return this._engine.ended}},{key:"textStyle",set:function(e){if(!(e instanceof B.default))throw new Error("Style must be instance of TextStyle");var r=b.Dom.getElementBySelector("."+this._playerId+".playkit-subtitles-style");r||(r=b.Dom.createElement("style"),b.Dom.addClassName(r,this._playerId),b.Dom.addClassName(r,"playkit-subtitles-style"),b.Dom.appendChild(document.head,r));for(var n=r.sheet;n.cssRules.length;)n.deleteRule(0);try{this._config.playback.useNativeTextTrack?n.insertRule("#"+this._playerId+"  video.playkit-engine::cue { "+e.toCSS()+" }",0):n.insertRule("#"+this._playerId+" .playkit-subtitles > div > div > div { "+e.toCSS()+" }",0),this._textStyle=e,this.dispatchEvent(new g.default(m.CustomEventType.TEXT_STYLE_CHANGED))}catch(e){t._logger.error(e.message)}},get:function(){return this._textStyle.clone()}},{key:"ads",get:function(){return this._adsController}},{key:"plugins",get:function(){return this._pluginManager.getAll()}},{key:"Event",get:function(){return m.EventType}},{key:"TextStyle",get:function(){return B.default}},{key:"State",get:function(){return H.StateType}},{key:"Track",get:function(){return V.TrackType}},{key:"LogLevelType",get:function(){return A.LogLevelType}},{key:"LogLevel",get:function(){return A.LogLevel}},{key:"AbrMode",get:function(){return X.AbrMode}},{key:"MediaType",get:function(){return q.MediaType}},{key:"StreamType",get:function(){return Y.StreamType}},{key:"EngineType",get:function(){return W.EngineType}},{key:"CorsType",get:function(){return z.CorsType}},{key:"AdBreakType",get:function(){return ne.AdBreakType}},{key:"AdTagType",get:function(){return ie.AdTagType}},{key:"Error",get:function(){return ee.default}}],[{key:"_defaultConfig",get:function(){return b.Object.copyDeep($.DefaultConfig)}}]),t}(_.default);le._logger=(0,k.default)("Player"),le._playerCapabilities={},t.default=le},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TextTrack=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(6),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._label=r.label||r.language,r._kind=e.kind,r._external=e.external,r}return a(t,e),o(t,[{key:"kind",get:function(){return this._kind}},{key:"external",get:function(){return this._external}}]),t}(u.default);t.default=l,t.TextTrack=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(6),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._bandwidth=e.bandwidth,r._width=e.width,r._height=e.height,r._label=e.label?e.label:r._height?r._height+"p":void 0,r}return a(t,e),o(t,[{key:"bandwidth",get:function(){return this._bandwidth}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),t}(u.default);t.default=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(s.default);t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a=(new i.default).getResult();t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return"string"==typeof e&&!!u[e.toLowerCase()]&&e.toLowerCase()}function a(e){return"string"==typeof e&&!!l[e.toLowerCase()]&&e.toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),t.Cue=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(20),u={"":!0,lr:!0,rl:!0},l={start:!0,middle:!0,end:!0,left:!0,right:!0},c=function(){function e(t,r,i){n(this,e),this.hasBeenReset=!1,this.displayState=void 0,this._id="",this._pauseOnExit=!1,this._region=null,this._vertical="",this._snapToLines=!0,this._line="auto",this._lineAlign="start",this._position=50,this._positionAlign="middle",this._size=50,this._align="middle",this._startTime=t,this._endTime=r,this._text=i}return o(e,[{key:"resetCue",value:function(){this.hasBeenReset=!0}},{key:"getCueAsHTML",value:function(){return(0,s.convertCueToDOMTree)(window,this.text)}},{key:"id",get:function(){return this._id},set:function(e){this._id=""+e}},{key:"pauseOnExit",get:function(){return this._pauseOnExit},set:function(e){this._pauseOnExit=e}},{key:"startTime",get:function(){return this._startTime},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");this._startTime=e,this.resetCue()}},{key:"endTime",get:function(){return this._endTime},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");this._endTime=e,this.resetCue()}},{key:"text",get:function(){return this._text},set:function(e){this._text=""+e,this.resetCue()}},{key:"region",get:function(){return this._region},set:function(e){this._region=e,this.resetCue()}},{key:"vertical",get:function(){return this._vertical},set:function(e){var t=i(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");"string"==typeof t&&(this._vertical=t,this.resetCue())}},{key:"snapToLines",get:function(){return this._snapToLines},set:function(e){this._snapToLines=e,this.resetCue()}},{key:"line",get:function(){return this._line},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");this._line=e,this.resetCue()}},{key:"lineAlign",get:function(){return this._lineAlign},set:function(e){var t=a(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");"string"==typeof t&&(this._lineAlign=t,this.resetCue())}},{key:"position",get:function(){return this._position},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");this._position=e,this.resetCue()}},{key:"positionAlign",get:function(){return this._positionAlign},set:function(e){var t=a(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");"string"==typeof t&&(this._positionAlign=t,this.resetCue())}},{key:"size",get:function(){return this._size},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");this._size=e,this.resetCue()}},{key:"align",get:function(){return this._align},set:function(e){var t=a(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");"string"==typeof t&&(this._align=t,this.resetCue())}}]),e}(),f=void 0;"undefined"!=typeof window&&window.VTTCue?t.Cue=f=window.VTTCue:t.Cue=f=c,t.Cue=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={VIDEO:"video",AUDIO:"audio",TEXT:"text"};t.TrackType=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e),this._map=new Map}return i(e,[{key:"push",value:function(e,t){if(this._map.has(e)){var r=this._map.get(e);Array.isArray(r)&&(r.push(t),this._map.set(e,r))}else this._map.set(e,[t])}},{key:"set",value:function(e,t){this._map.set(e,t)}},{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){var t=this._map.get(e);return t?t.slice():[]}},{key:"getAll",value:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var i,a=this._map.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e=e.concat(o)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}return e}},{key:"remove",value:function(e,t){if(this._map.has(e)){var r=this._map.get(e);if(Array.isArray(r))for(var n=0;n<r.length;++n)r[n]==t&&(r.splice(n,1),--n)}}},{key:"keys",value:function(){return this._map.keys()}},{key:"clear",value:function(){this._map.clear()}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={AD_CAN_SKIP:"adcanskip",AD_MANIFEST_LOADED:"admanifestloaded",AD_LOADED:"adloaded",AD_STARTED:"adstarted",AD_RESUMED:"adresumed",AD_PAUSED:"adpaused",AD_CLICKED:"adclicked",AD_SKIPPED:"adskipped",AD_COMPLETED:"adcompleted",AD_ERROR:"aderror",ALL_ADS_COMPLETED:"alladscompleted",AD_BREAK_START:"adbreakstart",AD_BREAK_END:"adbreakend",AD_FIRST_QUARTILE:"adfirstquartile",AD_MIDPOINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",USER_CLOSED_AD:"userclosedad",AD_VOLUME_CHANGED:"advolumechanged",AD_MUTED:"admuted",AD_PROGRESS:"adprogress"};t.AdEventType=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.registerPlugin=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(18),s=n(o),u=r(1),l=n(u),c=r(8),f=(n(c),r(0)),d=n(f),h=(0,d.default)("PluginManager"),p=function(){function e(){i(this,e),this._plugins={},this._isDisabledPluginMap=new Map}return a(e,[{key:"load",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e._registry.has(t))throw h.warn("Plugin <"+t+"> loading failed, plugin is not registered"),new l.default(l.default.Severity.RECOVERABLE,l.default.Category.PLAYER,l.default.Code.RUNTIME_ERROR_NOT_REGISTERED_PLUGIN,t);var i=e._registry.get(t);"boolean"==typeof n.disable&&this._isDisabledPluginMap.set(t,n.disable);var a=!!this._isDisabledPluginMap.get(t),o=!!i&&i.isValid();return i&&o&&!a?(this._plugins[t]=i.createPlugin(t,r,n),this._isDisabledPluginMap.set(t,!1),h.debug("Plugin <"+t+"> has been loaded"),!0):(h.debug("Plugin <"+t+"> isn't loaded, isValid()="+o.toString()+", disabled="+a.toString()),!1)}},{key:"destroy",value:function(){var e=this;Object.keys(this._plugins).forEach(function(t){e._plugins[t].destroy(),delete e._plugins[t]})}},{key:"reset",value:function(){var e=this;Object.keys(this._plugins).forEach(function(t){return e._plugins[t].reset()})}},{key:"get",value:function(e){return this._plugins[e]}},{key:"getAll",value:function(){return this._plugins}}],[{key:"register",value:function(t,r){return"function"!=typeof r||r.prototype instanceof s.default==0?(h.error("Plugin <"+t+"> registration failed, either plugin is not an instance of BasePlugin or plugin handler is not a function"),!1):e._registry.has(t)?(h.debug("Plugin <"+t+"> is already registered, do not register again"),!1):(e._registry.set(t,r),h.debug("Plugin <"+t+"> has been registered successfully"),!0)}},{key:"unRegister",value:function(t){e._registry.has(t)&&(e._registry.delete(t),h.debug("Unregistered <"+t+"> plugin."))}}]),e}();p._registry=new Map,t.default=p;var v=p.register;t.registerPlugin=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(8),s=(n(o),r(0)),u=n(s),l=r(5),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),f=r(4),d=n(f),h=r(1),p=n(h),v=r(2),g=n(v),y=function(){function e(t,r,n){i(this,e),this.name=t,this.player=r,this.eventManager=new d.default,this.logger=(0,u.default)(c.String.capitlize(this.name)),this.config={},c.Object.mergeDeep(this.config,this.constructor.defaultConfig,n)}return a(e,null,[{key:"createPlugin",value:function(e,t){return new this(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}},{key:"isValid",value:function(){throw new p.default(p.default.Severity.CRITICAL,p.default.Category.PLAYER,p.default.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED,"isValid()")}}]),a(e,[{key:"getConfig",value:function(e){return e?c.Object.copyDeep(this.config[e]):c.Object.copyDeep(this.config)}},{key:"updateConfig",value:function(e){c.Object.mergeDeep(this.config,e)}},{key:"destroy",value:function(){}},{key:"reset",value:function(){}},{key:"getName",value:function(){return this.name}},{key:"dispatchEvent",value:function(e,t){this.logger.debug("Fire event: "+e,t),this.player.dispatchEvent(new g.default(e,t))}}]),e}();y.defaultConfig={},t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={IDLE:"idle",LOADING:"loading",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering"};t.StateType=n},function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function s(){this.values=x(null)}function u(e,t,r,n){var i=n?e.split(n):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(r);if(2===o.length){var s=o[0],u=o[1];t(s,u)}}}function l(e,t,r){function n(){var t=o(e);if(null===t)throw new y(y.Errors.BadTimeStamp,"Malformed timestamp: "+a);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(){e=e.replace(/^\s+/,"")}var a=e;if(i(),t.startTime=n(),i(),"--\x3e"!==e.substr(0,3))throw new y(y.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);e=e.substr(3),i(),t.endTime=n(),i(),function(e,t){var n=new s;u(e,function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];n.integer(e,o),n.percent(e,o)&&n.set("snapToLines",!1),n.alt(e,o,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start","middle","end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start","middle","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical",""),t.line=n.get("line",t.line||"auto"),t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align","middle"),t.position=n.get("position",t.position||"auto"),t.positionAlign=n.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}(e,t)}function c(e,t){function r(e){return T[e]}for(var n=e.document.createElement("div"),i=n,a=void 0,s=[];null!==(a=function(){if(!t)return null;var e=t.match(/^([^<]*)(<[^>]+>?)?/);return function(e){return t=t.substr(e.length),e}(e[1]?e[1]:e[2])}());)if("<"!==a[0])i.appendChild(e.document.createTextNode(function(e){for(var t=void 0;t=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(t[0],r);return e}(a)));else{if("/"===a[1]){s.length&&s[s.length-1]===a.substr(2).replace(">","")&&(s.pop(),i=i.parentNode);continue}var u=o(a.substr(1,a.length-2)),l=void 0;if(u){l=e.document.createProcessingInstruction("timestamp",u),i.appendChild(l);continue}var c=a.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!c)continue;if(!(l=function(t,r){var n=S[t];if(!n)return null;var i=e.document.createElement(n),a=A[t];return a&&r&&(i[a]=r.trim()),i}(c[1],c[3])))continue;if(!function(e,t){return!k[t.localName]||k[t.localName]===e.localName}(i,l))continue;c[2]&&(l.className=c[2].substr(1).replace("."," ")),s.push(c[1]),i.appendChild(l),i=l}return n}function f(e){for(var t=0;t<O.length;t++){var r=O[t];if(e>=r[0]&&e<=r[1])return!0}return!1}function d(e){function t(e,t){for(var r=t.childNodes.length-1;r>=0;r--)e.push(t.childNodes[r])}function r(e){if(!e||!e.length)return null;var n=e.pop(),i=n.textContent||n.innerText;if(i){var a=i.match(/^.*(\n|\r)/);return a?(e.length=0,a[0]):i}return"ruby"===n.tagName?r(e):n.childNodes?(t(e,n),r(e)):void 0}var n=[],i="",a=void 0;if(!e||!e.childNodes)return"ltr";for(t(n,e);i=r(n);)for(var o=0;o<i.length;o++)if(a=i.charCodeAt(o),f(a))return"rtl";return"ltr"}function h(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,r=t.textTrackList,n=0,i=0;i<r.length&&r[i]!==t;i++)"showing"===r[i].mode&&n++;return-1*++n}function p(e,t,r){var n=new P(e),i=e.cue,a=h(i),o=[];if(i.snapToLines){var s=void 0;switch(i.vertical){case"":o=["+y","-y"],s="height";break;case"rl":o=["+x","-x"],s="width";break;case"lr":o=["-x","+x"],s="width"}var u=n.lineHeight,l=u*Math.round(a),c=t[s]+u,f=o[0];Math.abs(l)>c&&(l=l<0?-1:1,l*=Math.ceil(c/u)*u),a<0&&(l+=""===i.vertical?t.height:t.width,o=o.reverse()),n.move(f,l)}else{var d=n.lineHeight/t.height*100;switch(i.lineAlign){case"middle":a-=d/2;break;case"end":a-=d}switch(i.vertical){case"":e.applyStyles({top:e.formatStyle(a,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(a,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(a,"%")})}o=["+y","-x","+x","-y"],n=new P(e)}var p=function(e,n){for(var i=void 0,a=new P(e),o=1,s=0;s<n.length;s++){for(;e.overlapsOppositeAxis(t,n[s])||e.within(t)&&e.overlapsAny(r);)e.move(n[s]);if(e.within(t))return e;var u=e.intersectPercentage(t);o>u&&(i=new P(e),o=u),e=new P(a)}return i||a}(n,o);e.move(p.toCSSCompatValues(t))}function v(e,t){return e&&t?c(e,t):null}function g(e,t,r){if(!e||!t||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var n=e.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=C,r.appendChild(n),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var i=[],a=P.getSimpleBoxPosition(n),o=a.height<a.width?a.height:a.width,s=Math.round(o*L*100)/100,u={font:s*b+"px "+D};!function(){for(var r=void 0,o=void 0,s=0;s<t.length;s++)o=t[s],r=new R(e,o,u),n.appendChild(r.div),p(r,a,i),o.displayState=r.div,i.push(P.getSimpleBoxPosition(r))}()}else for(var l=0;l<t.length;l++)n.appendChild(t[l].displayState)}function y(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}Object.defineProperty(t,"__esModule",{value:!0}),t.StringDecoder=t.Parser=t.convertCueToDOMTree=t.processCues=void 0;var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),m=r(13),E=r(51),b=1,T={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},S={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},A={v:"title",lang:"lang"},k={rt:"ruby"};s.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var O=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]],w=function(){function e(){a(this,e)}return _(e,[{key:"applyStyles",value:function(e,t){t=t||this.div;for(var r in e)e.hasOwnProperty(r)&&(t.style[r]=e[r])}},{key:"formatStyle",value:function(e,t){return 0===e?0:e+t}}]),e}(),R=function(e){function t(e,r,i){a(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),s="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent),u="rgba(255, 255, 255, 1)",l="rgba(0, 0, 0, 0.8)",f="";"undefined"!=typeof WebVTTSet&&(u=WebVTTSet.fontSet,l=WebVTTSet.backgroundSet,f=WebVTTSet.edgeSet),s&&(u="rgb(255, 255, 255)",l="rgb(0, 0, 0)"),o.cue=r,o.cueDiv=c(e,r.text);var h={color:u,backgroundColor:l,textShadow:f,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};s||(h.writingMode=""===r.vertical?"horizontal-tb":"lr"===r.vertical?"vertical-lr":"vertical-rl",h.unicodeBidi="plaintext"),o.applyStyles(h,o.cueDiv),o.div=e.document.createElement("div"),h={textAlign:"middle"===r.align?"center":r.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},s||(h.direction=d(o.cueDiv),h.writingMode=""===r.vertical?"horizontal-tb":"lr"===r.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),o.applyStyles(h),o.div.appendChild(o.cueDiv);var p=0;switch(r.positionAlign){case"start":p=r.position;break;case"middle":p=r.position-r.size/2;break;case"end":p=r.position-r.size}return""===r.vertical?o.applyStyles({left:o.formatStyle(p,"%"),width:o.formatStyle(r.size,"%")}):o.applyStyles({top:o.formatStyle(p,"%"),height:o.formatStyle(r.size,"%")}),o.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})},o}return i(t,e),t}(w),P=function(){function e(t){a(this,e),this.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top};var r="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent),n=void 0,i=void 0,o=void 0,s=void 0;if(t.div){i=t.div.offsetHeight,o=t.div.offsetWidth,s=t.div.offsetTop;var u=(u=t.div.childNodes)&&(u=u[0])&&u.getClientRects&&u.getClientRects();t=t.div.getBoundingClientRect(),n=u?Math.max(u[0]&&u[0].height||0,t.height/u.length):0}this.left=t.left,this.right=t.right,this.top=t.top||s,this.height=t.height||i,this.bottom=t.bottom||s+(t.height||i),this.width=t.width||o,this.lineHeight=void 0!==n?n:t.lineHeight,r&&!this.lineHeight&&(this.lineHeight=13)}return _(e,[{key:"move",value:function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}}},{key:"overlapsAny",value:function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1}},{key:"within",value:function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right}},{key:"overlapsOppositeAxis",value:function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}}},{key:"intersectPercentage",value:function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)}},{key:"toCSSCompatValues",value:function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}}}],[{key:"getSimpleBoxPosition",value:function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e,{left:e.left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||r}}}]),e}(),L=.065,D="sans-serif",C="1.5%",I=function(e,t){this.window=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]},M=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},x=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();y.prototype=x(Error.prototype),y.prototype.constructor=y,y.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},I.prototype={reportOrThrowError:function(e){if(!(e instanceof y))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function t(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}function r(e){var t=new s;if(u(e,function(e,r){switch(e){case"id":t.set(e,r);break;case"width":t.percent(e,r);break;case"lines":t.integer(e,r);break;case"regionanchor":case"viewportanchor":var n=r.split(",");if(2!==n.length)break;var i=new s;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;t.set(e+"X",i.get("x")),t.set(e+"Y",i.get("y"));break;case"scroll":t.alt(e,r,["up"])}},/=/,/\s/),t.has("id")){var r=new E.Region;r.width=t.get("width",100),r.lines=t.get("lines",3),r.regionAnchorX=t.get("regionanchorX",0),r.regionAnchorY=t.get("regionanchorY",100),r.viewportAnchorX=t.get("viewportanchorX",0),r.viewportAnchorY=t.get("viewportanchorY",100),r.scroll=t.get("scroll",""),n.onregion&&n.onregion(r),n.regionList.push({id:t.get("id"),region:r})}}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;i=t();var a=i.match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new y(y.Errors.BadSignature);n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:i=t(),n.state){case"HEADER":/:/.test(i)?function(e){u(e,function(e,t){switch(e){case"Region":r(t)}},/:/)}(i):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new m.Cue(0,0,""),n.state="CUE",-1===i.indexOf("--\x3e")){n.cue.id=i;continue}case"CUE":try{l(i,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var c=-1!==i.indexOf("--\x3e");if(!i||c&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i;continue;case"BADCUE":i||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new y(y.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},t.processCues=g,t.convertCueToDOMTree=v,t.Parser=I,t.StringDecoder=M},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return i(e,[{key:"callNext",value:function(e){e&&e()}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrmScheme={WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready",FAIRPLAY:"com.apple.fairplay"}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this.type=t,this._duration=0,this._timestamp=Date.now()/1e3}return i(e,[{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e-this._timestamp}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e),this.fontSize="100%",this.fontFamily=e.FontFamily.SANS_SERIF,this.fontColor=e.StandardColors.WHITE,this.fontOpacity=e.StandardOpacities.OPAQUE,this.backgroundColor=e.StandardColors.BLACK,this.backgroundOpacity=e.StandardOpacities.OPAQUE,this.fontEdge=e.EdgeStyles.NONE}return i(e,[{key:"toCSS",value:function(){var t=[];t.push("font-family: "+this.fontFamily),t.push("font-size: "+this.fontSize),t.push("color: "+e._toRGBA(this.fontColor,this.fontOpacity)),t.push("background-color: "+e._toRGBA(this.backgroundColor,this.backgroundOpacity));for(var r=[],n=0;n<this.fontEdge.length;n++){var i=this.fontEdge[n].slice(0,3),a=this.fontEdge[n].slice(3,6);r.push(e._toRGBA(i,this.fontOpacity)+" "+a.join("px ")+"px")}return t.push("text-shadow: "+r.join(",")),t.join("!important; ")}},{key:"clone",value:function(){var t=new e;return t.fontEdge=this.fontEdge,t.fontSize=this.fontSize,t.fontColor=this.fontColor,t.fontOpacity=this.fontOpacity,t.backgroundColor=this.backgroundColor,t.backgroundOpacity=this.backgroundOpacity,t.fontFamily=this.fontFamily,t}},{key:"isEqual",value:function(e){return e.fontEdge===this.fontEdge&&e.fontSize===this.fontSize&&e.fontColor===this.fontColor&&e.fontOpacity===this.fontOpacity&&e.backgroundColor===this.backgroundColor&&e.backgroundOpacity===this.backgroundOpacity}}],[{key:"_toRGBA",value:function(e,t){return"rgba("+e.concat(t).join(",")+")"}}]),e}();a.FontFamily={ARIAL:"Arial",HELVETICA:"Helvetica",VERDANA:"Verdana",SANS_SERIF:"sans-serif"},a.StandardColors={WHITE:[255,255,255],BLACK:[0,0,0],RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]},a.StandardOpacities={OPAQUE:1,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0},a.EdgeStyles={NONE:[],RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]},a.FontSizes=["50%","75%","100%","200%","300%","400%"],t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={DASH:"dash",HLS:"hls",PROGRESSIVE:"progressive"};t.StreamType=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={HTML5:"html5",FLASH:"flash",SILVERLIGHT:"silverlight",CAST:"cast"};t.EngineType=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={VOD:"Vod",LIVE:"Live",AUDIO:"Audio",UNKNOWN:"Unknown"};t.MediaType=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={MANUAL:"manual",AUTO:"auto"};t.AbrMode=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ANONYMOUS:"anonymous",USE_CREDENTIALS:"use-credentials"};t.CorsType=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.EngineProvider=t.unRegisterEngine=t.registerEngine=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),s=n(o),u=r(62),l=n(u),c=function(){function e(){i(this,e)}return a(e,null,[{key:"register",value:function(t,r){t&&!e._engineProviders[t]?(e._logger.debug("Engine <"+t+"> has been registered successfully"),e._engineProviders[t]=r):e._logger.debug("Engine <"+t+"> is already registered, do not register again")}},{key:"unRegister",value:function(t){e._engineProviders[t]&&(e._logger.debug("Unregistered <"+t+"> Engine"),delete e._engineProviders[t])}},{key:"getEngines",value:function(){return Object.keys(e._engineProviders).map(function(t){return e._engineProviders[t]})}},{key:"destroy",value:function(){e._engineProviders={}}}]),e}();c._logger=(0,s.default)("EngineProvider"),c._engineProviders={},l.default.isSupported()&&c.register(l.default.id,l.default);var f=c.register,d=c.unRegister;t.registerEngine=f,t.unRegisterEngine=d,t.EngineProvider=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.registerMediaSourceAdapter=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(63),s=n(o),u=r(0),l=n(u),c=function(){function e(){i(this,e)}return a(e,null,[{key:"register",value:function(t){t&&(e._mediaSourceAdapters.includes(t)?e._logger.debug("Adapter <"+t.id+"> is already registered, do not register again"):(e._logger.debug("Adapter <"+t.id+"> has been registered successfully"),e._mediaSourceAdapters.push(t)))}},{key:"unRegister",value:function(t){var r=e._mediaSourceAdapters.indexOf(t);r>-1&&(e._logger.debug("Unregistered <"+t.id+"> adapter"),e._mediaSourceAdapters.splice(r,1))}},{key:"canPlaySource",value:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments[2];e._orderMediaSourceAdapters(r);var i=e._mediaSourceAdapters;if(t&&t.mimetype)for(var a=0;a<i.length;a++)if(i[a].canPlayType(t.mimetype)&&(!t.drmData||i[a].canPlayDrm(t.drmData,n)))return e._selectedAdapter=i[a],e._logger.debug("Selected adapter is <"+e._selectedAdapter.id+">"),!0;return!1}},{key:"_orderMediaSourceAdapters",value:function(t){e._mediaSourceAdapters=e._mediaSourceAdapters.filter(function(e){return"NativeAdapter"!==e.id}),t?e._mediaSourceAdapters.unshift(s.default):e._mediaSourceAdapters.push(s.default)}},{key:"getMediaSourceAdapter",value:function(t,r,n){return t&&r&&n?(e._selectedAdapter||e.canPlaySource(r,!0,n.drm),e._selectedAdapter?e._selectedAdapter.createAdapter(t,r,n):null):null}},{key:"destroy",value:function(){e._selectedAdapter=null}}]),e}();c._logger=(0,l.default)("MediaSourceProvider"),c._mediaSourceAdapters=[s.default],c._selectedAdapter=null,t.default=c;var f=c.register;t.registerMediaSourceAdapter=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(2),l=n(u),c=r(7),f=n(c),d=r(1),h=n(d),p=r(3),v=r(0),g=n(v),y=r(6),_=(n(y),r(10)),m=n(_),E=r(11),b=n(E),T=r(9),S=n(T),A=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o._capabilities={fpsControl:!1},o._videoElement=e,o._sourceObj=r,o._config=n,o._handleLiveTimeUpdate(),o}return o(t,e),s(t,null,[{key:"isSupported",value:function(){return!0}}]),s(t,[{key:"destroy",value:function(){return this._sourceObj=null,this._config={},Promise.resolve()}},{key:"_onTrackChanged",value:function(e){e instanceof m.default?this._trigger(p.CustomEventType.VIDEO_TRACK_CHANGED,{selectedVideoTrack:e}):e instanceof b.default?this._trigger(p.CustomEventType.AUDIO_TRACK_CHANGED,{selectedAudioTrack:e}):e instanceof S.default&&this._trigger(p.CustomEventType.TEXT_TRACK_CHANGED,{selectedTextTrack:e})}},{key:"_trigger",value:function(e,t){this.dispatchEvent(new l.default(e,t))}},{key:"load",value:function(){return t._throwNotImplementedError("load")}},{key:"selectVideoTrack",value:function(e){return t._throwNotImplementedError("selectVideoTrack")}},{key:"selectAudioTrack",value:function(e){t._throwNotImplementedError("selectAudioTrack")}},{key:"selectTextTrack",value:function(e){t._throwNotImplementedError("selectTextTrack")}},{key:"hideTextTrack",value:function(){t._throwNotImplementedError("hideTextTrack")}},{key:"enableAdaptiveBitrate",value:function(){t._throwNotImplementedError("enableAdaptiveBitrate")}},{key:"isAdaptiveBitrateEnabled",value:function(){return t._throwNotImplementedError("isAdaptiveBitrateEnabled")}},{key:"_getLiveEdge",value:function(){return t._throwNotImplementedError("_getLiveEdge")}},{key:"seekToLiveEdge",value:function(){t._throwNotImplementedError("seekToLiveEdge")}},{key:"isLive",value:function(){return t._throwNotImplementedError("isLive")}},{key:"setMaxBitrate",value:function(e){}},{key:"_handleLiveTimeUpdate",value:function(){var e=this;this._videoElement.addEventListener(p.Html5EventType.DURATION_CHANGE,function(){e.isLive()&&e._videoElement.paused&&e._trigger(p.Html5EventType.TIME_UPDATE)})}},{key:"handleMediaError",value:function(e){return!1}},{key:"getStartTimeOfDvrWindow",value:function(){return t._throwNotImplementedError("getStartTimeOfDvrWindow")}},{key:"currentTime",get:function(){return this.isLive()?this._videoElement.currentTime-this.getStartTimeOfDvrWindow():this._videoElement.currentTime},set:function(e){this.isLive()&&(e+=this.getStartTimeOfDvrWindow()),this._videoElement.currentTime=e}},{key:"duration",get:function(){return this.isLive()?this._getLiveEdge()-this.getStartTimeOfDvrWindow():this._videoElement.duration}},{key:"src",get:function(){return this._loadPromise&&this._sourceObj?this._sourceObj.url:""}},{key:"capabilities",get:function(){return this._capabilities}}],[{key:"canPlayType",value:function(e,r){return t._throwNotImplementedError("static canPlayType")}},{key:"_throwNotImplementedError",value:function(e){throw new h.default(h.default.Severity.CRITICAL,h.default.Category.PLAYER,h.default.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED,e)}}]),t}(f.default);A.getLogger=g.default,t.default=A},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),s=n(o),u=r(1),l=n(u),c=r(66),f=n(c),d=r(22),h=function(){function e(){i(this,e)}return a(e,null,[{key:"isConfigured",value:function(e,t){throw new l.default(l.default.Severity.CRITICAL,l.default.Category.PLAYER,l.default.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED,"static isConfigured")}},{key:"canPlayDrm",value:function(e){throw new l.default(l.default.Severity.CRITICAL,l.default.Category.PLAYER,l.default.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED,"static canPlayDrm")}},{key:"setDrmPlayback",value:function(){throw new l.default(l.default.Severity.CRITICAL,l.default.Category.PLAYER,l.default.Code.RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED,"static setDrmPlayback")}}]),e}();h.getLogger=s.default,h.DrmSupport=f.default,h.DrmScheme=d.DrmScheme,t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={PRE:"preroll",MID:"midroll",POST:"postroll",OVERLAY:"overlay"};t.AdBreakType=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={VAST:"vast",VMAP:"vmap"};t.AdTagType=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AdsController=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(8),l=(n(u),r(16)),c=r(4),f=n(c),d=r(7),h=n(d),p=r(2),v=(n(p),r(3)),g=r(1),y=n(g),_=(r(37),r(38),function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._player=e,n._adsPluginController=r,n._initMembers(),n._addBindings(),n}return o(t,e),s(t,[{key:"isAdBreak",value:function(){return!!this._adBreak}},{key:"getAdBreaksLayout",value:function(){return this._adBreaksLayout}},{key:"getAdBreak",value:function(){return this._adBreak}},{key:"getAd",value:function(){return this._ad}},{key:"skipAd",value:function(){this._adsPluginController.skipAd()}},{key:"playAdNow",value:function(e){this._adsPluginController.playAdNow(e)}},{key:"_initMembers",value:function(){this._allAdsCompleted=!0,this._adBreaksLayout=[],this._adBreak=null,this._ad=null}},{key:"_addBindings",value:function(){var e=this;this._eventManager=new f.default,this._eventManager.listen(this._player,l.AdEventType.AD_MANIFEST_LOADED,function(t){return e._onAdManifestLoaded(t)}),this._eventManager.listen(this._player,l.AdEventType.AD_BREAK_START,function(t){return e._onAdBreakStart(t)}),this._eventManager.listen(this._player,l.AdEventType.AD_LOADED,function(t){return e._onAdLoaded(t)}),this._eventManager.listen(this._player,l.AdEventType.AD_BREAK_END,function(){return e._onAdBreakEnd()}),this._eventManager.listen(this._player,l.AdEventType.ALL_ADS_COMPLETED,function(t){return e._onAllAdsCompleted(t)}),this._eventManager.listen(this._player,l.AdEventType.AD_ERROR,function(t){return e._onAdError(t)}),this._eventManager.listen(this._player,v.CustomEventType.PLAYER_RESET,function(){return e._reset()}),this._eventManager.listen(this._player,v.Html5EventType.ENDED,function(){return e._onEnded()})}},{key:"_onAdManifestLoaded",value:function(e){this._adBreaksLayout=e.payload.adBreaksPosition,this._allAdsCompleted=!1}},{key:"_onAdBreakStart",value:function(e){this._adBreak=e.payload.adBreak}},{key:"_onAdLoaded",value:function(e){this._ad=e.payload.ad}},{key:"_onAdBreakEnd",value:function(){this._adBreak=null,this._ad=null}},{key:"_onAllAdsCompleted",value:function(e){this._allAdsCompleted=!0,this.dispatchEvent(e)}},{key:"_onAdError",value:function(e){e.payload.severity===y.default.Severity.CRITICAL&&(this._allAdsCompleted=!0)}},{key:"_onEnded",value:function(){this._allAdsCompleted||this._adBreaksLayout.includes(-1)||(this._allAdsCompleted=!0)}},{key:"_reset",value:function(){this._initMembers()}},{key:"allAdsCompleted",get:function(){return this._allAdsCompleted}}]),t}(h.default));t.AdsController=_},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this._type=t.type,this._position=t.position,this._numAds=t.numAds}return i(e,[{key:"toJSON",value:function(){return{type:this.type,position:this.position,numAds:this.numAds}}},{key:"type",get:function(){return this._type}},{key:"position",get:function(){return this._position}},{key:"numAds",get:function(){return this._numAds}}]),e}();t.AdBreak=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r){n(this,e),this._id=t,this._url=r.url,this._contentType=r.contentType,this._title=r.title,this._position=r.position,this._duration=r.duration,this._clickThroughUrl=r.clickThroughUrl,this._posterUrl=r.posterUrl,this._skipOffset=r.skipOffset,this._linear=r.linear}return i(e,[{key:"toJSON",value:function(){return{id:this.id,url:this.url,contentType:this.contentType,title:this.title,position:this.position,duration:this.duration,clickThroughUrl:this.clickThroughUrl,posterUrl:this.posterUrl,skipOffset:this.skipOffset,linear:this.linear,skippable:this.skippable}}},{key:"id",get:function(){return this._id}},{key:"contentType",get:function(){return this._contentType}},{key:"url",get:function(){return this._url}},{key:"title",get:function(){return this._title}},{key:"position",get:function(){return this._position}},{key:"duration",get:function(){return this._duration}},{key:"clickThroughUrl",get:function(){return this._clickThroughUrl}},{key:"posterUrl",get:function(){return this._posterUrl}},{key:"skipOffset",get:function(){return this._skipOffset}},{key:"linear",get:function(){return this._linear}},{key:"skippable",get:function(){return!!(this.skipOffset&&this.skipOffset>0)}}]),e}();t.Ad=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return new o.default(e||{})}Object.defineProperty(t,"__esModule",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=t.getLogger=t.MimeType=t.DrmScheme=t.CorsType=t.LogLevelType=t.AbrMode=t.StreamType=t.MediaType=t.EngineType=t.TrackType=t.StateType=t.EventType=t.AdsController=t.AdTagType=t.AdBreakType=t.AdBreak=t.Ad=t.unRegisterEngine=t.registerEngine=t.setCapabilities=t.getCapabilities=t.BaseDrmProtocol=t.State=t.Env=t.PLAYER_NAME=t.VERSION=t.EventManager=t.FakeEventTarget=t.FakeEvent=t.Error=t.Utils=t.TextStyle=t.TextTrack=t.AudioTrack=t.VideoTrack=t.Track=t.BaseMiddleware=t.BasePlugin=t.registerPlugin=t.BaseMediaSourceAdapter=t.registerMediaSourceAdapter=void 0,t.loadPlayer=i;var a=r(8),o=n(a),s=r(32),u=n(s),l=r(31),c=r(30),f=r(17),d=r(33),h=n(d),p=r(21),v=n(p),g=r(18),y=n(g),_=r(23),m=n(_),E=r(6),b=n(E),T=r(10),S=n(T),A=r(11),k=n(A),O=r(9),w=n(O),R=r(24),P=n(R),L=r(12),D=n(L),C=r(5),I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(C),M=r(1),x=n(M),N=r(2),j=n(N),F=r(7),U=n(F),B=r(4),G=n(B),H=r(19),V=r(14),K=r(25),Y=r(26),W=r(27),q=r(3),X=r(28),z=r(0),J=n(z),Q=r(29),$=r(22),Z=r(74),ee=r(38),te=r(37),re=r(34),ne=r(35),ie=r(36);t.registerMediaSourceAdapter=l.registerMediaSourceAdapter,t.BaseMediaSourceAdapter=u.default,t.registerPlugin=f.registerPlugin,t.BasePlugin=y.default,t.BaseMiddleware=v.default,t.Track=b.default,t.VideoTrack=S.default,t.AudioTrack=k.default,t.TextTrack=w.default,t.TextStyle=P.default,t.Utils=I,t.Error=x.default,t.FakeEvent=j.default,t.FakeEventTarget=U.default,t.EventManager=G.default,t.VERSION="0.44.1",t.PLAYER_NAME="@playkit-js/playkit-js",t.Env=D.default,t.State=m.default,t.BaseDrmProtocol=h.default;var ae=o.default.getCapabilities,oe=o.default.setCapabilities;t.getCapabilities=ae,t.setCapabilities=oe,t.registerEngine=c.registerEngine,t.unRegisterEngine=c.unRegisterEngine,t.Ad=ee.Ad,t.AdBreak=te.AdBreak,t.AdBreakType=re.AdBreakType,t.AdTagType=ne.AdTagType,t.AdsController=ie.AdsController,t.EventType=q.EventType,t.StateType=H.StateType,t.TrackType=V.TrackType,t.EngineType=Y.EngineType,t.MediaType=W.MediaType,t.StreamType=K.StreamType,t.AbrMode=X.AbrMode,t.LogLevelType=z.LogLevelType,t.CorsType=Q.CorsType,t.DrmScheme=$.DrmScheme,t.MimeType=Z.MimeType,t.getLogger=J.default,t.LogLevel=z.LogLevel,t.getLogLevel=z.getLogLevel,t.setLogLevel=z.setLogLevel,t.default=i},function(e,t,r){var n;!function(i,a){"use strict";var o="model",s="name",u="type",l="vendor",c="version",f="mobile",d="tablet",h={extend:function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(e,t){for(var r,n,i,a,o,s,u=0;u<t.length&&!o;){var l=t[u],c=t[u+1];for(r=n=0;r<l.length&&!o;)if(o=l[r++].exec(e))for(i=0;i<c.length;i++)s=o[++n],a=c[i],"object"==typeof a&&a.length>0?2==a.length?"function"==typeof a[1]?this[a[0]]=a[1].call(this,s):this[a[0]]=a[1]:3==a.length?"function"!=typeof a[1]||a[1].exec&&a[1].test?this[a[0]]=s?s.replace(a[1],a[2]):void 0:this[a[0]]=s?a[1].call(this,s,a[2]):void 0:4==a.length&&(this[a[0]]=s?a[3].call(this,s.replace(a[1],a[2])):void 0):this[a]=s||void 0;u+=2}},str:function(e,t){for(var r in t)if("object"==typeof t[r]&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(h.has(t[r][n],e))return"?"===r?void 0:r}else if(h.has(t[r],e))return"?"===r?void 0:r;return e}},v={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},g={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,c],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[s,c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],c],[/(edge)\/((\d+)?[\w\.]+)/i],[s,c],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],c],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],c],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i,/(ucbrowser)\/([\w\.]+)/i],[[s,"UCBrowser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],c],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,c],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[c,[s,"Facebook"]],[/(headlesschrome) ([\w\.]+)/i],[c,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],c],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,c],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],c],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],c],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],c],[/fxios\/([\w\.-]+)/i],[c,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[c,p.str,v.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",h.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",h.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",h.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[o,l,[u,d]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[l,"Apple"],[u,d]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,o,[u,d]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[o,[l,"Amazon"],[u,d]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[o,p.str,v.device.amazon.model],[l,"Amazon"],[u,f]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,l,[u,f]],[/\((ip[honed|\s\w*]+);/i],[o,[l,"Apple"],[u,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,o,[u,f]],[/\(bb10;\s(\w+)/i],[o,[l,"BlackBerry"],[u,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[o,[l,"Asus"],[u,d]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[o,"Xperia Tablet"],[u,d]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[l,"Sony"],[o,"Xperia Phone"],[u,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,o,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[o,[l,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[o,[l,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[l,p.str,v.device.sprint.vendor],[o,p.str,v.device.sprint.model],[u,f]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,o,[u,d]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[l,[o,/_/g," "],[u,f]],[/(nexus\s9)/i],[o,[l,"HTC"],[u,d]],[/(nexus\s6p)/i],[o,[l,"Huawei"],[u,f]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,o,[u,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[l,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[l,"Microsoft"],[u,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[o,[l,"Motorola"],[u,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[l,"Motorola"],[u,d]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,h.trim],[o,h.trim],[u,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[l,"Samsung"],[u,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[o,[l,"Sharp"],[u,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],o,[u,d]],[/smart-tv.+(samsung)/i],[l,[u,"smarttv"],o],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[l,"Samsung"],o,[u,f]],[/sie-(\w+)*/i],[o,[l,"Siemens"],[u,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[l,"Nokia"],o,[u,f]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[o,[l,"Acer"],[u,d]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],o,[u,d]],[/(lg) netcast\.tv/i],[l,o,[u,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[o,[l,"LG"],[u,f]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[l,"Lenovo"],[u,d]],[/linux;.+((jolla));/i],[l,o,[u,f]],[/((pebble))app\/[\d\.]+\s/i],[l,o,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,o,[u,f]],[/crkey/i],[[o,"Chromecast"],[l,"Google"]],[/android.+;\s(glass)\s\d/i],[o,[l,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)\s/i],[o,[l,"Google"],[u,d]],[/android.+;\s(pixel xl|pixel)\s/i],[o,[l,"Google"],[u,f]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[o,/_/g," "],[l,"Xiaomi"],[u,f]],[/android.+a000(1)\s+build/i],[o,[l,"OnePlus"],[u,f]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,h.lowerize],l,o]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]+).*(gecko)/i],[c,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[c,p.str,v.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[c,p.str,v.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[s,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[s,"Symbian"],c],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[s,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(sunos)\s?([\w\.]+\d)*/i],[[s,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[s,c],[/(haiku)\s(\w+)/i],[s,c],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[s,"iOS"],[c,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[s,c]]},y=function(e,t){this[s]=e,this[c]=t},_=function(e){this.architecture=e},m=function(e,t,r){this[l]=e,this[o]=t,this[u]=r},E=y,b=y,T=function(e,t){if(!(this instanceof T))return new T(e,t).getResult();var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?h.extend(g,t):g,a=new y,o=new _,s=new m,u=new E,l=new b;return this.getBrowser=function(){return p.rgx.call(a,r,n.browser),a.major=h.major(a.version),a},this.getCPU=function(){return p.rgx.call(o,r,n.cpu),o},this.getDevice=function(){return p.rgx.call(s,r,n.device),s},this.getEngine=function(){return p.rgx.call(u,r,n.engine),u},this.getOS=function(){return p.rgx.call(l,r,n.os),l},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,a=new y,o=new _,s=new m,u=new E,l=new b,this},this};T.VERSION="0.7.13",T.BROWSER={NAME:s,MAJOR:"major",VERSION:c},T.CPU={ARCHITECTURE:"architecture"},T.DEVICE={MODEL:o,VENDOR:l,TYPE:u,CONSOLE:"console",MOBILE:f,SMARTTV:"smarttv",TABLET:d,WEARABLE:"wearable",EMBEDDED:"embedded"},T.ENGINE={NAME:s,VERSION:c},T.OS={NAME:s,VERSION:c},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=T),t.UAParser=T):r(41)?void 0!==(n=function(){return T}.call(t,r,t,e))&&(e.exports=n):i.UAParser=T;var S=i.jQuery||i.Zepto;if(void 0!==S){var A=new T;S.ua=A.getResult(),S.ua.get=function(){return A.getUA()},S.ua.set=function(e){A.setUA(e);var t=A.getResult();for(var r in t)S.ua[r]=t[r]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(5),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(a),s=function(){function e(){n(this,e),this._createEl()}return i(e,[{key:"setSrc",value:function(e){e&&(this._posterUrl=e,o.Dom.setStyle(this._el,"background-image",'url("'+this._posterUrl+'")'),this.hide())}},{key:"getElement",value:function(){return this._el}},{key:"_createEl",value:function(){if(!this._el){var e=this._el=o.Dom.createElement("div");o.Dom.setAttribute(e,"id",o.Generator.uniqueId(5)),o.Dom.setAttribute(e,"tabindex","-1")}}},{key:"_removeEl",value:function(){this._el&&o.Dom.removeChild(this._el.parentNode,this._el)}},{key:"show",value:function(){o.Dom.setStyle(this._el,"display","")}},{key:"hide",value:function(){o.Dom.setStyle(this._el,"display","none")}},{key:"reset",value:function(){this._posterUrl="",o.Dom.setStyle(this._el,"background-image","")}},{key:"destroy",value:function(){this.reset(),this._removeEl()}},{key:"src",get:function(){return this._posterUrl}}]),e}();t.default=s},function(e,t,r){"use strict";function n(e,t,r){r=r||{};var n=r.timeout?r.timeout:o,i=document.createElement("script"),l=s+Math.round(Date.now()+1000001*Math.random()),c=e,f=void 0,d=function(){i&&i.parentNode&&i.parentNode.removeChild(i),window[l]=function(){},f&&clearTimeout(f)};return new Promise(function(r,o){n&&(f=setTimeout(function(){d(),o(new a.default(a.default.Severity.CRITICAL,a.default.Category.NETWORK,a.default.Code.TIMEOUT,e))},n)),window[l]=function(n){var i=t(n,e);d(),r(i)},c.match(/\?/)?c+="&"+u+l:c+="?"+u+l,i.type="text/javascript",i.src=c,document.getElementsByTagName("head")[0].appendChild(i)})}Object.defineProperty(t,"__esModule",{value:!0}),t.jsonp=void 0;var i=r(1),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=5e3,s="jsonpcallback",u="responseFormat=jsonp&callback=";t.jsonp=n},function(e,t,r){var n,i;/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(a){"use strict";var o={};o.VERSION="1.4.1";var s,u={},l=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,r=arguments,n=r[0];for(t=1;t<r.length;t++)for(e in r[t])e in n||!r[t].hasOwnProperty(e)||(n[e]=r[t][e]);return n},f=function(e,t){return{value:e,name:t}};o.DEBUG=f(1,"DEBUG"),o.INFO=f(2,"INFO"),o.TIME=f(3,"TIME"),o.WARN=f(4,"WARN"),o.ERROR=f(8,"ERROR"),o.OFF=f(99,"OFF");var d=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};d.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(o.DEBUG,arguments)},info:function(){this.invoke(o.INFO,arguments)},warn:function(){this.invoke(o.WARN,arguments)},error:function(){this.invoke(o.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"end"])},invoke:function(e,t){s&&this.enabledFor(e)&&s(t,c({level:e},this.context))}};var h=new d({filterLevel:o.OFF});!function(){var e=o;e.enabledFor=l(h,h.enabledFor),e.debug=l(h,h.debug),e.time=l(h,h.time),e.timeEnd=l(h,h.timeEnd),e.info=l(h,h.info),e.warn=l(h,h.warn),e.error=l(h,h.error),e.log=e.info}(),o.setHandler=function(e){s=e},o.setLevel=function(e){h.setLevel(e);for(var t in u)u.hasOwnProperty(t)&&u[t].setLevel(e)},o.getLevel=function(){return h.getLevel()},o.get=function(e){return u[e]||(u[e]=new d(c({name:e},h.context)))},o.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},r=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(n,i){n=Array.prototype.slice.call(n);var a,s=console.log;i.level===o.TIME?(a=(i.name?"["+i.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):r(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(i.level===o.WARN&&console.warn?s=console.warn:i.level===o.ERROR&&console.error?s=console.error:i.level===o.INFO&&console.info?s=console.info:i.level===o.DEBUG&&console.debug&&(s=console.debug),e.formatter(n,i),r(s,n))}},o.useDefaults=function(e){o.setLevel(e&&e.defaultLevel||o.DEBUG),o.setHandler(o.createDefaultHandler(e))},n=o,void 0!==(i="function"==typeof n?n.call(t,r,t,e):n)&&(e.exports=i)}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={RECOVERABLE:1,CRITICAL:2};t.Severity=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Code=void 0;var n=r(47),i={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_CREATE_TEXT_CUE:2009,DASH_ADAPTER_ERROR_PARSE_ISSUE:2010,UNKNOWN_FILE_TYPE:2011,UNKNOWN_LANGUAGE:2012,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,HLS_FATAL_MEDIA_ERROR:3018,HLS_FRAG_PARSING_ERROR:3019,HLS_BUFFER_APPEND_ISSUE:3020,HLS_BUFFER_APPENDING_ISSUE:3021,NATIVE_ADAPTER_LOAD_FAILED:3022,HLS_BUFFER_STALLED_ERROR:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_LIVE_CONTENT_NOT_SUPPORTED:4029,HLSJS_CANNOT_PARSE:4030,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,BAD_FAIRPLAY_RESPONSE:6015,COULD_NOT_CREATE_MEDIA_KEYS:6016,COULD_NOT_CREATE_KEY_SESSION:6017,LOAD_INTERRUPTED:7e3,BITRATE_SWITCH_ISSUE:7001,LOAD_FAILED:7002,RUNTIME_ERROR_NOT_REGISTERED_PLUGIN:7003,RUNTIME_ERROR_METHOD_NOT_IMPLEMENTED:7004,RUNTIME_ERROR_NOT_VALID_HANDLER:7005,NO_SOURCE_PROVIDED:7006,NO_ENGINE_FOUND_TO_PLAY_THE_SOURCE:7007,ENTER_PICTURE_IN_PICTURE_FAILED:7008,EXIT_PICTURE_IN_PICTURE_FAILED:7009,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,CONTENT_UNSUPPORTED_BY_BROWSER:9009,CANNOT_ADD_ITEM:9010,DOWNLOAD_FAILED:9011,COULD_NOT_GET_INFO_FROM_MEDIA_PROVIDER:9012,ENTRY_DOES_NOT_EXIST:9013,PAUSE_FAILED:9014,RESUME_FAILED:9015,RENEW_LICENSE_FAILED:9016,ENTRY_ALREADY_EXISTS:9017,REMOVE_FAILED:9018,CAST_LOAD_MEDIA_FAILED:10001,CAST_CUSTOM_MESSAGE_PARSING_ERROR:100002,CAST_EDIT_TRACKS_INFO_ERROR:10003,VR_NOT_SUPPORTED:11e3};Object.assign(i,n.AdErrorCode),t.Code=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={XML_PARSING_ERROR:8100,VAST_SCHEMA_VALIDATION_ERROR:8101,VAST_RESPONSE_VERSION_NOT_SUPPORTED:8102,TRAFFICKING_ERROR:8200,VAST_UNEXPECTED_LINEARITY:8201,VAST_UNEXPECTED_DURATION_ERROR:8201,VAST_UNEXPECTED_SIZE_ERROR:8203,VAST_WRAPPER_ERROR:8300,VAST_URI_ERROR:8301,VAST_TOO_MANY_REDIRECTS:8302,NO_ADS_VAST_RESPONSE:8303,GENERAL_LINEAR_ERROR:8400,FILE_NOT_FOUND:8401,VAST_MEDIA_LOAD_TIMEOUT:8402,MEDIA_FILE_NOT_FOUND:8403,MEDIA_FILE_DISPLAY_ERROR:8405,MEZZANINE_FILE_NOT_PROVIDED:8406,MEZZANINE_DOWNLOADED_FOR_THE_FIRST_TIME:8407,VAST_RESPONSE_AD_REJECTED:8408,CREATIVE_WAS_NOT_EXECUTED:8409,CODE_REFERENCED_NOT_EXECUTED:8410,GENERAL_NON_LINEAR_AD_ERROR:8500,NON_LINEAR_CREATIVE_DIMENSIONS_NOT_ALIGN_ERROR:8501,NON_LINEAR_FETCH_ERROR:8502,NON_LINEAR_RESOURCE_NOT_FOUND:8503,GENERAL_COMPANION_ADS_ERROR:8600,COMPANION_DIMENSIONS_NOT_FIT:8601,COMPANION_CANNOT_BE_DISPLAY:8602,COMPANION_CANNOT_BE_FETCHED:8603,COMPANION_TYPE_NOT_FOUND:8604,AD_UNDEFINED_ERROR:8900,GENERAL_VPAID_ERROR:8901};t.AdErrorCode=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,ADS:8,STORAGE:9,CAST:10,VR:11};t.Category=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return i(e,null,[{key:"language",get:function(){var e=void 0;return e=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage?navigator.userLanguage:navigator.language,e&&e.match("-")&&(e=e.split("-")[0]),e}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(8),u=(n(s),r(4)),l=n(u),c=r(23),f=n(c),d=r(19),h=r(3),p=r(2),v=n(p),g=r(0),y=n(g),_=function(){function e(t){var r,n,o,s,u,c,p=this;a(this,e),this._transitions=(c={},i(c,d.StateType.IDLE,(r={},i(r,h.Html5EventType.LOAD_START,function(){p._updateState(d.StateType.LOADING),p._dispatchEvent()}),i(r,h.Html5EventType.PLAY,function(){p._updateState(d.StateType.BUFFERING),p._dispatchEvent()}),i(r,h.Html5EventType.SEEKED,function(){p._updateState(d.StateType.PAUSED),p._dispatchEvent()}),r)),i(c,d.StateType.LOADING,(n={},i(n,h.Html5EventType.LOADED_METADATA,function(){p._updateState(d.StateType.PAUSED),p._dispatchEvent()}),i(n,h.Html5EventType.ERROR,function(){p._updateState(d.StateType.IDLE),p._dispatchEvent()}),n)),i(c,d.StateType.PAUSED,(o={},i(o,h.Html5EventType.PLAY,function(){p._updateState(d.StateType.PLAYING),p._dispatchEvent()}),i(o,h.Html5EventType.PLAYING,function(){p._updateState(d.StateType.PLAYING),p._dispatchEvent()}),i(o,h.Html5EventType.ENDED,function(){p._updateState(d.StateType.IDLE),p._dispatchEvent()}),o)),i(c,d.StateType.PLAYING,(s={},i(s,h.Html5EventType.PAUSE,function(){p._updateState(d.StateType.PAUSED),p._dispatchEvent()}),i(s,h.Html5EventType.WAITING,function(){p._updateState(d.StateType.BUFFERING),p._lastWaitingTime=p._player.currentTime,p._dispatchEvent()}),i(s,h.Html5EventType.ENDED,function(){p._updateState(d.StateType.IDLE),p._dispatchEvent()}),i(s,h.Html5EventType.ERROR,function(){p._updateState(d.StateType.IDLE),p._dispatchEvent()}),s)),i(c,d.StateType.BUFFERING,(u={},i(u,h.Html5EventType.PLAYING,function(){p._updateState(d.StateType.PLAYING),p._dispatchEvent()}),i(u,h.Html5EventType.PAUSE,function(){p._updateState(d.StateType.PAUSED),p._dispatchEvent()}),i(u,h.Html5EventType.SEEKED,function(){p._prevState&&p._prevState.type===d.StateType.PLAYING&&(p._updateState(d.StateType.PLAYING),p._dispatchEvent())}),i(u,h.Html5EventType.TIME_UPDATE,function(){p._player.currentTime!==p._lastWaitingTime&&p._prevState&&p._prevState.type===d.StateType.PLAYING&&(p._lastWaitingTime=null,p._updateState(d.StateType.PLAYING),p._dispatchEvent())}),u)),c),this._player=t,this._logger=(0,y.default)("StateManager"),this._eventManager=new l.default,this._history=[],this._prevState=null,this._curState=new f.default(d.StateType.IDLE),this._attachListeners()}return o(e,[{key:"_attachListeners",value:function(){this._eventManager.listen(this._player,h.Html5EventType.ERROR,this._doTransition.bind(this)),this._eventManager.listen(this._player,h.Html5EventType.ENDED,this._doTransition.bind(this)),this._eventManager.listen(this._player,h.Html5EventType.PLAY,this._doTransition.bind(this)),this._eventManager.listen(this._player,h.Html5EventType.LOAD_START,this._doTransition.bind(this)),this._eventManager.listen(this._player,h.Html5EventType.PLAYING,this._doTransition.bind(this)),this._eventManager.listen(this._player,h.Html5EventType.LOADED_METADATA,this._doTransition.bind(this)),this._eventManager.listen(this._player,h.Html5EventType.PAUSE,this._doTransition.bind(this)),this._eventManager.listen(this._player,h.Html5EventType.WAITING,this._doTransition.bind(this)),this._eventManager.listen(this._player,h.Html5EventType.SEEKED,this._doTransition.bind(this)),this._eventManager.listen(this._player,h.Html5EventType.TIME_UPDATE,this._doTransition.bind(this))}},{key:"_doTransition",value:function(e){(e.type!==h.Html5EventType.TIME_UPDATE||this._curState===d.StateType.BUFFERING&&e.type===h.Html5EventType.TIME_UPDATE)&&this._logger.debug("Do transition request",e.type);var t=this._transitions[this._curState.type];"function"==typeof t[e.type]&&t[e.type]()}},{key:"_updateState",value:function(e){this._curState.type!==e&&(this._curState.duration=Date.now()/1e3,this._history.push(this._curState),this._prevState=this._curState,this._curState=new f.default(e),this._logger.debug("Switch player state: from "+this._prevState.type+" to "+this._curState.type))}},{key:"_dispatchEvent",value:function(){var e=new v.default(h.CustomEventType.PLAYER_STATE_CHANGED,{oldState:this._prevState,newState:this._curState});this._player.dispatchEvent(e)}},{key:"destroy",value:function(){this._history=[],this._eventManager.destroy()}},{key:"reset",value:function(){this._history=[]}},{key:"currentState",get:function(){return this._curState}},{key:"previousState",get:function(){return this._prevState}},{key:"history",get:function(){return this._history}}]),e}();t.default=_},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return"string"==typeof e&&!!s[e.toLowerCase()]&&e.toLowerCase()}function a(e){return"number"==typeof e&&e>=0&&e<=100}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s={"":!0,up:!0},u=function(){function e(){n(this,e),this._width=100,this._lines=3,this._regionAnchorX=0,this._regionAnchorY=100,this._viewportAnchorX=0,this._viewportAnchorY=100,this._scroll=""}return o(e,[{key:"width",get:function(){return this._width},set:function(e){if(!a(e))throw new Error("Width must be between 0 and 100.");this._width=e}},{key:"scroll",get:function(){return this._scroll},set:function(e){var t=i(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");this._scroll=t}},{key:"viewportAnchorY",get:function(){return this._viewportAnchorY},set:function(e){if(!a(e))throw new Error("ViewportAnchorY must be between 0 and 100.");this._viewportAnchorY=e}},{key:"viewportAnchorX",get:function(){return this._viewportAnchorX},set:function(e){if(!a(e))throw new Error("ViewportAnchorX must be between 0 and 100.");this._viewportAnchorX=e}},{key:"regionAnchorX",get:function(){return this._regionAnchorX},set:function(e){if(!a(e))throw new Error("RegionAnchorY must be between 0 and 100.");this._regionAnchorX=e}},{key:"lines",get:function(){return this._lines},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");this._lines=e}},{key:"regionAnchorY",get:function(){return this._regionAnchorY},set:function(e){if(!a(e))throw new Error("RegionAnchorX must be between 0 and 100.");this._regionAnchorY=e}}]),e}(),l=void 0;"undefined"!=typeof window&&window.VTTRegion?t.Region=l=window.VTTRegion:t.Region=l=u,t.Region=l},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.LabelToTrackMap=void 0;var i,a=r(14),o=r(53),s=(i={},n(i,o.LabelOptions.AUDIO,a.TrackType.AUDIO),n(i,o.LabelOptions.CAPTIONS,a.TrackType.TEXT),n(i,o.LabelOptions.QUALITIES,a.TrackType.VIDEO),i);t.LabelToTrackMap=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={AUDIO:"audio",CAPTIONS:"captions",QUALITIES:"qualities"};t.LabelOptions=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(55),s=n(o),u=r(21),l=(n(u),function(){function e(){i(this,e),this._middleware=new s.default(e.Actions)}return a(e,[{key:"use",value:function(e){this._middleware.use(e)}},{key:"play",value:function(t){this._middleware.run(e.Actions.PLAY,t)}},{key:"pause",value:function(t){this._middleware.run(e.Actions.PAUSE,t)}}]),e}());l.Actions={PLAY:"play",PAUSE:"pause"},t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(15),s=n(o),u=r(21),l=(n(u),r(0)),c=n(l),f=function(){function e(t){i(this,e),this._actions=t,this._middlewares=new s.default,this._logger=(0,c.default)("Middleware")}return a(e,[{key:"use",value:function(e){for(var t in this._actions){var r=this._actions[t];"function"==typeof e[r]&&(this._logger.debug("Register <"+e.id+"> for action "+r),this._middlewares.push(r,e[r].bind(e)))}}},{key:"run",value:function(e,t){var r=this;this._logger.debug("Start middleware chain for action "+e);var n=this._middlewares.get(e);this._executeMiddleware(n,function(){r._logger.debug("Finish middleware chain for action "+e),t()})}},{key:"_executeMiddleware",value:function(e,t){e.reduceRight(function(e,t){return function(r){t(e)}},t)()}}]),e}();t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={logLevel:"ERROR",sources:{options:{forceRedirectExternalStreams:!1},metadata:{}},plugins:{},playback:{audioLanguage:"",textLanguage:"",useNativeTextTrack:!1,enableCEA708Captions:!1,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",volume:1,startTime:-1,playsinline:!0,preload:"none",autoplay:!1,loop:!1,allowMutedAutoPlay:!0,muted:!1,pictureInPicture:!0,options:{html5:{hls:{},dash:{}}},preferNative:{hls:!1,dash:!1},streamPriority:[{engine:"html5",format:"hls"},{engine:"html5",format:"dash"},{engine:"html5",format:"progressive"},{engine:"flash",format:"hls"}]},abr:{enabled:!0,fpsDroppedFramesInterval:5e3,fpsDroppedMonitoringThreshold:.2,capLevelOnFPSDrop:!0,capLevelToPlayerSize:!1,defaultBandwidthEstimate:5e5,restrictions:{minBitrate:0,maxBitrate:1/0}},drm:{keySystem:""}};t.DefaultConfig=n},function(e,t,r){var n=r(58);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0,r(60)(n,i),n.locals&&(e.exports=n.locals)},function(e,t,r){t=e.exports=r(59)(void 0),t.push([e.i,".playkit-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  color: #fff;\n  outline: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.playkit-engine {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  object-fit: contain;\n}\n\n.playkit-engine video::-webkit-media-controls-panel,\n.playkit-engine video::-webkit-media-controls-panel-container,\n.playkit-engine video::-webkit-media-controls-start-playback-button,\n.playkit-engine video::-webkit-media-controls-play-button {\n  display: none;\n  -webkit-appearance: none;\n}\n\n.playkit-poster {\n  position: absolute;\n  display: block;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-size: contain;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-color: #000;\n}\n\n.playkit-subtitles {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n}\n\n.playkit-black-cover {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: black;\n}\n",""])},function(e,t){function r(e,t){var r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"==typeof btoa){var a=n(i);return[r].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([a]).join("\n")}return[r].join("\n")}function n(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=r(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(n[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&n[o[0]]||(r&&!o[2]?o[2]=r:r&&(o[2]="("+o[2]+") and ("+r+")"),t.push(o))}},t}},function(e,t,r){function n(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=p[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(c(n.parts[a],t))}else{for(var o=[],a=0;a<n.parts.length;a++)o.push(c(n.parts[a],t));p[n.id]={id:n.id,refs:1,parts:o}}}}function i(e,t){for(var r=[],n={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],s=a[1],u=a[2],l=a[3],c={css:s,media:u,sourceMap:l};n[o]?n[o].parts.push(c):r.push(n[o]={id:o,parts:[c]})}return r}function a(e,t){var r=g(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=m[m.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),m.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function o(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=m.indexOf(e);t>=0&&m.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),a(e,t),t}function u(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),a(e,t),t}function l(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function c(e,t){var r,n,i,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var l=_++;r=y||(y=s(t)),n=f.bind(null,r,l,!1),i=f.bind(null,r,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=u(t),n=h.bind(null,r,t),i=function(){o(r),r.href&&URL.revokeObjectURL(r.href)}):(r=s(t),n=d.bind(null,r),i=function(){o(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}function f(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function d(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function h(e,t,r){var n=r.css,i=r.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(n=E(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var p={},v=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),g=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e.call(this,r)),t[r]}}(function(e){return document.querySelector(e)}),y=null,_=0,m=[],E=r(61);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=v()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=i(e,t);return n(r,t),function(e){for(var a=[],o=0;o<r.length;o++){var s=r[o],u=p[s.id];u.refs--,a.push(u)}e&&n(i(e,t),t);for(var o=0;o<a.length;o++){var u=a[o];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete p[u.id]}}}};var b=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var a;return a=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")"})}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(7),c=n(l),f=r(2),d=n(f),h=r(4),p=n(h),v=r(3),g=r(31),y=n(g),_=r(10),m=(n(_),r(11)),E=(n(m),r(9),r(13)),b=r(5),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(b),S=r(69),A=n(S),k=r(1),O=n(k),w=r(0),R=n(w),P=r(71),L=function(e){function t(e,r,n){a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i._eventManager=new p.default,i._canLoadMediaSourceAdapterPromise=Promise.resolve(),i._createVideoElement(n),i._init(e,r),i}return s(t,e),u(t,null,[{key:"isSupported",value:function(){try{var e=T.Dom.createElement("video");return e.volume=.5,!!e.canPlayType}catch(e){return!1}}},{key:"createEngine",value:function(e,t,r){return new this(e,t,r)}},{key:"canPlaySource",value:function(e,t,r){return y.default.canPlaySource(e,t,r)}},{key:"runCapabilities",value:function(){t._capabilities.forEach(function(e){return e.runCapability()})}},{key:"getCapabilities",value:function(){var e=[];return t._capabilities.forEach(function(t){return e.push(t.getCapability())}),Promise.all(e).then(function(e){var r={};return e.forEach(function(e){return Object.assign(r,e)}),i({},t.id,r)})}},{key:"prepareVideoElement",value:function(e){if(!t.videoElementStore[e]){t._logger.debug("Create the video element for playing "+e);var r=T.Dom.createElement("video");t.videoElementStore[e]=r}t._logger.debug("Prepare the video element for playing "+e),t.videoElementStore[e].load()}}]),u(t,[{key:"restore",value:function(e,t){this.reset(),this._init(e,t)}},{key:"reset",value:function(){this.detach(),this._eventManager.removeAll(),this._mediaSourceAdapter&&(this._canLoadMediaSourceAdapterPromise=this._mediaSourceAdapter.destroy(),this._mediaSourceAdapter=null),this._el&&this._el.src&&(T.Dom.setAttribute(this._el,"src",""),T.Dom.removeAttribute(this._el,"src"))}},{key:"destroy",value:function(){this.detach(),this._droppedFramesWatcher.destroy(),this._el&&(this.pause(),T.Dom.removeAttribute(this._el,"src"),T.Dom.removeChild(this._el.parentNode,this._el)),this._eventManager.destroy(),y.default.destroy(),this._mediaSourceAdapter&&(this._mediaSourceAdapter.destroy(),this._mediaSourceAdapter=null)}},{key:"attach",value:function(){var e=this;Object.keys(v.Html5EventType).forEach(function(t){e._eventManager.listen(e._el,v.Html5EventType[t],function(){v.Html5EventType[t]===v.Html5EventType.ERROR?e._handleVideoError():e.dispatchEvent(new d.default(v.Html5EventType[t]))})}),this._mediaSourceAdapter&&(this._eventManager.listen(this._mediaSourceAdapter,v.CustomEventType.VIDEO_TRACK_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,v.CustomEventType.AUDIO_TRACK_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,v.CustomEventType.TEXT_TRACK_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,v.CustomEventType.ABR_MODE_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,v.CustomEventType.TEXT_CUE_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,v.CustomEventType.TRACKS_CHANGED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,v.Html5EventType.ERROR,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,v.Html5EventType.TIME_UPDATE,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,v.Html5EventType.PLAYING,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,v.Html5EventType.WAITING,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._mediaSourceAdapter,v.CustomEventType.MEDIA_RECOVERED,function(t){return e.dispatchEvent(t)}),this._eventManager.listen(this._droppedFramesWatcher,v.CustomEventType.FPS_DROP,function(t){return e.dispatchEvent(t)}))}},{key:"detach",value:function(){var e=this;Object.keys(v.Html5EventType).forEach(function(t){e._eventManager.unlisten(e._el,v.Html5EventType[t])}),this._mediaSourceAdapter&&(this._eventManager.unlisten(this._mediaSourceAdapter,v.CustomEventType.VIDEO_TRACK_CHANGED),this._eventManager.unlisten(this._mediaSourceAdapter,v.CustomEventType.AUDIO_TRACK_CHANGED),this._eventManager.unlisten(this._mediaSourceAdapter,v.CustomEventType.TEXT_TRACK_CHANGED),this._eventManager.unlisten(this._mediaSourceAdapter,v.CustomEventType.TEXT_CUE_CHANGED))}},{key:"getVideoElement",value:function(){return this._el}},{key:"selectVideoTrack",value:function(e){this._mediaSourceAdapter&&this._mediaSourceAdapter.selectVideoTrack(e)}},{key:"selectAudioTrack",value:function(e){this._mediaSourceAdapter&&this._mediaSourceAdapter.selectAudioTrack(e)}},{key:"selectTextTrack",value:function(e){this._removeCueChangeListeners(),this._mediaSourceAdapter&&this._mediaSourceAdapter.selectTextTrack(e),this._addCueChangeListener()}},{key:"hideTextTrack",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.hideTextTrack(),this._removeCueChangeListeners()}},{key:"enableAdaptiveBitrate",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.enableAdaptiveBitrate()}},{key:"isAdaptiveBitrateEnabled",value:function(){return!!this._mediaSourceAdapter&&this._mediaSourceAdapter.isAdaptiveBitrateEnabled()}},{key:"seekToLiveEdge",value:function(){this._mediaSourceAdapter&&this._mediaSourceAdapter.seekToLiveEdge()}},{key:"getStartTimeOfDvrWindow",value:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.getStartTimeOfDvrWindow():0}},{key:"isLive",value:function(){return!!this._mediaSourceAdapter&&this._mediaSourceAdapter.isLive()}},{key:"play",value:function(){var e=this,t=this._el.play();t&&t.catch(function(){return e.dispatchEvent(new d.default(v.CustomEventType.AUTOPLAY_FAILED))})}},{key:"pause",value:function(){return this._el.pause()}},{key:"load",value:function(e){var t=this;return this._el.load(),this._canLoadMediaSourceAdapterPromise.then(function(){return t._mediaSourceAdapter?t._mediaSourceAdapter.load(e).catch(function(e){return Promise.reject(e)}):Promise.resolve({})}).catch(function(e){return Promise.reject(e)})}},{key:"ready",value:function(){}},{key:"_init",value:function(e,t){this._config=t,this._loadMediaSourceAdapter(e),this.attach()}},{key:"_createVideoElement",value:function(e){this._el=t.videoElementStore[e]||T.Dom.createElement("video"),this._el.id=T.Generator.uniqueId(5),this._el.controls=!1}},{key:"_loadMediaSourceAdapter",value:function(e){this._mediaSourceAdapter=y.default.getMediaSourceAdapter(this.getVideoElement(),e,this._config),this._mediaSourceAdapter&&(this._droppedFramesWatcher=new P.DroppedFramesWatcher(this._mediaSourceAdapter,this._config.abr,this._el))}},{key:"_addCueChangeListener",value:function(){var e=this,t=Array.from(this._el.textTracks).find(function(e){return e&&"disabled"!==e.mode});t&&this._eventManager.listen(t,"cuechange",function(t){return e._onCueChange(t)})}},{key:"_removeCueChangeListeners",value:function(){for(var e=0;e<this._el.textTracks.length;e++)this._eventManager.unlisten(this._el.textTracks[e],"cuechange")}},{key:"_onCueChange",value:function(e){var t=e.currentTarget,r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t.activeCues[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;if(window.VTTCue&&u instanceof window.VTTCue)r.push(u);else if(window.TextTrackCue&&u instanceof window.TextTrackCue)try{r.push(new E.Cue(u.startTime,u.endTime,u.text))}catch(e){new O.default(O.default.Severity.RECOVERABLE,O.default.Category.TEXT,O.default.Code.UNABLE_TO_CREATE_TEXT_CUE,e)}}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}this.dispatchEvent(new d.default(v.CustomEventType.TEXT_CUE_CHANGED,{cues:r}))}},{key:"_handleVideoError",value:function(){if(this._el.error){var e=this._el.error.code;if(1!==e){var t=this._getMsExtendedError(),r=this._el.error.message;if(this._mediaSourceAdapter&&!this._mediaSourceAdapter.handleMediaError(this._el.error)){var n=new O.default(O.default.Severity.CRITICAL,O.default.Category.MEDIA,O.default.Code.VIDEO_ERROR,{code:e,extended:t,message:r});this.dispatchEvent(new d.default(v.Html5EventType.ERROR,n))}}}}},{key:"_getMsExtendedError",value:function(){var e=this._el.error.msExtendedCode;return e&&(e<0&&(e+=Math.pow(2,32)),e=e.toString(16)),e}},{key:"enterPictureInPicture",value:function(){var e=this;try{document.pictureInPictureEnabled&&"function"==typeof this._el.requestPictureInPicture?this._el.requestPictureInPicture().catch(function(t){e.dispatchEvent(new d.default(v.Html5EventType.ERROR,new O.default(O.default.Severity.RECOVERABLE,O.default.Category.PLAYER,O.default.Code.ENTER_PICTURE_IN_PICTURE_FAILED,t)))}):"function"==typeof this._el.webkitSetPresentationMode&&(this._el.webkitSetPresentationMode("picture-in-picture"),setTimeout(function(){return e.dispatchEvent(new d.default(v.Html5EventType.ENTER_PICTURE_IN_PICTURE))},0))}catch(e){this.dispatchEvent(new d.default(v.Html5EventType.ERROR,new O.default(O.default.Severity.RECOVERABLE,O.default.Category.PLAYER,O.default.Code.ENTER_PICTURE_IN_PICTURE_FAILED,e)))}}},{key:"exitPictureInPicture",value:function(){var e=this;try{document.pictureInPictureEnabled&&"function"==typeof document.exitPictureInPicture?document.exitPictureInPicture().catch(function(t){e.dispatchEvent(new d.default(v.Html5EventType.ERROR,new O.default(O.default.Severity.RECOVERABLE,O.default.Category.PLAYER,O.default.Code.EXIT_PICTURE_IN_PICTURE_FAILED,t)))}):"function"==typeof this._el.webkitSetPresentationMode&&(this._el.webkitSetPresentationMode("inline"),setTimeout(function(){return e.dispatchEvent(new d.default(v.Html5EventType.LEAVE_PICTURE_IN_PICTURE))},0))}catch(e){this.dispatchEvent(new d.default(v.Html5EventType.ERROR,new O.default(O.default.Severity.RECOVERABLE,O.default.Category.PLAYER,O.default.Code.EXIT_PICTURE_IN_PICTURE_FAILED,e)))}}},{key:"isPictureInPictureSupported",value:function(){return!!document.pictureInPictureEnabled||"function"==typeof this._el.webkitSupportsPresentationMode&&this._el.webkitSupportsPresentationMode("picture-in-picture")}},{key:"id",get:function(){return t.id}},{key:"src",set:function(e){this._el.src=e},get:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.src:""}},{key:"currentTime",get:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.currentTime:0},set:function(e){this._mediaSourceAdapter&&(this._mediaSourceAdapter.currentTime=e)}},{key:"duration",get:function(){return this._mediaSourceAdapter?this._mediaSourceAdapter.duration:NaN}},{key:"volume",set:function(e){this._el.volume=e},get:function(){return this._el.volume}},{key:"paused",get:function(){return this._el.paused}},{key:"seeking",get:function(){return this._el.seeking}},{key:"seekable",get:function(){return this._el.seekable}},{key:"played",get:function(){return this._el.played}},{key:"buffered",get:function(){return this._el.buffered}},{key:"muted",set:function(e){this._el.muted=e},get:function(){return this._el.muted}},{key:"defaultMuted",get:function(){return this._el.defaultMuted}},{key:"poster",set:function(e){this._el.poster=e},get:function(){return this._el.poster}},{key:"preload",set:function(e){this._el.preload=e},get:function(){return this._el.preload}},{key:"autoplay",set:function(e){this._el.autoplay=e},get:function(){return this._el.autoplay}},{key:"loop",set:function(e){this._el.loop=e},get:function(){return this._el.loop}},{key:"controls",set:function(e){this._el.controls=e},get:function(){return this._el.controls}},{key:"playbackRate",set:function(e){this._el.playbackRate=e},get:function(){return this._el.playbackRate}},{key:"defaultPlaybackRate",set:function(e){this._el.defaultPlaybackRate=e},get:function(){return this._el.defaultPlaybackRate}},{key:"ended",get:function(){return this._el.ended}},{key:"error",get:function(){return this._el.error}},{key:"networkState",get:function(){return this._el.networkState}},{key:"readyState",get:function(){return this._el.readyState}},{key:"videoHeight",get:function(){return this._el.videoHeight}},{key:"videoWidth",get:function(){return this._el.videoWidth}},{key:"playsinline",set:function(e){e?this._el.setAttribute("playsinline",""):this._el.removeAttribute("playsinline")},get:function(){return""===this._el.getAttribute("playsinline")}},{key:"crossOrigin",set:function(e){"string"==typeof e?this._el.setAttribute("crossorigin",e):this._el.removeAttribute("crossorigin")},get:function(){return this._el.getAttribute("crossorigin")}},{key:"playbackRates",get:function(){return t.PLAYBACK_RATES}},{key:"isInPictureInPicture",get:function(){return!!document.pictureInPictureElement&&null!=document.pictureInPictureElement&&this._el===document.pictureInPictureElement||!!this._el.webkitPresentationMode&&"picture-in-picture"===this._el.webkitPresentationMode}}]),t}(c.default);L._logger=(0,R.default)("Html5"),L._capabilities=[A.default],L.id="html5",L.videoElementStore={},L.PLAYBACK_RATES=[.5,1,2,4],t.default=L},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(4),c=n(l),f=r(3),d=r(6),h=(n(d),r(10)),p=n(h),v=r(11),g=n(v),y=r(9),_=r(32),m=n(_),E=r(64),b=r(5),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(b),S=r(65),A=n(S),k=r(12),O=n(k),w=r(1),R=n(w),P=r(67),L=n(P),D=r(68),C=function(e){function t(e,r,n){i(this,t),t._logger.debug("Creating adapter");var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n));return o._lastTimeUpdate=0,o._waitingEventTriggered=!1,o._eventManager=new c.default,o._config=T.Object.mergeDeep({},L.default,o._config),o._progressiveSources=n.progressiveSources,o._liveEdge=0,o}return o(t,e),u(t,null,[{key:"canPlayType",value:function(e){var r=!1;return"string"==typeof e&&(r=!!t.TEST_VIDEO.canPlayType(e.toLowerCase())),t._logger.debug("canPlayType result for mimeType:"+e+" is "+r.toString()),r}},{key:"canPlayDrm",value:function(e,r){var n=!1,i=!0,a=!1,o=void 0;try{for(var s,u=t._drmProtocols[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;if(l.isConfigured(e,r)){t._drmProtocol=l,n=!0;break}}}catch(e){a=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}if(!n){var c=!0,f=!1,d=void 0;try{for(var h,p=t._drmProtocols[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var v=h.value;if(v.canPlayDrm(e)){t._drmProtocol=v,n=!0;break}}}catch(e){f=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(f)throw d}}}return t._logger.debug("canPlayDrm result is "+n.toString(),e),n}},{key:"createAdapter",value:function(e,t,r){var n={displayTextTrack:!1,progressiveSources:[]};return T.Object.hasPropertyPath(r,"playback.useNativeTextTrack")&&(n.displayTextTrack=T.Object.getPropertyPath(r,"playback.useNativeTextTrack")),T.Object.hasPropertyPath(r,"sources.progressive")&&(n.progressiveSources=T.Object.getPropertyPath(r,"sources.progressive")),r.playback&&(n.enableCEA708Captions=r.playback.enableCEA708Captions,n.captionsTextTrack1Label=r.playback.captionsTextTrack1Label,n.captionsTextTrack1LanguageCode=r.playback.captionsTextTrack1LanguageCode,n.captionsTextTrack2Label=r.playback.captionsTextTrack2Label,n.captionsTextTrack2LanguageCode=r.playback.captionsTextTrack2LanguageCode),new this(e,t,n)}}]),u(t,[{key:"_dispatchErrorCallback",value:function(e){this._trigger(f.Html5EventType.ERROR,e)}},{key:"_maybeSetDrmPlayback",value:function(){var e=this;if(t._drmProtocol&&this._sourceObj&&this._sourceObj.drmData){var r={licenseUrl:"",certificate:""};t._drmProtocol.setDrmPlayback(r,this._sourceObj.drmData),this._drmHandler=new D.FairplayDrmHandler(this._videoElement,r,function(t){return e._dispatchErrorCallback(t)})}}},{key:"_setProgressiveSource",value:function(){var e=(0,E.getSuitableSourceForResolution)(this._progressiveSources,this._videoElement.offsetWidth,this._videoElement.offsetHeight);e&&(this._sourceObj=e)}},{key:"_isProgressivePlayback",value:function(){return!!this._sourceObj&&"video/mp4"===this._sourceObj.mimetype}},{key:"load",value:function(e){var t=this;return this._maybeSetDrmPlayback(),this._loadPromise||(this._loadPromise=new Promise(function(r,n){t._lastTimeUpdate=e||0,t._loadPromiseReject=n,t._eventManager.listenOnce(t._videoElement,f.Html5EventType.LOADED_DATA,function(){return t._onLoadedData(r,e)}),t._eventManager.listen(t._videoElement,f.Html5EventType.TIME_UPDATE,function(){return t._onTimeUpdate()}),t._eventManager.listen(t._videoElement,f.Html5EventType.PLAY,function(){return t._resetHeartbeatTimeout()}),t._eventManager.listen(t._videoElement,f.Html5EventType.PAUSE,function(){return t._clearHeartbeatTimeout()}),t._eventManager.listen(t._videoElement,f.Html5EventType.ENDED,function(){return t._clearHeartbeatTimeout()}),t._eventManager.listen(t._videoElement,f.Html5EventType.ABORT,function(){return t._clearHeartbeatTimeout()}),t._eventManager.listen(t._videoElement,f.Html5EventType.SEEKED,function(){return t._onSeeked()}),t._isProgressivePlayback()&&t._setProgressiveSource(),t._sourceObj&&t._sourceObj.url&&(t._videoElement.src=t._sourceObj.url,t._trigger(f.CustomEventType.ABR_MODE_CHANGED,{mode:t._isProgressivePlayback()?"manual":"auto"})),t._videoElement.load()})),this._loadPromise}},{key:"handleMediaError",value:function(e){return!!this._loadPromiseReject&&(this._loadPromiseReject(new R.default(R.default.Severity.CRITICAL,R.default.Category.MEDIA,R.default.Code.NATIVE_ADAPTER_LOAD_FAILED,e)),!0)}},{key:"_onLoadedData",value:function(e,r){var n=this,i=function(){n._playerTracks=n._getParsedTracks(),n._addNativeAudioTrackChangeListener(),n._addNativeTextTrackChangeListener(),n._addNativeTextTrackAddedListener(),t._logger.debug("The source has been loaded successfully"),n._loadPromiseReject=null,e({tracks:n._playerTracks}),n.isLive()&&n._handleLiveDurationChange()};r&&r>-1&&(this._videoElement.currentTime=r),this._videoElement.textTracks.length>0?i():this._eventManager.listenOnce(this._videoElement,f.Html5EventType.CAN_PLAY,i.bind(this))}},{key:"_onTimeUpdate",value:function(){this._videoElement.currentTime>this._lastTimeUpdate?(this._waitingEventTriggered&&(this._waitingEventTriggered=!1,this._trigger(f.Html5EventType.PLAYING)),this._resetHeartbeatTimeout()):this._videoElement.paused||(this._waitingEventTriggered=!0,this._trigger(f.Html5EventType.WAITING))}},{key:"_onSeeked",value:function(){this._lastTimeUpdate=this._videoElement.currentTime}},{key:"_resetHeartbeatTimeout",value:function(){var e=this;this._lastTimeUpdate=this._videoElement.currentTime,this._clearHeartbeatTimeout();var t=function(){e._clearHeartbeatTimeout(),e._trigger(f.Html5EventType.ERROR,new R.default(R.default.Severity.CRITICAL,R.default.Category.NETWORK,R.default.Code.TIMEOUT,"The player exceeded max buffer time of "+e._config.heartbeatTimeout+" ms. No progress has been done during this time."))};this._heartbeatTimeoutId=setTimeout(t,this._config.heartbeatTimeout)}},{key:"_clearHeartbeatTimeout",value:function(){this._heartbeatTimeoutId&&(clearTimeout(this._heartbeatTimeoutId),this._heartbeatTimeoutId=null)}},{key:"destroy",value:function(){var e=this;return t._logger.debug("destroy"),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this).then(function(){e._eventManager.destroy(),e._drmHandler&&e._drmHandler.destroy(),e._waitingEventTriggered=!1,e._progressiveSources=[],e._loadPromise=null,e._loadPromiseReject=null,e._liveEdge=0,e._lastTimeUpdate=0,e._clearHeartbeatTimeout(),e._liveDurationChangeInterval&&(clearInterval(e._liveDurationChangeInterval),e._liveDurationChangeInterval=null)})}},{key:"_getParsedTracks",value:function(){var e=this._getParsedVideoTracks(),t=this._getParsedAudioTracks(),r=this._getParsedTextTracks();return e.concat(t).concat(r)}},{key:"_getParsedVideoTracks",value:function(){return this._isProgressivePlayback()?this._getParsedProgressiveVideoTracks():this._getParsedAdaptiveVideoTracks()}},{key:"_getParsedProgressiveVideoTracks",value:function(){var e=this._progressiveSources,t=[];if(e)for(var r=0;r<e.length;r++){var n={id:e[r].id,bandwidth:e[r].bandwidth,width:e[r].width,height:e[r].height,active:!!this._sourceObj&&e[r].id===this._sourceObj.id,index:r};t.push(new p.default(n))}return t}},{key:"_getParsedAdaptiveVideoTracks",value:function(){var e=this._videoElement.videoTracks,t=[];if(e)for(var r=0;r<e.length;r++){var n={id:e[r].id,active:e[r].selected,label:e[r].label,language:e[r].language,index:r};t.push(new p.default(n))}return t}},{key:"_getParsedAudioTracks",value:function(){var e=this._videoElement.audioTracks,t=[];if(e)for(var r=0;r<e.length;r++){var n={id:e[r].id,active:e[r].enabled,label:e[r].label,language:e[r].language,index:r};t.push(new g.default(n))}return t}},{key:"_getParsedTextTracks",value:function(){var e=[this._config.captionsTextTrack1Label,this._config.captionsTextTrack2Label],t=[this._config.captionsTextTrack1LanguageCode,this._config.captionsTextTrack2LanguageCode],r=this._videoElement.textTracks,n=[];if(r)for(var i=0;i<r.length;i++){var a={kind:r[i].kind,active:"showing"===r[i].mode,label:r[i].label,language:r[i].language,index:i};"subtitles"===a.kind?n.push(new y.TextTrack(a)):"captions"===a.kind&&this._config.enableCEA708Captions&&(a.label=a.label||e.shift(),a.language=a.language||t.shift(),n.push(new y.TextTrack(a)))}return n}},{key:"selectVideoTrack",value:function(e){this._isProgressivePlayback()?this._selectProgressiveVideoTrack(e):this.selectAdaptiveVideoTrack(e)}},{key:"_selectProgressiveVideoTrack",value:function(e){var t=this,r=this._progressiveSources;if(e instanceof p.default&&r&&r[e.index]){var n=this._videoElement.currentTime,i=this._videoElement.paused;this._sourceObj=r[e.index],this._eventManager.listenOnce(this._videoElement,f.Html5EventType.LOADED_DATA,function(){"Android Browser"===O.default.browser.name?(t._eventManager.listenOnce(t._videoElement,f.Html5EventType.DURATION_CHANGE,function(){t._videoElement.currentTime=n}),t._eventManager.listenOnce(t._videoElement,f.Html5EventType.SEEKED,function(){t._onTrackChanged(e),i&&t._videoElement.pause()}),t._videoElement.play()):(t._eventManager.listenOnce(t._videoElement,f.Html5EventType.SEEKED,function(){t._onTrackChanged(e)}),t._videoElement.currentTime=n,i||t._videoElement.play())}),this._videoElement.src=this._sourceObj?this._sourceObj.url:""}}},{key:"selectAdaptiveVideoTrack",value:function(e){var t=this._videoElement.videoTracks;e instanceof p.default&&t&&t[e.index]&&(this._disableVideoTracks(),t[e.index].selected=!0,this._onTrackChanged(e))}},{key:"selectAudioTrack",value:function(e){var t=this._videoElement.audioTracks;e instanceof g.default&&t&&t[e.index]&&(this._removeNativeAudioTrackChangeListener(),this._disableAudioTracks(),t[e.index].enabled=!0,this._onTrackChanged(e),this._addNativeAudioTrackChangeListener())}},{key:"_removeNativeAudioTrackChangeListener",value:function(){this._videoElement.audioTracks&&this._eventManager.unlisten(this._videoElement.audioTracks,"change")}},{key:"_addNativeAudioTrackChangeListener",value:function(){var e=this;this._videoElement.audioTracks&&this._eventManager.listen(this._videoElement.audioTracks,"change",function(){return e._onNativeAudioTrackChange()})}},{key:"_onNativeAudioTrackChange",value:function(){var e=this,r=this._playerTracks.filter(function(e){return e instanceof g.default});t._logger.debug("Video element audio track change");var n=function(){for(var t=0;t<e._videoElement.audioTracks.length;t++)if(e._videoElement.audioTracks[t].enabled)return t;return-1}(),i=function(){var e=r.find(function(e){return!0===e.active});return e?e.index:-1}();if(n!==i){var a=r.find(function(e){return e.index===n});a&&(t._logger.debug("Native selection of track, update the player audio track ("+i+" -> "+n+")"),this._onTrackChanged(a))}}},{key:"selectTextTrack",value:function(e){var r=this._videoElement.textTracks;if(e instanceof y.TextTrack&&("subtitles"===e.kind||"captions"===e.kind)&&r){this._removeNativeTextTrackChangeListener();var n=Array.from(r).find(function(t,r){return e.index===r&&t&&("subtitles"===t.kind||"captions"===t.kind)});n&&(this._disableTextTracks(),n.mode=this._getDisplayTextTrackModeString(),t._logger.debug("Text track changed",n),this._onTrackChanged(e),this._addNativeTextTrackChangeListener())}}},{key:"_removeNativeTextTrackChangeListener",value:function(){this._videoElement.textTracks&&this._eventManager.unlisten(this._videoElement.textTracks,"change")}},{key:"_addNativeTextTrackChangeListener",value:function(){var e=this;this._videoElement.textTracks&&this._eventManager.listen(this._videoElement.textTracks,"change",function(){return e._onNativeTextTrackChange()})}},{key:"_onNativeTextTrackChange",value:function(){var e=this,r=this._playerTracks.filter(function(e){return e instanceof y.TextTrack}),n=r.find(function(e){return"off"===e.language});t._logger.debug("Video element text track change");var i=function(){for(var t=0;t<e._videoElement.textTracks.length;t++){var r=e._videoElement.textTracks[t];if(e._getDisplayTextTrackModeString()===r.mode)return t}return-1}(),a=function(){var e=r.find(function(e){return!0===e.active});return e?e.index:-1}();if(i!==a)if(-1==i)n&&(t._logger.debug("Native selection of track, update the player text track ("+a+" -> off)"),this._onTrackChanged(n));else{var o=r.find(function(e){return e.index===i});o&&(t._logger.debug("Native selection of track, update the player text track ("+a+" -> "+i+")"),this._onTrackChanged(o))}}},{key:"_getDisplayTextTrackModeString",value:function(){return this._config.displayTextTrack?"showing":"hidden"}},{key:"_addNativeTextTrackAddedListener",value:function(){var e=this;!this._config.displayTextTrack&&this._videoElement.textTracks&&this._eventManager.listen(this._videoElement.textTracks,"addtrack",function(){return e._onNativeTextTrackAdded()})}},{key:"_onNativeTextTrackAdded",value:function(){this._playerTracks=this._getParsedTracks(),this._trigger(f.CustomEventType.TRACKS_CHANGED,{tracks:this._playerTracks})}},{key:"hideTextTrack",value:function(){this._disableTextTracks()}},{key:"enableAdaptiveBitrate",value:function(){t._logger.warn("Enabling adaptive bitrate is not supported for native playback")}},{key:"isAdaptiveBitrateEnabled",value:function(){return!this._isProgressivePlayback()}},{key:"_disableVideoTracks",value:function(){var e=this._videoElement.videoTracks;if(e)for(var t=0;t<e.length;t++)e[t].selected=!1}},{key:"_disableAudioTracks",value:function(){var e=this._videoElement.audioTracks;if(e)for(var t=0;t<e.length;t++)e[t].enabled=!1}},{key:"_disableTextTracks",value:function(){var e=this._videoElement.textTracks;if(e)for(var t=0;t<e.length;t++)e[t].mode="disabled"}},{key:"_getLiveEdge",value:function(){return this._videoElement.seekable.length?this._videoElement.seekable.end(this._videoElement.seekable.length-1):this._videoElement.buffered.length?this._videoElement.buffered.end(this._videoElement.buffered.length-1):this._videoElement.duration}},{key:"seekToLiveEdge",value:function(){try{this._videoElement.currentTime=this._getLiveEdge()}catch(e){return}}},{key:"isLive",value:function(){return this._videoElement.duration===1/0}},{key:"_handleLiveDurationChange",value:function(){var e=this;this._liveDurationChangeInterval=setInterval(function(){var t=e._getLiveEdge();e._liveEdge!==t&&(e._liveEdge=t,e._videoElement.dispatchEvent(new window.Event(f.Html5EventType.DURATION_CHANGE)))},2e3)}},{key:"getStartTimeOfDvrWindow",value:function(){return this.isLive()&&this._videoElement.seekable.length?this._videoElement.seekable.start(0):0}}]),t}(m.default);C.id="NativeAdapter",C._logger=m.default.getLogger(C.id),C.TEST_VIDEO=T.Dom.createElement("video"),C._drmProtocols=[A.default],C._drmProtocol=null,t.default=C},function(e,t,r){"use strict";function n(e,t,r){var n=null;if(r&&e){var i=[],a=1/0,o=!0,s=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value,d=Math.abs(f.width-t);d<a?(a=d,i=[f]):d===a&&i.push(f)}}catch(e){s=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}var h=t/r,p=i,v=1/0,g=!0,y=!1,_=void 0;try{for(var m,E=i[Symbol.iterator]();!(g=(m=E.next()).done);g=!0){var b=m.value;if(b.height){var T=Math.abs(b.width/b.height-h);T<v?(v=T,p=[b]):T===v&&p.push(b)}}}catch(e){y=!0,_=e}finally{try{!g&&E.return&&E.return()}finally{if(y)throw _}}var S=0,A=!0,k=!1,O=void 0;try{for(var w,R=p[Symbol.iterator]();!(A=(w=R.next()).done);A=!0){var P=w.value;(P.bandwidth>S||!P.bandwidth)&&(S=P.bandwidth||S,n=P)}}catch(e){k=!0,O=e}finally{try{!A&&R.return&&R.return()}finally{if(k)throw O}}}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.getSuitableSourceForResolution=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(33),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),o(t,null,[{key:"isConfigured",value:function(e,t){return u.default.DrmScheme.FAIRPLAY===t.keySystem&&!!e.find(function(e){return e.scheme===t.keySystem})}},{key:"canPlayDrm",value:function(e){return t._logger.debug("Can play DRM scheme of: "+u.default.DrmScheme.FAIRPLAY),u.default.DrmSupport.isProtocolSupported(u.default.DrmScheme.FAIRPLAY,e)}},{key:"setDrmPlayback",value:function(e,r){t._logger.debug("Sets drm playback");var n=r.find(function(e){return e.scheme===u.default.DrmScheme.FAIRPLAY});n&&(e.licenseUrl=n.licenseUrl,e.certificate=n.certificate)}}]),t}(u.default);l._logger=u.default.getLogger("FairPlay"),l._KeySystem="com.apple.fps.1_0",l._WebkitEvents={NEED_KEY:"webkitneedkey",KEY_MESSAGE:"webkitkeymessage",KEY_ADDED:"webkitkeyadded",KEY_ERROR:"webkitkeyerror"},t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(12),s=n(o),u=r(0),l=n(u),c=r(22),f="not_supported_drm_playback",d=function(){function e(){i(this,e)}return a(e,null,[{key:"isProtocolSupported",value:function(t,r){var n=s.default.browser.name;if("function"==typeof e._Browsers[n]){var i=e._Browsers[n]();return e._logger.debug("Supported DRM scheme for current environment is: "+i),i===t&&!!r.find(function(e){return e.scheme===t})}return!1}}]),e}();d._logger=(0,l.default)("DrmSupport"),d._Browsers={Safari:function(){var e=s.default.device.type,t=s.default.os.name;return e||"Mac OS"!==t?f:c.DrmScheme.FAIRPLAY},Chrome:function(){var e=s.default.device.type,t=s.default.os.name;return e&&"Android"!==t?f:c.DrmScheme.WIDEVINE},Firefox:function(){return s.default.device.type?f:c.DrmScheme.WIDEVINE},Edge:function(){return s.default.device.type?f:c.DrmScheme.PLAYREADY},IE:function(){var e=s.default.device.type,t=s.default.os.name,r=s.default.os.version;return!e&&"Windows"===t&&Number.parseFloat(r)>=8.1?c.DrmScheme.PLAYREADY:f},"Mobile Safari":function(){return s.default.browser.major>=11?c.DrmScheme.FAIRPLAY:f}},t.default=d},function(e,t){e.exports={heartbeatTimeout:3e4}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.FairplayDrmHandler=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1),s=n(o),u=r(0),l=n(u),c={NEED_KEY:"webkitneedkey",KEY_MESSAGE:"webkitkeymessage",KEY_ADDED:"webkitkeyadded",KEY_ERROR:"webkitkeyerror"},f=function(){function e(t,r,n){var a=this;i(this,e),this._logger=(0,l.default)("FairPlayDrmHandler"),this._retryLicenseRequest=4,this._config=r,this._errorCallback=n,this._videoElement=t,this._onWebkitNeedKeyHandler=function(e){return a._onWebkitNeedKey(e)},this._videoElement.addEventListener(c.NEED_KEY,this._onWebkitNeedKeyHandler,!1)}return a(e,[{key:"_onWebkitNeedKey",value:function(t){var r=this;this._logger.debug("Webkit need key triggered");var n=t.target,i=t.initData,a=e._extractContentId(i),o=e._base64DecodeUint8Array(this._config.certificate);if(i=e._concatInitDataIdAndCertificate(i,a,o),!n.webkitKeys){var u=this._selectKeySystem();this._logger.debug("Sets media keys"),n.webkitSetMediaKeys(new window.WebKitMediaKeys(u))}n.webkitKeys||this._onError(s.default.Code.COULD_NOT_CREATE_MEDIA_KEYS),this._logger.debug("Creates session"),this._keySession=n.webkitKeys.createSession("video/mp4",i),this._keySession||this._onError(s.default.Code.COULD_NOT_CREATE_KEY_SESSION),this._keySession.contentId=a,this._keySession.addEventListener(c.KEY_MESSAGE,function(e){return r._onWebkitKeyMessage(e)},!1),this._keySession.addEventListener(c.KEY_ADDED,function(){return r._onWebkitKeyAdded()},!1),this._keySession.addEventListener(c.KEY_ERROR,function(e){return r._onWebkitKeyError(e)},!1)}},{key:"destroy",value:function(){this._videoElement.removeEventListener(c.NEED_KEY,this._onWebkitNeedKeyHandler),this._keySession.close(),this._keySession=null}},{key:"_onWebkitKeyMessage",value:function(t){var r=this;this._logger.debug("Webkit key message triggered");var n=t.message,i=new XMLHttpRequest;i.responseType="text",i.addEventListener("load",function(e){return r._licenseRequestLoaded(e)},!1);var a=e._base64EncodeUint8Array(n);i.open("POST",this._config.licenseUrl,!0),i.setRequestHeader("Content-type","application/json"),this._logger.debug("Ready for license request"),i.onerror=function(){r._onError(s.default.Code.LICENSE_REQUEST_FAILED,{status:i.status,responseText:i.responseText})},i.send(a)}},{key:"_onWebkitKeyAdded",value:function(){this._logger.debug("Decryption key was added to session")}},{key:"_onWebkitKeyError",value:function(e){this._logger.error("A decryption key error was encountered",e),this._retryLicenseRequest<=0&&this._onError(s.default.Code.LICENSE_REQUEST_FAILED,e.target.error),this._retryLicenseRequest--}},{key:"_licenseRequestLoaded",value:function(t){this._logger.debug("License request loaded");var r=t.target;if(r.status>299)return void this._onError(s.default.Code.LICENSE_REQUEST_FAILED,{status:r.status,error:r.responseText});var n={};try{var i=r.responseText.trim();n=JSON.parse(i)}catch(e){this._onError(s.default.Code.BAD_FAIRPLAY_RESPONSE,{error:e,responseText:r.responseText})}var a=e._validateResponse(n);if(a.valid){var o=e._base64DecodeUint8Array(n.ckc);this._keySession.update(o)}else this._onError(s.default.Code.BAD_FAIRPLAY_RESPONSE,a)}},{key:"_onError",value:function(e,t){this._errorCallback(new s.default(s.default.Severity.CRITICAL,s.default.Category.DRM,e,t))}},{key:"_selectKeySystem",value:function(){var e=null;return window.WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4")?e="com.apple.fps.1_0":this._logger.warn("Key System not supported"),e}}],[{key:"_validateResponse",value:function(e){return e.message&&e.message.indexOf("error")>0||null===e.reference||500===e.status_code?{valid:!1,details:"internal server error"}:""===e.ckc?{valid:!1,details:"ckc is missing"}:{valid:!0}}},{key:"_extractContentId",value:function(t){var r=document.createElement("a");return r.href=e._arrayToString(t),r.hostname}},{key:"_arrayToString",value:function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))}},{key:"_base64DecodeUint8Array",value:function(e){for(var t=window.atob(e),r=t.length,n=new Uint8Array(new ArrayBuffer(r)),i=0;i<r;i++)n[i]=t.charCodeAt(i);return n}},{key:"_concatInitDataIdAndCertificate",value:function(t,r,n){"string"==typeof r&&(r=e._stringToArray(r));var i=0,a=new ArrayBuffer(t.byteLength+4+r.byteLength+4+n.byteLength),o=new DataView(a);new Uint8Array(a,i,t.byteLength).set(t),i+=t.byteLength,o.setUint32(i,r.byteLength,!0),i+=4;var s=new Uint8Array(a,i,r.byteLength);return s.set(r),i+=s.byteLength,o.setUint32(i,n.byteLength,!0),i+=4,new Uint8Array(a,i,n.byteLength).set(n),new Uint8Array(a,0,a.byteLength)}},{key:"_stringToArray",value:function(e){for(var t=new ArrayBuffer(2*e.length),r=new Uint16Array(t),n=0,i=e.length;n<i;n++)r[n]=e.charCodeAt(n);return r}},{key:"_base64EncodeUint8Array",value:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",n=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=0;c<e.length;)n=e[c++],i=c<e.length?e[c++]:Number.NaN,a=c<e.length?e[c++]:Number.NaN,o=n>>2,s=(3&n)<<4|i>>4,u=(15&i)<<2|a>>6,l=63&a,isNaN(i)?u=l=64:isNaN(a)&&(l=64),r+=t.charAt(o)+t.charAt(s)+t.charAt(u)+t.charAt(l);return r}}]),e}();f.WebkitEvents=c,f.WebkitEvents=c,t.FairplayDrmHandler=f},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(5),s=n(o),u=r(3),l=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(l),f=r(70),d=n(f),h=new Blob([new Uint8Array(d.uInt8Array)],{type:"video/mp4"}),p=function(){function e(){i(this,e)}return a(e,null,[{key:"runCapability",value:function(){e._vid||(e._vid=s.Dom.createElement("video"),e._vid.src=URL.createObjectURL(h),e._vid.setAttribute("playsinline","")),e._playPromiseResult=new Promise(function(t){e._setMuted(!1),e._getPlayPromise().then(function(){return t({autoplay:!0,mutedAutoPlay:!0})}).catch(function(){e._setMuted(!0),e._getPlayPromise().then(function(){return t({autoplay:!1,mutedAutoPlay:!0})}).catch(function(){return t({autoplay:!1,mutedAutoPlay:!1})})})})}},{key:"getCapability",value:function(){return e._playPromiseResult.then(function(t){return t.autoplay?t:(e.runCapability(),e._playPromiseResult)})}},{key:"_getPlayPromise",value:function(){return e._vid.play()||e._forcePromiseReturnValue()}},{key:"_setMuted",value:function(t){t?(e._vid.muted=!0,e._vid.setAttribute("muted","")):(e._vid.muted=!1,e._vid.removeAttribute("muted"))}},{key:"_forcePromiseReturnValue",value:function(){return new Promise(function(t,r){e._vid.addEventListener(u.Html5EventType.ERROR,function(){r()});var n=setTimeout(function(){e._logger.debug("Timeout 500 ms has been reached"),r()},500);!0===e._vid.paused?(clearTimeout(n),r()):(clearTimeout(n),t())})}}]),e}();p._logger=(0,c.default)("Html5AutoPlayCapability"),t.default=p},function(e,t){e.exports={uInt8Array:[0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49]}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DroppedFramesWatcher=void 0;var s=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(7),c=n(l),f=r(0),d=n(f),h=r(3),p=r(4),v=n(p),g=r(2),y=n(g),_=-1,m=function(e){function t(e,r,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o._droppedFramesInterval=null,o._lastDroppedFrames=0,o._lastDecodedFrames=0,o._lastTime=0,o._currentBitrate=0,o._eventManager=new v.default,o._mediaSourceAdapter=e,o._config=r,o._videoElement=n,o._mediaSourceAdapter.capabilities.fpsControl?(o._eventManager.listen(o._mediaSourceAdapter,h.CustomEventType.FPS_DROP,function(e){return o._triggerFPSDrop(e.payload.data)}),a(o)):(o._getDroppedAndDecodedFrames()[0]===_?t._logger.debug("Dropped frame watcher is not supported"):o._config.capLevelOnFPSDrop&&o._init(),o)}return o(t,e),u(t,[{key:"_init",value:function(){var e=this;this._eventManager.listen(this._mediaSourceAdapter,h.CustomEventType.VIDEO_TRACK_CHANGED,function(t){return e._currentBitrate=t.payload.selectedVideoTrack.bandwidth}),this._droppedFramesInterval=setInterval(function(){return e._checkFPS()},this._config.fpsDroppedFramesInterval)}},{key:"_triggerFPSDrop",value:function(e){this.dispatchEvent(new y.default(h.CustomEventType.FPS_DROP,e))}},{key:"_getDroppedAndDecodedFrames",value:function(){if("function"==typeof this._videoElement.getVideoPlaybackQuality){var e=this._videoElement.getVideoPlaybackQuality();return[e.droppedVideoFrames,e.totalVideoFrames]}return"number"==typeof this._videoElement.webkitDroppedFrameCount&&"number"==typeof this._videoElement.webkitDecodedFrameCount?[this._videoElement.webkitDroppedFrameCount,this._videoElement.webkitDecodedFrameCount]:[_,_]}},{key:"_checkFPS",value:function(){var e=this._getDroppedAndDecodedFrames(),r=s(e,2),n=r[0],i=r[1];try{var a=performance.now();if(i){if(this._lastTime){var o=a-this._lastTime,u=n-this._lastDroppedFrames,l=i-this._lastDecodedFrames,c=1e3*u/o;c>0&&(t._logger.debug("checkFPS : droppedFPS/decodedFPS:"+c/(1e3*l/o)),u>this._config.fpsDroppedMonitoringThreshold*l&&(this._mediaSourceAdapter.setMaxBitrate(this._currentBitrate-1),this._triggerFPSDrop({currentDropped:u,currentDecoded:l,totalDroppedFrames:c})))}this._lastTime=a,this._lastDroppedFrames=n,this._lastDecodedFrames=i}}catch(e){t._logger.error("Error occur while trying to check dropFrames: ",e)}}},{key:"destroy",value:function(){this._droppedFramesInterval&&clearInterval(this._droppedFramesInterval),this._droppedFramesInterval=null,this._eventManager.destroy()}}]),t}(c.default);m._logger=(0,d.default)("droppedFramesWatcher"),t.DroppedFramesWatcher=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalCaptionsHandler=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),l=n(u),c=r(5),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),d=r(20),h=r(14),p=r(9),v=n(p),g=r(6),y=(n(g),r(3)),_=r(2),m=n(_),E=r(0),b=n(E),T=r(4),S=n(T),A=r(7),k=n(A),O=(r(13),r(8)),w=(n(O),{NOT_DOWNLOADED:1,DOWNLOADING:2,DOWNLOADED:3}),R=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._externalCueIndex=0,r._textTrackModel={},r._activeTextCues=[],r._isTextTrackActive=!1,r._lastTimeUpdate=0,r._player=e,r._eventManager=new S.default,r}return o(t,e),s(t,[{key:"hideTextTrack",value:function(){this._isTextTrackActive&&(this._eventManager.unlisten(this._player,y.Html5EventType.TIME_UPDATE),this.dispatchEvent(new m.default(y.CustomEventType.TEXT_CUE_CHANGED,{cues:[]})),this._resetCurrentTrack())}},{key:"getExternalTracks",value:function(e){var t=this,r=this._player.config.sources.captions;if(!r)return[];var n=e.filter(function(e){return e instanceof v.default}),i=n.length||0,a=[];return r.forEach(function(e){if(e.language){var r=t._createTextTrack(e,i++);t._maybeAddTrack(r,e,n,a)}else{var o=new l.default(l.default.Severity.RECOVERABLE,l.default.Category.TEXT,l.default.Code.UNKNOWN_LANGUAGE,{caption:e});t.dispatchEvent(new m.default(y.Html5EventType.ERROR,o))}}),a}},{key:"_maybeAddTrack",value:function(e,r,n,i){var a=n.find(function(e){return r.language===e.language});a?t._logger.warn("duplicated language, taking the inband option. Language: ",a.language):(this._player.config.playback.useNativeTextTrack&&this._addNativeTextTrack(e),i.push(e),this._updateTextTracksModel(r))}},{key:"_createTextTrack",value:function(e,t){return new v.default({active:!!e.default,index:t,kind:"subtitles",label:e.label,language:e.language,external:!0})}},{key:"_updateTextTracksModel",value:function(e){this._textTrackModel[e.language]={cuesStatus:w.NOT_DOWNLOADED,cues:[],url:e.url,type:e.type}}},{key:"selectTextTrack",value:function(e){var t=this;this._textTrackModel[e.language]&&(this._textTrackModel[e.language].cuesStatus!==w.DOWNLOADED||this._player.config.playback.useNativeTextTrack?this._textTrackModel[e.language].cuesStatus===w.NOT_DOWNLOADED&&(e.active=!0,this._player.config.playback.useNativeTextTrack||this.dispatchEvent(new m.default(y.CustomEventType.TEXT_TRACK_CHANGED,{selectedTextTrack:e})),this._downloadAndParseCues(e).then(function(){t._textTrackModel[e.language].cuesStatus=w.DOWNLOADED,t._player.config.playback.useNativeTextTrack?t._addCuesToNativeTextTrack(e,t._textTrackModel[e.language].cues):(t.hideTextTrack(),t._setTextTrack(e))}).catch(function(e){return t.dispatchEvent(new m.default(y.Html5EventType.ERROR,e))})):(e.active=!0,this.dispatchEvent(new m.default(y.CustomEventType.TEXT_TRACK_CHANGED,{selectedTextTrack:e})),this.hideTextTrack(),this._setTextTrack(e)))}},{key:"reset",value:function(){this._resetCurrentTrack(),this._textTrackModel={},this._eventManager.removeAll()}},{key:"destroy",value:function(){this._textTrackModel={},this._eventManager.destroy(),this._activeTextCues=[]}},{key:"_resetCurrentTrack",value:function(){this._activeTextCues=[],this._isTextTrackActive=!1,this._maybeSetExternalCueIndex()}},{key:"_getCuesString",value:function(e){var t=this;return new Promise(function(r,n){var i=t._textTrackModel[e.language],a=i.type||t._getFileType(i.url);["srt","vtt"].includes(a)||(t._textTrackModel[e.language].cuesStatus=w.NOT_DOWNLOADED,n(new l.default(l.default.Severity.RECOVERABLE,l.default.Category.TEXT,l.default.Code.UNKNOWN_FILE_TYPE,{captionType:a}))),f.Http.execute(i.url,{},"GET").then(function(e){r("srt"===a?t._convertSrtToVtt(e):e)}).catch(function(r){t._textTrackModel[e.language].cuesStatus=w.NOT_DOWNLOADED,n(new l.default(l.default.Severity.RECOVERABLE,l.default.Category.TEXT,l.default.Code.HTTP_ERROR,r.payload))})})}},{key:"_parseCues",value:function(e){return new Promise(function(r,n){var i=new d.Parser(window,(0,d.StringDecoder)()),a=[];i.oncue=function(e){return a.push(e)},i.onflush=function(){t._logger.debug("finished parsing external cues"),r(a)},i.parse(e),i.flush(),i.onparsingerror(function(e){return n(e)})})}},{key:"_convertSrtToVtt",value:function(e){return"WEBVTT\n\n"+e.replace(/(\d\d:\d\d:\d\d),(\d\d\d) --> (\d\d:\d\d:\d\d),(\d\d\d)/g,function(e,t,r,n,i){return t+"."+r+" --\x3e "+n+"."+i})}},{key:"_downloadAndParseCues",value:function(e){var t=this;return this._textTrackModel[e.language].cuesStatus=w.DOWNLOADING,new Promise(function(r,n){t._getCuesString(e).then(function(e){return t._parseCues(e)}).then(function(n){t._textTrackModel[e.language].cues=n,r()}).catch(function(e){return n(e)})})}},{key:"_getFileType",value:function(e){return e.split(/[#?]/)[0].split(".").pop().trim()}},{key:"_handleCaptionOnTimeUpdate",value:function(e){var t=this._player.currentTime;if(t){var r=!1;this._hadSeeked()&&(this._activeTextCues=[],r=this._maybeSetExternalCueIndex());var n=this._maybeRemoveActiveCues(),i=this._maybeAddToActiveCues(e);(r||i||n)&&this.dispatchEvent(new m.default(y.CustomEventType.TEXT_CUE_CHANGED,{cues:this._activeTextCues})),this._lastTimeUpdate=t}}},{key:"_hadSeeked",value:function(){return!!this._player.currentTime&&Math.abs(this._player.currentTime-this._lastTimeUpdate)>1}},{key:"_maybeRemoveActiveCues",value:function(){var e=this._player.currentTime;if(!e)return!1;for(var t=!1,r=0;r<this._activeTextCues.length;r++){var n=this._activeTextCues[r];(e<n.startTime||n.endTime<e)&&(this._activeTextCues.splice(r,1),t=!0)}return t}},{key:"_maybeAddToActiveCues",value:function(e){var t=this._player.currentTime;if(!t)return!1;for(var r=!1,n=this._textTrackModel[e.language].cues;this._externalCueIndex<n.length&&t>n[this._externalCueIndex].startTime;)this._activeTextCues.push(n[this._externalCueIndex]),this._externalCueIndex++,r=!0;return r}},{key:"_maybeSetExternalCueIndex",value:function(){var e=this._player.getTracks(h.TrackType.TEXT).find(function(e){return e instanceof v.default&&e.active&&e.external});if(e&&e.external){for(var t=this._textTrackModel[e.language]?this._textTrackModel[e.language].cues:[],r=0;r<t.length&&!(t[r].startTime<this._player.currentTime&&this._player.currentTime<t[r].endTime)&&!(t[r].endTime>this._player.currentTime&&t[r].startTime>this._player.currentTime);r++);return this._externalCueIndex=r,!0}return!1}},{key:"_addCuesToNativeTextTrack",value:function(e,t){var r=this._player.getVideoElement();if(r){var n=Array.from(r.textTracks).find(function(t){return!!t&&t.language===e.language});n&&t.forEach(function(e){return n.addCue(e)})}}},{key:"_addNativeTextTrack",value:function(e){var t=this._player.getVideoElement();if(t){var r=Array.from(t.textTracks).findIndex(function(t){return!!t&&t.language===e.language});if(r>-1){var n=t.textTracks[r];n.cues&&Object.values(n.cues).forEach(function(e){return n.removeCue(e)})}else t.addTextTrack("subtitles",e.label||e.language,e.language)}}},{key:"_setTextTrack",value:function(e){var r=this;this._player.config.playback.useNativeTextTrack||(this._isTextTrackActive=!0,t._logger.debug("External text track changed",e),this._activeTextCues=[],this.dispatchEvent(new m.default(y.CustomEventType.TEXT_CUE_CHANGED,{cues:this._activeTextCues})),this._eventManager.listen(this._player,y.Html5EventType.TIME_UPDATE,function(){return r._handleCaptionOnTimeUpdate(e)}))}}]),t}(k.default);R._logger=(0,b.default)("ExternalCaptionsHandler"),t.ExternalCaptionsHandler=R},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ControllerProvider=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(17),o=(function(e){e&&e.__esModule}(a),function(){function e(t){n(this,e),this._pluginManager=t}return i(e,[{key:"getAdsController",value:function(){var e=Object.values(this._pluginManager.getAll()).find(function(e){return"function"==typeof e.getAdsController});return e&&e.getAdsController()}}]),e}());t.ControllerProvider=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={HLS:["application/x-mpegurl","application/vnd.apple.mpegurl"],DASH:["application/dash+xml"],PROGRESSIVE:["video/mp4"],SMOOTH_STREAMING:["application/vnd.ms-sstr+xml"]};t.MimeType=n}])})},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(7),i=r(33);e.exports=r(6)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(2),i=r(13),a=r(12),o=r(34)("src"),s=Function.toString,u=(""+s).split("toString");r(22).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,s){var l="function"==typeof r;l&&(a(r,"name")||i(r,"name",t)),e[t]!==r&&(l&&(a(r,o)||i(r,o,e[t]?""+e[t]:u.join(String(t)))),e===n?e[t]=r:s?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||s.call(this)})},function(e,t,r){var n=r(0),i=r(3),a=r(24),o=/"/g,s=function(e,t,r,n){var i=String(a(e)),s="<"+t;return""!==r&&(s+=" "+r+'="'+String(n).replace(o,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var r={};r[e]=t(s),n(n.P+n.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)}},function(e,t,r){var n=r(48),i=r(24);e.exports=function(e){return n(i(e))}},function(e,t,r){var n=r(49),i=r(33),a=r(16),o=r(23),s=r(12),u=r(98),l=Object.getOwnPropertyDescriptor;t.f=r(6)?l:function(e,t){if(e=a(e),t=o(t,!0),u)try{return l(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(12),i=r(9),a=r(71)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,r){var n=r(10);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){"use strict";var n=r(3);e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t){var r=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(4);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(0),i=r(22),a=r(3);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*a(function(){r(1)}),"Object",o)}},function(e,t,r){var n=r(19),i=r(48),a=r(9),o=r(8),s=r(88);e.exports=function(e,t){var r=1==e,u=2==e,l=3==e,c=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var v,g,y=a(t),_=i(y),m=n(s,p,3),E=o(_.length),b=0,T=r?h(t,E):u?h(t,0):void 0;E>b;b++)if((d||b in _)&&(v=_[b],g=m(v,b,y),e))if(r)T[b]=g;else if(g)switch(e){case 3:return!0;case 5:return v;case 6:return b;case 2:T.push(v)}else if(c)return!1;return f?-1:l||c?c:T}}},function(e,t,r){"use strict";function n(e){return e?s.get(e):s}function i(e){return n(e).getLevel()}function a(e,t){n(t).setLevel(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var o=r(141),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),u={DEBUG:s.DEBUG,INFO:s.INFO,TIME:s.TIME,WARN:s.WARN,ERROR:s.ERROR,OFF:s.OFF};s.useDefaults({defaultLevel:s.ERROR}),t.default=n,t.LogLevel=u,t.getLogLevel=i,t.setLogLevel=a},function(e,t,r){"use strict";if(r(6)){var n=r(35),i=r(2),a=r(3),o=r(0),s=r(64),u=r(94),l=r(19),c=r(41),f=r(33),d=r(13),h=r(43),p=r(25),v=r(8),g=r(124),y=r(37),_=r(23),m=r(12),E=r(50),b=r(4),T=r(9),S=r(85),A=r(38),k=r(18),O=r(39).f,w=r(87),R=r(34),P=r(5),L=r(27),D=r(55),C=r(62),I=r(90),M=r(46),x=r(59),N=r(40),j=r(89),F=r(114),U=r(7),B=r(17),G=U.f,H=B.f,V=i.RangeError,K=i.TypeError,Y=i.Uint8Array,W=Array.prototype,q=u.ArrayBuffer,X=u.DataView,z=L(0),J=L(2),Q=L(3),$=L(4),Z=L(5),ee=L(6),te=D(!0),re=D(!1),ne=I.values,ie=I.keys,ae=I.entries,oe=W.lastIndexOf,se=W.reduce,ue=W.reduceRight,le=W.join,ce=W.sort,fe=W.slice,de=W.toString,he=W.toLocaleString,pe=P("iterator"),ve=P("toStringTag"),ge=R("typed_constructor"),ye=R("def_constructor"),_e=s.CONSTR,me=s.TYPED,Ee=s.VIEW,be=L(1,function(e,t){return Oe(C(e,e[ye]),t)}),Te=a(function(){return 1===new Y(new Uint16Array([1]).buffer)[0]}),Se=!!Y&&!!Y.prototype.set&&a(function(){new Y(1).set({})}),Ae=function(e,t){var r=p(e);if(r<0||r%t)throw V("Wrong offset!");return r},ke=function(e){if(b(e)&&me in e)return e;throw K(e+" is not a typed array!")},Oe=function(e,t){if(!(b(e)&&ge in e))throw K("It is not a typed array constructor!");return new e(t)},we=function(e,t){return Re(C(e,e[ye]),t)},Re=function(e,t){for(var r=0,n=t.length,i=Oe(e,n);n>r;)i[r]=t[r++];return i},Pe=function(e,t,r){G(e,t,{get:function(){return this._d[r]}})},Le=function(e){var t,r,n,i,a,o,s=T(e),u=arguments.length,c=u>1?arguments[1]:void 0,f=void 0!==c,d=w(s);if(void 0!=d&&!S(d)){for(o=d.call(s),n=[],t=0;!(a=o.next()).done;t++)n.push(a.value);s=n}for(f&&u>2&&(c=l(c,arguments[2],2)),t=0,r=v(s.length),i=Oe(this,r);r>t;t++)i[t]=f?c(s[t],t):s[t];return i},De=function(){for(var e=0,t=arguments.length,r=Oe(this,t);t>e;)r[e]=arguments[e++];return r},Ce=!!Y&&a(function(){he.call(new Y(1))}),Ie=function(){return he.apply(Ce?fe.call(ke(this)):ke(this),arguments)},Me={copyWithin:function(e,t){return F.call(ke(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return $(ke(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return j.apply(ke(this),arguments)},filter:function(e){return we(this,J(ke(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(ke(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(ke(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){z(ke(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return re(ke(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(ke(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return le.apply(ke(this),arguments)},lastIndexOf:function(e){return oe.apply(ke(this),arguments)},map:function(e){return be(ke(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(ke(this),arguments)},reduceRight:function(e){return ue.apply(ke(this),arguments)},reverse:function(){for(var e,t=this,r=ke(t).length,n=Math.floor(r/2),i=0;i<n;)e=t[i],t[i++]=t[--r],t[r]=e;return t},some:function(e){return Q(ke(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ce.call(ke(this),e)},subarray:function(e,t){var r=ke(this),n=r.length,i=y(e,n);return new(C(r,r[ye]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,v((void 0===t?n:y(t,n))-i))}},xe=function(e,t){return we(this,fe.call(ke(this),e,t))},Ne=function(e){ke(this);var t=Ae(arguments[1],1),r=this.length,n=T(e),i=v(n.length),a=0;if(i+t>r)throw V("Wrong length!");for(;a<i;)this[t+a]=n[a++]},je={entries:function(){return ae.call(ke(this))},keys:function(){return ie.call(ke(this))},values:function(){return ne.call(ke(this))}},Fe=function(e,t){return b(e)&&e[me]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ue=function(e,t){return Fe(e,t=_(t,!0))?f(2,e[t]):H(e,t)},Be=function(e,t,r){return!(Fe(e,t=_(t,!0))&&b(r)&&m(r,"value"))||m(r,"get")||m(r,"set")||r.configurable||m(r,"writable")&&!r.writable||m(r,"enumerable")&&!r.enumerable?G(e,t,r):(e[t]=r.value,e)};_e||(B.f=Ue,U.f=Be),o(o.S+o.F*!_e,"Object",{getOwnPropertyDescriptor:Ue,defineProperty:Be}),a(function(){de.call({})})&&(de=he=function(){return le.call(this)});var Ge=h({},Me);h(Ge,je),d(Ge,pe,je.values),h(Ge,{slice:xe,set:Ne,constructor:function(){},toString:de,toLocaleString:Ie}),Pe(Ge,"buffer","b"),Pe(Ge,"byteOffset","o"),Pe(Ge,"byteLength","l"),Pe(Ge,"length","e"),G(Ge,ve,{get:function(){return this[me]}}),e.exports=function(e,t,r,u){u=!!u;var l=e+(u?"Clamped":"")+"Array",f="get"+e,h="set"+e,p=i[l],y=p||{},_=p&&k(p),m=!p||!s.ABV,T={},S=p&&p.prototype,w=function(e,r){var n=e._d;return n.v[f](r*t+n.o,Te)},R=function(e,r,n){var i=e._d;u&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[h](r*t+i.o,n,Te)},P=function(e,t){G(e,t,{get:function(){return w(this,t)},set:function(e){return R(this,t,e)},enumerable:!0})};m?(p=r(function(e,r,n,i){c(e,p,l,"_d");var a,o,s,u,f=0,h=0;if(b(r)){if(!(r instanceof q||"ArrayBuffer"==(u=E(r))||"SharedArrayBuffer"==u))return me in r?Re(p,r):Le.call(p,r);a=r,h=Ae(n,t);var y=r.byteLength;if(void 0===i){if(y%t)throw V("Wrong length!");if((o=y-h)<0)throw V("Wrong length!")}else if((o=v(i)*t)+h>y)throw V("Wrong length!");s=o/t}else s=g(r),o=s*t,a=new q(o);for(d(e,"_d",{b:a,o:h,l:o,e:s,v:new X(a)});f<s;)P(e,f++)}),S=p.prototype=A(Ge),d(S,"constructor",p)):a(function(){p(1)})&&a(function(){new p(-1)})&&x(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=r(function(e,r,n,i){c(e,p,l);var a;return b(r)?r instanceof q||"ArrayBuffer"==(a=E(r))||"SharedArrayBuffer"==a?void 0!==i?new y(r,Ae(n,t),i):void 0!==n?new y(r,Ae(n,t)):new y(r):me in r?Re(p,r):Le.call(p,r):new y(g(r))}),z(_!==Function.prototype?O(y).concat(O(_)):O(y),function(e){e in p||d(p,e,y[e])}),p.prototype=S,n||(S.constructor=p));var L=S[pe],D=!!L&&("values"==L.name||void 0==L.name),C=je.values;d(p,ge,!0),d(S,me,l),d(S,Ee,!0),d(S,ye,p),(u?new p(1)[ve]==l:ve in S)||G(S,ve,{get:function(){return l}}),T[l]=p,o(o.G+o.W+o.F*(p!=y),T),o(o.S,l,{BYTES_PER_ELEMENT:t}),o(o.S+o.F*a(function(){y.of.call(p,1)}),l,{from:Le,of:De}),"BYTES_PER_ELEMENT"in S||d(S,"BYTES_PER_ELEMENT",t),o(o.P,l,Me),N(l),o(o.P+o.F*Se,l,{set:Ne}),o(o.P+o.F*!D,l,je),n||S.toString==de||(S.toString=de),o(o.P+o.F*a(function(){new p(1).slice()}),l,{slice:xe}),o(o.P+o.F*(a(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!a(function(){S.toLocaleString.call([1,2])})),l,{toLocaleString:Ie}),M[l]=D?L:C,n||D||d(S,pe,C)}}else e.exports=function(){}},function(e,t,r){var n=r(119),i=r(0),a=r(54)("metadata"),o=a.store||(a.store=new(r(122))),s=function(e,t,r){var i=o.get(e);if(!i){if(!r)return;o.set(e,i=new n)}var a=i.get(t);if(!a){if(!r)return;i.set(t,a=new n)}return a},u=function(e,t,r){var n=s(t,r,!1);return void 0!==n&&n.has(e)},l=function(e,t,r){var n=s(t,r,!1);return void 0===n?void 0:n.get(e)},c=function(e,t,r,n){s(r,n,!0).set(e,t)},f=function(e,t){var r=s(e,t,!1),n=[];return r&&r.forEach(function(e,t){n.push(t)}),n},d=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},h=function(e){i(i.S,"Reflect",e)};e.exports={store:o,map:s,has:u,get:l,set:c,keys:f,key:d,exp:h}},function(e,t,r){var n=r(34)("meta"),i=r(4),a=r(12),o=r(7).f,s=0,u=Object.isExtensible||function(){return!0},l=!r(3)(function(){return u(Object.preventExtensions({}))}),c=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[n].i},d=function(e,t){if(!a(e,n)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[n].w},h=function(e){return l&&p.NEED&&u(e)&&!a(e,n)&&c(e),e},p=e.exports={KEY:n,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(e,t,r){var n=r(5)("unscopables"),i=Array.prototype;void 0==i[n]&&r(13)(i,n,{}),e.exports=function(e){i[n][e]=!0}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t){e.exports=!1},function(e,t,r){var n=r(100),i=r(72);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(25),i=Math.max,a=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):a(e,t)}},function(e,t,r){var n=r(1),i=r(101),a=r(72),o=r(71)("IE_PROTO"),s=function(){},u=function(){var e,t=r(69)("iframe"),n=a.length;for(t.style.display="none",r(73).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[a[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[o]=e):r=u(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(100),i=r(72).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){"use strict";var n=r(2),i=r(7),a=r(6),o=r(5)("species");e.exports=function(e){var t=n[e];a&&t&&!t[o]&&i.f(t,o,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(19),i=r(112),a=r(85),o=r(1),s=r(8),u=r(87),l={},c={},t=e.exports=function(e,t,r,f,d){var h,p,v,g,y=d?function(){return e}:u(e),_=n(r,f,t?2:1),m=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(a(y)){for(h=s(e.length);h>m;m++)if((g=t?_(o(p=e[m])[0],p[1]):_(e[m]))===l||g===c)return g}else for(v=y.call(e);!(p=v.next()).done;)if((g=i(v,_,p.value,t))===l||g===c)return g};t.BREAK=l,t.RETURN=c},function(e,t,r){var n=r(14);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},function(e,t,r){var n=r(7).f,i=r(12),a=r(5)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,r){var n=r(0),i=r(24),a=r(3),o=r(75),s="["+o+"]",u="​",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),f=function(e,t,r){var i={},s=a(function(){return!!o[e]()||u[e]()!=u}),l=i[e]=s?t(d):o[e];r&&(i[r]=l),n(n.P+n.F*s,"String",i)},d=f.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=f},function(e,t){e.exports={}},function(e,t,r){var n=r(4);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){var n=r(20);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(20),i=r(5)("toStringTag"),a="Arguments"==n(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=o(t=Object(e),i))?r:a?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.KalturaPlayer=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(95),l=r(132),c=r(133),f=r(28),d=function(e){return e&&e.__esModule?e:{default:e}}(f),h=r(134),p=r(135),v=r(137);r(364);var g=r(368),y=r(370),_=r(97),m=r(52),E=r(52),b=(r(52),r(52),r(11)),T=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._mediaInfo=null,r._remotePlayer=null,r._eventManager=new b.EventManager,r._localPlayer=(0,b.loadPlayer)(e),r._logger=(0,d.default)("KalturaPlayer"+b.Utils.Generator.uniqueId(5)),r._uiWrapper=new g.UIWrapper(r,e),r._provider=new l.Provider(e.provider,"0.37.3"),r._playlistManager=new y.PlaylistManager(r,e),r._playlistManager.configure(e.playlist),Object.values(b.EventType).forEach(function(e){return r._eventManager.listen(r._localPlayer,e,function(e){return r.dispatchEvent(e)})}),r}return a(t,e),s(t,[{key:"loadMedia",value:function(e){var t=this;this._logger.debug("loadMedia",e),this._mediaInfo=e,this.reset(),this._localPlayer.loadingMedia=!0,this._uiWrapper.setLoadingSpinnerState(!0);var r=this._provider.getMediaConfig(e);return r.then(function(e){return t.setMedia(e)},function(e){return t._localPlayer.dispatchEvent(new b.FakeEvent(b.EventType.ERROR,new b.Error(b.Error.Severity.CRITICAL,b.Error.Category.PLAYER,b.Error.Code.LOAD_FAILED,e)))}),r}},{key:"setMedia",value:function(e){this._logger.debug("setMedia",e);var t=b.Utils.Object.copyDeep(e);b.Utils.Object.mergeDeep(t.sources,this._localPlayer.config.sources),b.Utils.Object.mergeDeep(t.session,this._localPlayer.config.session),Object.keys(this._localPlayer.config.plugins).forEach(function(e){t.plugins[e]={}}),(0,v.addKalturaPoster)(t.sources,e.sources,this._localPlayer.dimensions),(0,h.addKalturaParams)(this,t),(0,c.maybeSetStreamPriority)(this,t),this._uiWrapper.setSeekbarConfig(e,this._localPlayer.config.ui),this.configure(t)}},{key:"loadPlaylist",value:function(e,t){var r=this;this._logger.debug("loadPlaylist",e),this._uiWrapper.setLoadingSpinnerState(!0);var n=this._provider.getPlaylistConfig(e);return n.then(function(e){return r.setPlaylist(e,t)},function(e){return r._localPlayer.dispatchEvent(new b.FakeEvent(b.EventType.ERROR,new b.Error(b.Error.Severity.CRITICAL,b.Error.Category.PLAYER,b.Error.Code.LOAD_FAILED,e)))}),n}},{key:"loadPlaylistByEntryList",value:function(e,t){var r=this;this._logger.debug("loadPlaylistByEntryList",e),this._uiWrapper.setLoadingSpinnerState(!0);var n=this._provider.getEntryListConfig(e);return n.then(function(n){return r.setPlaylist(n,t,e)},function(e){return r._localPlayer.dispatchEvent(new b.FakeEvent(b.EventType.ERROR,new b.Error(b.Error.Severity.CRITICAL,b.Error.Category.PLAYER,b.Error.Code.LOAD_FAILED,e)))}),n}},{key:"setPlaylist",value:function(e,t,r){this._logger.debug("setPlaylist",e);var n={playlist:e,plugins:this._localPlayer.config.plugins};(0,p.evaluatePluginsConfig)(n),this._localPlayer.configure({plugins:n.plugins}),this._playlistManager.load(e,t,r)}},{key:"getMediaInfo",value:function(){return b.Utils.Object.copyDeep(this._mediaInfo)}},{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=(0,c.supportLegacyOptions)(e),(0,p.evaluatePluginsConfig)(e),this._localPlayer.configure(e),e.ui&&this._uiWrapper.setConfig(e.ui),e.playlist&&this._playlistManager.configure(e.playlist)}},{key:"ready",value:function(){return this._localPlayer.ready()}},{key:"load",value:function(){this._localPlayer.load()}},{key:"play",value:function(){this._localPlayer.play()}},{key:"pause",value:function(){this._localPlayer.pause()}},{key:"getView",value:function(){return this._localPlayer.getView()}},{key:"getVideoElement",value:function(){return this._localPlayer.getVideoElement()}},{key:"reset",value:function(){this._localPlayer.reset(),this._uiWrapper.reset()}},{key:"destroy",value:function(){var e=this.config.ui.targetId;this._localPlayer.destroy(),this._uiWrapper.destroy(),this._eventManager.destroy();var t=document.getElementById(e);t&&t.parentNode&&b.Utils.Dom.removeChild(t.parentNode,t)}},{key:"isLive",value:function(){return this._localPlayer.isLive()}},{key:"isDvr",value:function(){return this._localPlayer.isDvr()}},{key:"seekToLiveEdge",value:function(){this._localPlayer.seekToLiveEdge()}},{key:"getStartTimeOfDvrWindow",value:function(){return this._localPlayer.getStartTimeOfDvrWindow()}},{key:"getTracks",value:function(e){return this._localPlayer.getTracks(e)}},{key:"getActiveTracks",value:function(){return this._localPlayer.getActiveTracks()}},{key:"selectTrack",value:function(e){this._localPlayer.selectTrack(e)}},{key:"hideTextTrack",value:function(){this._localPlayer.hideTextTrack()}},{key:"enableAdaptiveBitrate",value:function(){this._localPlayer.enableAdaptiveBitrate()}},{key:"isAdaptiveBitrateEnabled",value:function(){return this._localPlayer.isAdaptiveBitrateEnabled()}},{key:"setTextDisplaySettings",value:function(e){this._localPlayer.setTextDisplaySettings(e)}},{key:"isFullscreen",value:function(){return this._localPlayer.isFullscreen()}},{key:"notifyEnterFullscreen",value:function(){this._localPlayer.notifyEnterFullscreen()}},{key:"notifyExitFullscreen",value:function(){this._localPlayer.notifyExitFullscreen()}},{key:"enterFullscreen",value:function(){this._localPlayer.enterFullscreen()}},{key:"exitFullscreen",value:function(){this._localPlayer.exitFullscreen()}},{key:"enterPictureInPicture",value:function(){this._localPlayer.enterPictureInPicture()}},{key:"exitPictureInPicture",value:function(){this._localPlayer.exitPictureInPicture()}},{key:"isInPictureInPicture",value:function(){return this._localPlayer.isInPictureInPicture()}},{key:"isPictureInPictureSupported",value:function(){return this._localPlayer.isPictureInPictureSupported()}},{key:"getLogLevel",value:function(e){return this._localPlayer.getLogLevel(e)}},{key:"startCasting",value:function(e){return E.RemotePlayerManager.startCasting(e)}},{key:"isCastAvailable",value:function(e){return E.RemotePlayerManager.isCastAvailable(e)}},{key:"getCastSession",value:function(){return null}},{key:"stopCasting",value:function(){}},{key:"isCasting",value:function(){return!1}},{key:"isVr",value:function(){return this._localPlayer.isVr()}},{key:"toggleVrStereoMode",value:function(){this._localPlayer.toggleVrStereoMode()}},{key:"isInVrStereoMode",value:function(){return this._localPlayer.isInVrStereoMode()}},{key:"setLogLevel",value:function(e,t){this._localPlayer.setLogLevel(e,t)}},{key:"textStyle",set:function(e){this._localPlayer.textStyle=e},get:function(){return this._localPlayer.textStyle}},{key:"buffered",get:function(){return this._localPlayer.buffered}},{key:"currentTime",set:function(e){this._localPlayer.currentTime=e},get:function(){return this._localPlayer.currentTime}},{key:"duration",get:function(){return this._localPlayer.duration}},{key:"volume",set:function(e){this._localPlayer.volume=e},get:function(){return this._localPlayer.volume}},{key:"paused",get:function(){return this._localPlayer.paused}},{key:"seeking",get:function(){return this._localPlayer.seeking}},{key:"playsinline",set:function(e){this._localPlayer.playsinline=e},get:function(){return this._localPlayer.playsinline}},{key:"muted",set:function(e){this._localPlayer.muted=e},get:function(){return this._localPlayer.muted}},{key:"src",get:function(){return this._localPlayer.src}},{key:"dimensions",get:function(){return this._localPlayer.dimensions}},{key:"poster",get:function(){return this._localPlayer.poster}},{key:"ended",get:function(){return this._localPlayer.ended}},{key:"playbackRate",set:function(e){this._localPlayer.playbackRate=e},get:function(){return this._localPlayer.playbackRate}},{key:"playbackRates",get:function(){return this._localPlayer.playbackRates}},{key:"defaultPlaybackRate",get:function(){return this._localPlayer.defaultPlaybackRate}},{key:"engineType",get:function(){return this._localPlayer.engineType}},{key:"streamType",get:function(){return this._localPlayer.streamType}},{key:"env",get:function(){return this._localPlayer.env}},{key:"config",get:function(){return this._localPlayer.config}},{key:"loadingMedia",set:function(e){this._localPlayer.loadingMedia=e}},{key:"ads",get:function(){return this._localPlayer.ads}},{key:"plugins",get:function(){return this._localPlayer.plugins}},{key:"playlist",get:function(){return this._playlistManager}},{key:"Event",get:function(){return o({Cast:m.CastEventType,Core:b.EventType,Playlist:_.PlaylistEventType,UI:u.EventType},b.EventType)}},{key:"TextStyle",get:function(){return this._localPlayer.TextStyle}},{key:"State",get:function(){return this._localPlayer.State}},{key:"Track",get:function(){return this._localPlayer.Track}},{key:"LogLevelType",get:function(){return this._localPlayer.LogLevelType}},{key:"LogLevel",get:function(){return this._localPlayer.LogLevel}},{key:"AbrMode",get:function(){return this._localPlayer.AbrMode}},{key:"MediaType",get:function(){return this._localPlayer.MediaType}},{key:"StreamType",get:function(){return this._localPlayer.StreamType}},{key:"EngineType",get:function(){return this._localPlayer.EngineType}},{key:"Error",get:function(){return this._localPlayer.Error}}]),t}(b.FakeEventTarget);t.KalturaPlayer=T},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.cast=n},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(2),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,r){var n=r(16),i=r(8),a=r(37);e.exports=function(e){return function(t,r,o){var s,u=n(t),l=i(u.length),c=a(o,l);if(e&&r!=r){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(20);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(4),i=r(20),a=r(5)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},function(e,t,r){var n=r(5)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],o=a[n]();o.next=function(){return{done:r=!0}},a[n]=function(){return o},e(a)}catch(e){}return r}},function(e,t,r){"use strict";var n=r(1);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){"use strict";var n=r(13),i=r(14),a=r(3),o=r(24),s=r(5);e.exports=function(e,t,r){var u=s(e),l=r(o,u,""[e]),c=l[0],f=l[1];a(function(){var t={};return t[u]=function(){return 7},7!=""[e](t)})&&(i(String.prototype,e,c),n(RegExp.prototype,u,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},function(e,t,r){var n=r(1),i=r(10),a=r(5)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||void 0==(r=n(o)[a])?t:i(r)}},function(e,t,r){"use strict";var n=r(2),i=r(0),a=r(14),o=r(43),s=r(31),u=r(42),l=r(41),c=r(4),f=r(3),d=r(59),h=r(44),p=r(76);e.exports=function(e,t,r,v,g,y){var _=n[e],m=_,E=g?"set":"add",b=m&&m.prototype,T={},S=function(e){var t=b[e];a(b,e,"delete"==e?function(e){return!(y&&!c(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof m&&(y||b.forEach&&!f(function(){(new m).entries().next()}))){var A=new m,k=A[E](y?{}:-0,1)!=A,O=f(function(){A.has(1)}),w=d(function(e){new m(e)}),R=!y&&f(function(){for(var e=new m,t=5;t--;)e[E](t,t);return!e.has(-0)});w||(m=t(function(t,r){l(t,m,e);var n=p(new _,t,m);return void 0!=r&&u(r,g,n[E],n),n}),m.prototype=b,b.constructor=m),(O||R)&&(S("delete"),S("has"),g&&S("get")),(R||k)&&S(E),y&&b.clear&&delete b.clear}else m=v.getConstructor(t,e,g,E),o(m.prototype,r),s.NEED=!0;return h(m,e),T[e]=m,i(i.G+i.W+i.F*(m!=_),T),y||v.setStrong(m,e,g),m}},function(e,t,r){for(var n,i=r(2),a=r(13),o=r(34),s=o("typed_array"),u=o("view"),l=!(!i.ArrayBuffer||!i.DataView),c=l,f=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(n=i[d[f++]])?(a(n.prototype,s,!0),a(n.prototype,u,!0)):c=!1;e.exports={ABV:l,CONSTR:c,TYPED:s,VIEW:u}},function(e,t,r){"use strict";e.exports=r(35)||!r(3)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete r(2)[e]})},function(e,t,r){"use strict";var n=r(0);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){"use strict";var n=r(0),i=r(10),a=r(19),o=r(42);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,u=arguments[1];return i(this),t=void 0!==u,t&&i(u),void 0==e?new this:(r=[],t?(n=0,s=a(u,arguments[2],2),o(e,!1,function(e){r.push(s(e,n++))})):o(e,!1,r.push,r),new this(r))}})}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(28),o=function(e){return e&&e.__esModule?e:{default:e}}(a);window._babelPolyfill||r(142);var s=function(){function e(){n(this,e)}return i(e,null,[{key:"register",value:function(t){e._logger.debug("Register <"+t.id+"> polyfill"),e._polyfills.push(t)}},{key:"installAll",value:function(){e._logger.debug("Installing all polyfills");for(var t=0;t<e._polyfills.length;t++)e._polyfills[t].install()}}]),e}();s._polyfills=[],s._logger=(0,o.default)("PolyfillManager"),t.default=s},function(e,t,r){var n=r(4),i=r(2).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,r){var n=r(2),i=r(22),a=r(35),o=r(99),s=r(7).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t,r){var n=r(54)("keys"),i=r(34);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(2).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(4),i=r(1),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(19)(Function.call,r(17).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:a}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,r){var n=r(4),i=r(74).set;e.exports=function(e,t,r){var a,o=t.constructor;return o!==r&&"function"==typeof o&&(a=o.prototype)!==r.prototype&&n(a)&&i&&i(e,a),e}},function(e,t,r){"use strict";var n=r(25),i=r(24);e.exports=function(e){var t=String(i(this)),r="",a=n(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var r=Math.expm1;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},function(e,t,r){var n=r(25),i=r(24);e.exports=function(e){return function(t,r){var a,o,s=String(i(t)),u=n(r),l=s.length;return u<0||u>=l?e?"":void 0:(a=s.charCodeAt(u),a<55296||a>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?e?s.charAt(u):a:e?s.slice(u,u+2):o-56320+(a-55296<<10)+65536)}}},function(e,t,r){"use strict";var n=r(35),i=r(0),a=r(14),o=r(13),s=r(12),u=r(46),l=r(82),c=r(44),f=r(18),d=r(5)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,v,g,y,_){l(r,t,v);var m,E,b,T=function(e){if(!h&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},S=t+" Iterator",A="values"==g,k=!1,O=e.prototype,w=O[d]||O["@@iterator"]||g&&O[g],R=w||T(g),P=g?A?T("entries"):R:void 0,L="Array"==t?O.entries||w:w;if(L&&(b=f(L.call(new e)))!==Object.prototype&&b.next&&(c(b,S,!0),n||s(b,d)||o(b,d,p)),A&&w&&"values"!==w.name&&(k=!0,R=function(){return w.call(this)}),n&&!_||!h&&!k&&O[d]||o(O,d,R),u[t]=R,u[S]=p,g)if(m={values:A?R:T("values"),keys:y?R:T("keys"),entries:P},_)for(E in m)E in O||a(O,E,m[E]);else i(i.P+i.F*(h||k),t,m);return m}},function(e,t,r){"use strict";var n=r(38),i=r(33),a=r(44),o={};r(13)(o,r(5)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(o,{next:i(1,r)}),a(e,t+" Iterator")}},function(e,t,r){var n=r(58),i=r(24);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},function(e,t,r){var n=r(5)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,r){var n=r(46),i=r(5)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},function(e,t,r){"use strict";var n=r(7),i=r(33);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},function(e,t,r){var n=r(50),i=r(5)("iterator"),a=r(46);e.exports=r(22).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[n(e)]}},function(e,t,r){var n=r(234);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){"use strict";var n=r(9),i=r(37),a=r(8);e.exports=function(e){for(var t=n(this),r=a(t.length),o=arguments.length,s=i(o>1?arguments[1]:void 0,r),u=o>2?arguments[2]:void 0,l=void 0===u?r:i(u,r);l>s;)t[s++]=e;return t}},function(e,t,r){"use strict";var n=r(32),i=r(115),a=r(46),o=r(16);e.exports=r(81)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(e,t,r){var n,i,a,o=r(19),s=r(105),u=r(73),l=r(69),c=r(2),f=c.process,d=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,g=0,y={},_=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},m=function(e){_.call(e.data)};d&&h||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++g]=function(){s("function"==typeof e?e:Function(e),t)},n(g),g},h=function(e){delete y[e]},"process"==r(20)(f)?n=function(e){f.nextTick(o(_,e,1))}:v&&v.now?n=function(e){v.now(o(_,e,1))}:p?(i=new p,a=i.port2,i.port1.onmessage=m,n=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",m,!1)):n="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),_.call(e)}}:function(e){setTimeout(o(_,e,1),0)}),e.exports={set:d,clear:h}},function(e,t,r){var n=r(2),i=r(91).set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,u="process"==r(20)(o);e.exports=function(){var e,t,r,l=function(){var n,i;for(u&&(n=o.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){o.nextTick(l)};else if(a){var c=!0,f=document.createTextNode("");new a(l).observe(f,{characterData:!0}),r=function(){f.data=c=!c}}else if(s&&s.resolve){var d=s.resolve();r=function(){d.then(l)}}else r=function(){i.call(n,l)};return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=i(t),this.reject=i(r)}var i=r(10);e.exports.f=function(e){return new n(e)}},function(e,t,r){"use strict";function n(e,t,r){var n,i,a,o=Array(r),s=8*r-t-1,u=(1<<s)-1,l=u>>1,c=23===t?F(2,-24)-F(2,-77):0,f=0,d=e<0||0===e&&1/e<0?1:0;for(e=j(e),e!=e||e===x?(i=e!=e?1:0,n=u):(n=U(B(e)/G),e*(a=F(2,-n))<1&&(n--,a*=2),e+=n+l>=1?c/a:c*F(2,1-l),e*a>=2&&(n++,a/=2),n+l>=u?(i=0,n=u):n+l>=1?(i=(e*a-1)*F(2,t),n+=l):(i=e*F(2,l-1)*F(2,t),n=0));t>=8;o[f++]=255&i,i/=256,t-=8);for(n=n<<t|i,s+=t;s>0;o[f++]=255&n,n/=256,s-=8);return o[--f]|=128*d,o}function i(e,t,r){var n,i=8*r-t-1,a=(1<<i)-1,o=a>>1,s=i-7,u=r-1,l=e[u--],c=127&l;for(l>>=7;s>0;c=256*c+e[u],u--,s-=8);for(n=c&(1<<-s)-1,c>>=-s,s+=t;s>0;n=256*n+e[u],u--,s-=8);if(0===c)c=1-o;else{if(c===a)return n?NaN:l?-x:x;n+=F(2,t),c-=o}return(l?-1:1)*n*F(2,c-t)}function a(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function o(e){return[255&e]}function s(e){return[255&e,e>>8&255]}function u(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function l(e){return n(e,52,8)}function c(e){return n(e,23,4)}function f(e,t,r){O(e[P],t,{get:function(){return this[r]}})}function d(e,t,r,n){var i=+r,a=A(i);if(a+t>e[V])throw M(L);var o=e[H]._b,s=a+e[K],u=o.slice(s,s+t);return n?u:u.reverse()}function h(e,t,r,n,i,a){var o=+r,s=A(o);if(s+t>e[V])throw M(L);for(var u=e[H]._b,l=s+e[K],c=n(+i),f=0;f<t;f++)u[l+f]=c[a?f:t-f-1]}var p=r(2),v=r(6),g=r(35),y=r(64),_=r(13),m=r(43),E=r(3),b=r(41),T=r(25),S=r(8),A=r(124),k=r(39).f,O=r(7).f,w=r(89),R=r(44),P="prototype",L="Wrong index!",D=p.ArrayBuffer,C=p.DataView,I=p.Math,M=p.RangeError,x=p.Infinity,N=D,j=I.abs,F=I.pow,U=I.floor,B=I.log,G=I.LN2,H=v?"_b":"buffer",V=v?"_l":"byteLength",K=v?"_o":"byteOffset";if(y.ABV){if(!E(function(){D(1)})||!E(function(){new D(-1)})||E(function(){return new D,new D(1.5),new D(NaN),"ArrayBuffer"!=D.name})){D=function(e){return b(this,D),new N(A(e))};for(var Y,W=D[P]=N[P],q=k(N),X=0;q.length>X;)(Y=q[X++])in D||_(D,Y,N[Y]);g||(W.constructor=D)}var z=new C(new D(2)),J=C[P].setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||m(C[P],{setInt8:function(e,t){J.call(this,e,t<<24>>24)},setUint8:function(e,t){J.call(this,e,t<<24>>24)}},!0)}else D=function(e){b(this,D,"ArrayBuffer");var t=A(e);this._b=w.call(Array(t),0),this[V]=t},C=function(e,t,r){b(this,C,"DataView"),b(e,D,"DataView");var n=e[V],i=T(t);if(i<0||i>n)throw M("Wrong offset!");if(r=void 0===r?n-i:S(r),i+r>n)throw M("Wrong length!");this[H]=e,this[K]=i,this[V]=r},v&&(f(D,"byteLength","_l"),f(C,"buffer","_b"),f(C,"byteLength","_l"),f(C,"byteOffset","_o")),m(C[P],{getInt8:function(e){return d(this,1,e)[0]<<24>>24},getUint8:function(e){return d(this,1,e)[0]},getInt16:function(e){var t=d(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=d(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return a(d(this,4,e,arguments[1]))},getUint32:function(e){return a(d(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return i(d(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return i(d(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){h(this,1,e,o,t)},setUint8:function(e,t){h(this,1,e,o,t)},setInt16:function(e,t){h(this,2,e,s,t,arguments[2])},setUint16:function(e,t){h(this,2,e,s,t,arguments[2])},setInt32:function(e,t){h(this,4,e,u,t,arguments[2])},setUint32:function(e,t){h(this,4,e,u,t,arguments[2])},setFloat32:function(e,t){h(this,4,e,c,t,arguments[2])},setFloat64:function(e,t){h(this,8,e,l,t,arguments[2])}});R(D,"ArrayBuffer"),R(C,"DataView"),_(C[P],y.VIEW,!0),t.ArrayBuffer=D,t.DataView=C},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return i(e,null,[{key:"playbackUI",value:function(){}},{key:"idleUI",value:function(){}},{key:"adsUI",value:function(){}},{key:"liveUI",value:function(){}},{key:"errorUI",value:function(){}}]),e}(),o=function(){function e(){n(this,e)}return i(e,[{key:"buildCustomUI",value:function(){}},{key:"buildDefaultUI",value:function(){}},{key:"destroy",value:function(){}},{key:"setConfig",value:function(){}}]),e}(),s=function e(){n(this,e)};t.Presets=a,t.UIManager=o,t.EventType=s},function(e,t,r){t=e.exports=r(365)(void 0),t.push([e.i,".kaltura-player-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  background-color: #000;\n  outline: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n",""])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={PLAYLIST_LOADED:"kaltura-player-playlistloaded",PLAYLIST_ITEM_CHANGED:"kaltura-player-playlistitemchanged",PLAYLIST_ENDED:"kaltura-player-playlistended"};t.PlaylistEventType=n},function(e,t,r){e.exports=!r(6)&&!r(3)(function(){return 7!=Object.defineProperty(r(69)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){t.f=r(5)},function(e,t,r){var n=r(12),i=r(16),a=r(55)(!1),o=r(71)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),u=0,l=[];for(r in s)r!=o&&n(s,r)&&l.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~a(l,r)||l.push(r));return l}},function(e,t,r){var n=r(7),i=r(1),a=r(36);e.exports=r(6)?Object.defineProperties:function(e,t){i(e);for(var r,o=a(t),s=o.length,u=0;s>u;)n.f(e,r=o[u++],t[r]);return e}},function(e,t,r){var n=r(16),i=r(39).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?s(e):i(n(e))}},function(e,t,r){"use strict";var n=r(36),i=r(56),a=r(49),o=r(9),s=r(48),u=Object.assign;e.exports=!u||r(3)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=o(e),u=arguments.length,l=1,c=i.f,f=a.f;u>l;)for(var d,h=s(arguments[l++]),p=c?n(h).concat(c(h)):n(h),v=p.length,g=0;v>g;)f.call(h,d=p[g++])&&(r[d]=h[d]);return r}:u},function(e,t,r){"use strict";var n=r(10),i=r(4),a=r(105),o=[].slice,s={},u=function(e,t,r){if(!(t in s)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";s[t]=Function("F,a","return new F("+n.join(",")+")")}return s[t](e,r)};e.exports=Function.bind||function(e){var t=n(this),r=o.call(arguments,1),s=function(){var n=r.concat(o.call(arguments));return this instanceof s?u(t,n.length,n):a(t,n,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(2).parseInt,i=r(45).trim,a=r(75),o=/^[-+]?0[xX]/;e.exports=8!==n(a+"08")||22!==n(a+"0x16")?function(e,t){var r=i(String(e),3);return n(r,t>>>0||(o.test(r)?16:10))}:n},function(e,t,r){var n=r(2).parseFloat,i=r(45).trim;e.exports=1/n(r(75)+"-0")!=-1/0?function(e){var t=i(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},function(e,t,r){var n=r(20);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},function(e,t,r){var n=r(4),i=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,r){var n=r(78),i=Math.pow,a=i(2,-52),o=i(2,-23),s=i(2,127)*(2-o),u=i(2,-126),l=function(e){return e+1/a-1/a};e.exports=Math.fround||function(e){var t,r,i=Math.abs(e),c=n(e);return i<u?c*l(i/u/o)*u*o:(t=(1+o/a)*i,r=t-(t-i),r>s||r!=r?c*(1/0):c*r)}},function(e,t,r){var n=r(1);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},function(e,t,r){var n=r(10),i=r(9),a=r(48),o=r(8);e.exports=function(e,t,r,s,u){n(t);var l=i(e),c=a(l),f=o(l.length),d=u?f-1:0,h=u?-1:1;if(r<2)for(;;){if(d in c){s=c[d],d+=h;break}if(d+=h,u?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;u?d>=0:f>d;d+=h)d in c&&(s=t(s,c[d],d,l));return s}},function(e,t,r){"use strict";var n=r(9),i=r(37),a=r(8);e.exports=[].copyWithin||function(e,t){var r=n(this),o=a(r.length),s=i(e,o),u=i(t,o),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?o:i(l,o))-u,o-s),f=1;for(u<s&&s<u+c&&(f=-1,u+=c-1,s+=c-1);c-- >0;)u in r?r[s]=r[u]:delete r[s],s+=f,u+=f;return r}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){r(6)&&"g"!=/./g.flags&&r(7).f(RegExp.prototype,"flags",{configurable:!0,get:r(60)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(1),i=r(4),a=r(93);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";var n=r(120),i=r(47);e.exports=r(63)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},function(e,t,r){"use strict";var n=r(7).f,i=r(38),a=r(43),o=r(19),s=r(41),u=r(42),l=r(81),c=r(115),f=r(40),d=r(6),h=r(31).fastKey,p=r(47),v=d?"_s":"size",g=function(e,t){var r,n=h(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,l){var c=e(function(e,n){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=n&&u(n,r,e[l],e)});return a(c.prototype,{clear:function(){for(var e=p(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var r=p(this,t),n=g(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[v]--}return!!n},forEach:function(e){p(this,t);for(var r,n=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!g(p(this,t),e)}}),d&&n(c.prototype,"size",{get:function(){return p(this,t)[v]}}),c},def:function(e,t,r){var n,i,a=g(e,t);return a?a.v=r:(e._l=a={i:i=h(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[v]++,"F"!==i&&(e._i[i]=a)),e},getEntry:g,setStrong:function(e,t,r){l(e,t,function(e,r){this._t=p(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?c(0,r.k):"values"==t?c(0,r.v):c(0,[r.k,r.v]):(e._t=void 0,c(1))},r?"entries":"values",!r,!0),f(t)}}},function(e,t,r){"use strict";var n=r(120),i=r(47);e.exports=r(63)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n,i=r(27)(0),a=r(14),o=r(31),s=r(103),u=r(123),l=r(4),c=r(3),f=r(47),d=o.getWeak,h=Object.isExtensible,p=u.ufstore,v={},g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(l(e)){var t=d(e);return!0===t?p(f(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(f(this,"WeakMap"),e,t)}},_=e.exports=r(63)("WeakMap",g,y,u,!0,!0);c(function(){return 7!=(new _).set((Object.freeze||Object)(v),7).get(v)})&&(n=u.getConstructor(g,"WeakMap"),s(n.prototype,y),o.NEED=!0,i(["delete","has","get","set"],function(e){var t=_.prototype,r=t[e];a(t,e,function(t,i){if(l(t)&&!h(t)){this._f||(this._f=new n);var a=this._f[e](t,i);return"set"==e?this:a}return r.call(this,t,i)})}))},function(e,t,r){"use strict";var n=r(43),i=r(31).getWeak,a=r(1),o=r(4),s=r(41),u=r(42),l=r(27),c=r(12),f=r(47),d=l(5),h=l(6),p=0,v=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},y=function(e,t){return d(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var r=y(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,a){var l=e(function(e,n){s(e,l,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=n&&u(n,r,e[a],e)});return n(l.prototype,{delete:function(e){if(!o(e))return!1;var r=i(e);return!0===r?v(f(this,t)).delete(e):r&&c(r,this._i)&&delete r[this._i]},has:function(e){if(!o(e))return!1;var r=i(e);return!0===r?v(f(this,t)).has(e):r&&c(r,this._i)}}),l},def:function(e,t,r){var n=i(a(t),!0);return!0===n?v(e).set(t,r):n[e._i]=r,e},ufstore:v}},function(e,t,r){var n=r(25),i=r(8);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw RangeError("Wrong length!");return r}},function(e,t,r){var n=r(39),i=r(56),a=r(1),o=r(2).Reflect;e.exports=o&&o.ownKeys||function(e){var t=n.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},function(e,t,r){"use strict";function n(e,t,r,l,c,f,d,h){for(var p,v,g=c,y=0,_=!!d&&s(d,h,3);y<l;){if(y in r){if(p=_?_(r[y],y,t):r[y],v=!1,a(p)&&(v=p[u],v=void 0!==v?!!v:i(p)),v&&f>0)g=n(e,t,p,o(p.length),g,f-1)-1;else{if(g>=9007199254740991)throw TypeError();e[g]=p}g++}y++}return g}var i=r(57),a=r(4),o=r(8),s=r(19),u=r(5)("isConcatSpreadable");e.exports=n},function(e,t,r){var n=r(8),i=r(77),a=r(24);e.exports=function(e,t,r,o){var s=String(a(e)),u=s.length,l=void 0===r?" ":String(r),c=n(t);if(c<=u||""==l)return s;var f=c-u,d=i.call(l,Math.ceil(f/l.length));return d.length>f&&(d=d.slice(0,f)),o?d+s:s+d}},function(e,t,r){var n=r(36),i=r(16),a=r(49).f;e.exports=function(e){return function(t){for(var r,o=i(t),s=n(o),u=s.length,l=0,c=[];u>l;)a.call(o,r=s[l++])&&c.push(e?[r,o[r]]:o[r]);return c}}},function(e,t,r){var n=r(50),i=r(130);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,r){var n=r(42);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t){e.exports=Math.scale||function(e,t,r,n,i){return 0===arguments.length||e!=e||t!=t||r!=r||n!=n||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-n)/(r-t)+n}},function(e,t,r){!function(t,r){e.exports=r()}(0,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=48)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(4),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;n(this,e),this._attemptCounter=1,this.headers=t}return i(e,[{key:"getUrl",value:function(e){return e+"/service/"+this.service+(this.action?"/action/"+this.action:"")}},{key:"doHttpRequest",value:function(){var e=this,t=new Promise(function(t,r){e._requestPromise={resolve:t,reject:r}});return this.url||this._requestPromise.reject(new o.default(o.default.Severity.CRITICAL,o.default.Category.NETWORK,o.default.Code.MALFORMED_DATA_URI,{url:this.url})),this._createXHR(),t}},{key:"_createXHR",value:function(){var e=this,t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status)try{var r=JSON.parse(t.responseText);return e.responseHeaders=e._getResponseHeaders(t),e._requestPromise.resolve(r)}catch(r){e._requestPromise.reject(e._createError(t,o.default.Code.BAD_SERVER_RESPONSE,{text:t.responseText}))}},t.open(this.method,this.url),t.timeout=this.retryConfig.timeout||0;var r=performance.now();t.ontimeout=function(){e._handleError(t,o.default.Code.TIMEOUT,{timeout:(performance.now()-r)/1e3,statusText:t.statusText})},t.onerror=t.onabort=function(){e._handleError(t,o.default.Code.HTTP_ERROR,{text:t.responseText,statusText:t.statusText})},this.headers.forEach(function(e,r){t.setRequestHeader(r,e)}),t.send(this.params)}},{key:"_getResponseHeaders",value:function(e){return e.getAllResponseHeaders().split("\n").filter(function(e){return 0===e.toLowerCase().indexOf("x-")})}},{key:"_handleError",value:function(e,t,r){var n=this._createError(e,t,r);if(e.onreadystatechange=function(){},e.onerror=function(){},e.ontimeout=function(){},e.onabort=function(){},!(this.retryConfig.maxAttempts&&this._attemptCounter<this.retryConfig.maxAttempts))return this._requestPromise.reject(n);this._attemptCounter++,this._createXHR()}},{key:"_createError",value:function(e,t,r){return Object.assign(r,{url:this.url,headers:this._getResponseHeaders(e),attempt:this._attemptCounter}),new o.default(o.default.Severity.CRITICAL,o.default.Category.NETWORK,t,r)}}]),e}();t.default=s},function(e,t,r){"use strict";function n(e){return e?s.get(e):s}function i(e){return n(e).getLevel()}function a(e,t){n(t).setLevel(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var o=r(27),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),u={DEBUG:s.DEBUG,INFO:s.INFO,TIME:s.TIME,WARN:s.WARN,ERROR:s.ERROR,OFF:s.OFF};s.useDefaults({defaultLevel:s.ERROR}),t.default=n,t.LogLevel=u,t.getLogLevel=i,t.setLogLevel=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){n(this,e),this.hasError=!1,"KalturaAPIException"===t.objectType?(this.hasError=!0,this.error=new a(t.code,t.message)):t.error&&"KalturaAPIException"===t.error.objectType?(this.hasError=!0,this.error=new a(t.error.code,t.error.message)):this.data=t};t.default=i;var a=function e(t,r){n(this,e),this.code=t,this.message=r}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.OVPConfiguration=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(23),o={serviceUrl:"https://cdnapisec.kaltura.com/api_v3",cdnUrl:"https://cdnapisec.kaltura.com",serviceParams:{apiVersion:"3.3.0",format:1},experimentalLoadApiCaptions:!1},s=function(){function e(){n(this,e)}return i(e,null,[{key:"set",value:function(e){e&&Object.assign(o,e)}},{key:"get",value:function(){return(0,a.clone)(o)}}]),e}();t.default=s,t.OVPConfiguration=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=r(26),s=r(25),u=r(24),l=function e(t,r,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(this,e),this.severity=t,this.category=r,this.code=a,this.data=o,(0,i.getLogLevel)("Error")!==i.LogLevel.OFF&&e._logger.error("Category:"+r+" | Code:"+a+" |",o)};l.Severity=o.Severity,l.Category=u.Category,l.Code=s.Code,l._logger=(0,a.default)("Error"),t.default=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(11),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(){n(this,e),this.metadata=new Map,this.sources=new o.default,this.type=e.Type.UNKNOWN}return i(e,[{key:"toJSON",value:function(){return{id:this.id,name:this.name,sources:this.sources.toJSON(),duration:this.duration,dvrStatus:this.dvrStatus,metadata:this.metadata,type:this.type,poster:this.poster,assetReferenceType:this.assetReferenceType}}}]),e}();s.Type={VOD:"Vod",LIVE:"Live",IMAGE:"Image",AUDIO:"Audio",UNKNOWN:"Unknown"},t.default=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(13),s=n(o),u=r(3),l=n(u),c=function(){function e(){i(this,e)}return a(e,null,[{key:"getMultiRequest",value:function(e,t,r){var n=l.default.get(),i=n.serviceParams;Object.assign(i,{ks:t,clientTag:"html5:v"+e}),r&&Object.assign(i,{partnerId:r});var a=new Map;a.set("Content-Type","application/json");var o=new s.default(a);return o.method="POST",o.service="multirequest",o.url=o.getUrl(n.serviceUrl),o.params=i,o}}]),e}();t.default=c},,function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r,i){n(this,e),this.licenseUrl=t,this.scheme=r,i&&(this.certificate=i)}return i(e,[{key:"toJSON",value:function(){var e={licenseUrl:this.licenseUrl,scheme:this.scheme};return this.certificate&&(e.certificate=this.certificate),e}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e){var t=a.get(e);return!!t&&t.name===i.MP4.name}Object.defineProperty(t,"__esModule",{value:!0});var i=t.MediaFormat={DASH:{name:"dash",mimeType:"application/dash+xml",pathExt:"mpd"},HLS:{name:"hls",mimeType:"application/x-mpegURL",pathExt:"m3u8"},WVM:{name:"wvm",mimeType:"video/wvm",pathExt:"wvm"},MP4:{name:"mp4",mimeType:"video/mp4",pathExt:"mp4"},MP3:{name:"mp3",mimeType:"audio/mpeg",pathExt:"mp3"}},a=t.SupportedStreamFormat=new Map([["mpegdash",i.DASH],["applehttp",i.HLS],["url",i.MP4]]);t.isProgressiveSource=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(8),o=(function(e){e&&e.__esModule}(a),function(){function e(){n(this,e)}return i(e,[{key:"toJSON",value:function(){var e={id:this.id,url:this.url,mimetype:this.mimetype};return this.bandwidth&&(e.bandwidth=this.bandwidth),this.width&&(e.width=this.width),this.height&&(e.height=this.height),this.label&&(e.label=this.label),this.drmData&&this.drmData.length>0&&(e.drmData=[],this.drmData.forEach(function(t){Array.isArray(e.drmData)&&e.drmData.push(t.toJSON())})),e}}]),e}());t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(10),o=(function(e){e&&e.__esModule}(a),r(9)),s=function(){function e(){n(this,e),this.progressive=[],this.dash=[],this.hls=[]}return i(e,[{key:"map",value:function(e,t){if(t)switch(t.name){case o.MediaFormat.MP4.name:this.progressive.push(e);break;case o.MediaFormat.DASH.name:this.dash.push(e);break;case o.MediaFormat.HLS.name:this.hls.push(e)}}},{key:"toJSON",value:function(){var e={progressive:[],dash:[],hls:[]};return this.progressive.forEach(function(t){return e.progressive.push(t.toJSON())}),this.hls.forEach(function(t){return e.hls.push(t.toJSON())}),this.dash.forEach(function(t){return e.dash.push(t.toJSON())}),e}}]),e}();t.default=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(13),s=(n(o),r(4)),u=n(s),l=function(){function e(t){i(this,e),this._loaders=new Map,this._networkRetryConfig=t}return a(e,[{key:"add",value:function(t,r){var n=this,i=new t(r);if(i.isValid()){this._loaders.set(t.id,i);var a=this._multiRequest.requests.length,o=i.requests;this._multiRequest.retryConfig=this._networkRetryConfig,o.forEach(function(e){n._multiRequest.add(e)});var s=Array.from(new Array(o.length),function(e,t){return t+a});e._loadersResponseMap.set(t.id,s)}}},{key:"fetchData",value:function(){var e=this;return new Promise(function(t,r){e._multiRequest.execute().then(function(n){e._multiResponse=n.response,e.prepareData(n.response).success?t(e._loaders):r(new u.default(u.default.Severity.CRITICAL,u.default.Category.NETWORK,u.default.Code.API_RESPONSE_MISMATCH,{headers:n.headers}))},function(e){r(e)})})}},{key:"prepareData",value:function(t){return this._loaders.forEach(function(r,n){var i=e._loadersResponseMap.get(n);try{i&&i.length>0&&(r.response=t.results.slice(i[0],i[i.length-1]+1))}catch(e){return{success:!1,error:e}}}),{success:!0,data:this._loaders}}}]),e}();l._loadersResponseMap=new Map,t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MultiRequestResult=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(0),c=n(l),f=r(1),d=n(f),h=r(2),p=n(h),v=r(4),g=n(v),y=function(e){function t(){var e,r,n,i;a(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.requests=[],i=r,o(n,i)}return s(t,e),u(t,[{key:"add",value:function(e){this.requests.push(e);var t={},r={service:e.service,action:e.action};return Object.assign(t,i({},this.requests.length,Object.assign(r,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:"execute",value:function(){var e=this;return new Promise(function(r,n){try{e.params=JSON.stringify(e.params)}catch(r){t._logger.error(""+r.message),n(new g.default(g.default.Severity.CRITICAL,g.default.Category.PROVIDER,g.default.Code.FAILED_PARSING_REQUEST,{error:r,params:e.params}))}e.doHttpRequest().then(function(t){var i=new _(t);i.success?r({headers:e.responseHeaders,response:i}):n(new g.default(g.default.Severity.CRITICAL,g.default.Category.NETWORK,g.default.Code.MULTIREQUEST_API_ERROR,{url:e.url,headers:e.responseHeaders,results:i.results}))},function(e){n(e)})})}}]),t}(c.default);y._logger=(0,d.default)("MultiRequestBuilder"),t.default=y;var _=t.MultiRequestResult=function e(t){var r=this;a(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var n=new p.default(t);if(r.results.push(n),n.hasError)return e._logger.error("Service returned an error with error code: "+n.error.code+" and message: "+n.error.message+"."),void(r.success=!1)})};_._logger=(0,d.default)("MultiRequestResult")},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){n(this,e),this.message=t.message,this.code=t.code};t.default=i},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){n(this,e),this.scheme=t.scheme,this.licenseURL=t.licenseURL,this.certificate=t.certificate};i.Scheme={"drm.PLAYREADY_CENC":"com.microsoft.playready","drm.WIDEVINE_CENC":"com.widevine.alpha","fairplay.FAIRPLAY":"com.apple.fairplay",WIDEVINE_CENC:"com.widevine.alpha",PLAYREADY_CENC:"com.microsoft.playready",FAIRPLAY:"com.apple.fairplay"},t.default=i},,,function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){n(this,e),this.id=t.id,this.name=t.name,this.description=t.description,this.dataUrl=t.dataUrl,this.type=t.type,this.entryType=t.mediaType,this.flavorParamsIds=t.flavorParamsIds,this.duration=t.duration,this.poster=t.thumbnailUrl,this.dvrStatus=t.dvrStatus,this.tags=t.tags};i.EntryType={AUTOMATIC:{value:-1},EXTERNAL_MEDIA:{value:"externalMedia.externalMedia"},MEDIA_CLIP:{value:1},MIX:{value:2},PLAYLIST:{value:5},DATA:{value:6},LIVE_STREAM:{value:7},LIVE_CHANNEL:{value:8},DOCUMENT:{value:10}},i.MediaType={VIDEO:{value:1},IMAGE:{value:2},AUDIO:{value:5},LIVE_STREAM_FLASH:{value:201},LIVE_STREAM_WINDOWS_MEDIA:{value:202},LIVE_STREAM_REAL_MEDIA:{value:203},LIVE_STREAM_QUICK_TIME:{value:204}},i.EntryStatus={ERROR_IMPORTING:-2,ERROR_CONVERTING:-1,SCAN_FAILURE:"virusScan.ScanFailure",IMPORT:0,INFECTED:"virusScan.Infected",PRECONVERT:1,READY:2,DELETED:3,PENDING:4,MODERATE:5,BLOCKED:6,NO_CONTENT:7},i.EntryModerationStatus={PENDING_MODERATION:1,APPROVED:2,REJECTED:3,FLAGGED_FOR_REVIEW:4,MODERATE:5,AUTO_APPROVED:6},t.default=i},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),a=(function(e){e&&e.__esModule}(i),function e(){n(this,e),this.items=[]});t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(1),o=r(12),s=(function(e){e&&e.__esModule}(o),function(){function e(t,r){n(this,e),this._networkRetryConfig={timeout:0,maxAttempts:4},this._partnerId=t.partnerId,this._uiConfId=t.uiConfId,this._isAnonymous=!t.ks,this._ks=t.ks||"",this._playerVersion=r,t.logLevel&&this.LogLevel[t.logLevel]&&(0,a.setLogLevel)(this.LogLevel[t.logLevel])}return i(e,[{key:"partnerId",get:function(){return this._partnerId}},{key:"uiConfId",get:function(){return this._uiConfId}},{key:"ks",get:function(){return this._ks},set:function(e){this._ks=e}},{key:"playerVersion",get:function(){return this._playerVersion}},{key:"isAnonymous",get:function(){return this._isAnonymous}}]),i(e,[{key:"getMediaConfig",value:function(e){throw new TypeError("getMediaConfig method must be implement by the derived class")}},{key:"_parseDataFromResponse",value:function(e){throw new TypeError("_parseDataFromResponse method must be implement by the derived class")}},{key:"getLogLevel",value:function(e){return(0,a.getLogLevel)(e)}},{key:"setLogLevel",value:function(e,t){(0,a.setLogLevel)(e,t)}},{key:"LogLevel",get:function(){return a.LogLevel}}]),e}());t.default=s},,function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){n(this,e),this.type=t.type};i.Type={DRM_POLICY:"drm.DRM_POLICY",BLOCK:1,PREVIEW:2,LIMIT_FLAVORS:3,ADD_TO_STORAGE:4,LIMIT_DELIVERY_PROFILES:5,SERVE_FROM_REMOTE_SERVER:6,REQUEST_HOST_REGEX:7,LIMIT_THUMBNAIL_CAPTURE:8},t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function e(t){var r=void 0;return Array.isArray(t)?(r=t.length>0?t.slice(0):[],r.forEach(function(t,i){("object"===(void 0===t?"undefined":n(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(r[i]=e(t))})):"object"===(void 0===t?"undefined":n(t))?(r=Object.assign({},t),Object.keys(r).forEach(function(t){("object"===n(r[t])&&r[t]!=={}||Array.isArray(r[t])&&r[t].length>0)&&(r[t]=e(r[t]))})):r=t,r};t.clone=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={NETWORK:1,SERVICE:2,PROVIDER:3};t.Category=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,BAD_SERVER_RESPONSE:1005,MULTIREQUEST_API_ERROR:1006,API_RESPONSE_MISMATCH:1007,ERROR:2e3,BLOCK_ACTION:2001,MISSING_MANDATORY_PARAMS:3e3};t.Code=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={RECOVERABLE:1,CRITICAL:2};t.Severity=n},function(e,t,r){var n,i;/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(a){"use strict";var o={};o.VERSION="1.4.1";var s,u={},l=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,r=arguments,n=r[0];for(t=1;t<r.length;t++)for(e in r[t])e in n||!r[t].hasOwnProperty(e)||(n[e]=r[t][e]);return n},f=function(e,t){return{value:e,name:t}};o.DEBUG=f(1,"DEBUG"),o.INFO=f(2,"INFO"),o.TIME=f(3,"TIME"),o.WARN=f(4,"WARN"),o.ERROR=f(8,"ERROR"),o.OFF=f(99,"OFF");var d=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};d.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(o.DEBUG,arguments)},info:function(){this.invoke(o.INFO,arguments)},warn:function(){this.invoke(o.WARN,arguments)},error:function(){this.invoke(o.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"end"])},invoke:function(e,t){s&&this.enabledFor(e)&&s(t,c({level:e},this.context))}};var h=new d({filterLevel:o.OFF});!function(){var e=o;e.enabledFor=l(h,h.enabledFor),e.debug=l(h,h.debug),e.time=l(h,h.time),e.timeEnd=l(h,h.timeEnd),e.info=l(h,h.info),e.warn=l(h,h.warn),e.error=l(h,h.error),e.log=e.info}(),o.setHandler=function(e){s=e},o.setLevel=function(e){h.setLevel(e);for(var t in u)u.hasOwnProperty(t)&&u[t].setLevel(e)},o.getLevel=function(){return h.getLevel()},o.get=function(e){return u[e]||(u[e]=new d(c({name:e},h.context)))},o.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},r=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(n,i){n=Array.prototype.slice.call(n);var a,s=console.log;i.level===o.TIME?(a=(i.name?"["+i.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):r(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(i.level===o.WARN&&console.warn?s=console.warn:i.level===o.ERROR&&console.error?s=console.error:i.level===o.INFO&&console.info?s=console.info:i.level===o.DEBUG&&console.debug&&(s=console.debug),e.formatter(n,i),r(s,n))}},o.useDefaults=function(e){o.setLevel(e&&e.defaultLevel||o.DEBUG),o.setHandler(o.createDefaultHandler(e))},n=o,void 0!==(i="function"==typeof n?n.call(t,r,t,e):n)&&(e.exports=i)}()},,,,function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.type=t.type||e.Type.INCLUDE_FIELDS,this.fields=t.fields||"id,name,description,thumbnailUrl,dataUrl,duration,msDuration,flavorParamsIds,mediaType,type,tags,dvrStatus"};i.Type={INCLUDE_FIELDS:1,EXCLUDE_FIELDS:2},t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),u=n(s),l=r(18),c=n(l),f=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.hasError||(r.totalCount=e.totalCount,r.totalCount>0&&(r.entries=[],e.objects.map(function(e){return r.entries.push(new c.default(e))}))),r}return o(t,e),t}(u.default);t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),u=n(s),l=r(60),c=n(l),f=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.hasError||(r.totalCount=e.totalCount,r.totalCount>0&&(r.metas=[],e.objects.map(function(e){return r.metas.push(new c.default(e))}))),r}return o(t,e),t}(u.default);t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(2),l=n(u),c=r(14),f=n(c),d=r(35),h=n(d),p=r(56),v=n(p),g=r(22),y=n(g),_=r(58),m=n(_),E=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.sources=[],r.actions=[],r.messages=[],r.flavorAssets=[],!r.hasError){var n=e.messages;n&&n.map(function(e){return r.messages.push(new f.default(e))});var o=e.actions;o&&o.map(function(e){e.type===y.default.Type.REQUEST_HOST_REGEX?r.actions.push(new v.default(e)):r.actions.push(new y.default(e))});var s=e.sources;s&&s.map(function(e){return r.sources.push(new h.default(e))});var u=e.flavorAssets;u&&u.map(function(e){return r.flavorAssets.push(new m.default(e))})}return r}return o(t,e),s(t,[{key:"hasBlockAction",value:function(){return void 0!==this.getBlockAction()}},{key:"getBlockAction",value:function(){return this.actions.find(function(e){return e.type===y.default.Type.BLOCK})}},{key:"getErrorMessages",value:function(){return this.messages}},{key:"getRequestHostRegexAction",value:function(){var e=this.actions.find(function(e){return e.type===y.default.Type.REQUEST_HOST_REGEX});if(e instanceof v.default)return e}}]),t}(l.default);t.default=E},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(15),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t){var r=this;n(this,e),this.drm=[],this.format=t.format,this.deliveryProfileId=t.deliveryProfileId,this.url=t.url,this.protocols=t.protocols,this.flavorIds=t.flavorIds,t.drm&&t.drm.map(function(e){return r.drm.push(new o.default(e))})}return i(e,[{key:"hasDrmData",value:function(){return this.drm&&this.drm.length>0}},{key:"hasFlavorIds",value:function(){return!!this.flavorIds&&this.flavorIds.length>0}},{key:"getProtocol",value:function(e){var t="";if(this.protocols&&this.protocols.length>0)this.protocols.split(",").forEach(function(r){r===e&&(t=r)});else if("http"===e)return e;return t}}]),e}();t.default=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(6),l=n(u),c=r(0),f=n(c),d=r(31),h=n(d),p=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"getPlaybackContext",value:function(e,t,r){var n=new Map;n.set("Content-Type","application/json");var i=new f.default(n);i.service="baseEntry",i.action="getPlaybackContext",i.method="POST",i.url=i.getUrl(e),i.tag="baseEntry-getPlaybackContext";var a={objectType:"KalturaContextDataParams",flavorTags:"all"};return i.params={entryId:r,ks:t,contextDataParams:a},i}},{key:"list",value:function(e,r,n,i){var a=new Map;a.set("Content-Type","application/json");var o=new f.default(a);return o.service="baseEntry",o.action="list",o.method="POST",o.url=o.getUrl(e),o.tag="list",o.params=t.getEntryListReqParams(n,r,i),o}},{key:"getEntryListReqParams",value:function(e,t,r){return{ks:t,filter:r?{redirectFromEntryId:e}:{idEqual:e},responseProfile:new h.default}}}]),t}(l.default);t.default=p},,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),l=n(u),c=r(3),f=n(c),d=r(55),h=n(d),p=r(51),v=n(p),g=r(53),y=n(g),_=r(49),m=n(_),E=r(52),b=n(E),T=r(20),S=n(T),A=r(5),k=n(A),O=r(50),w=n(O),R=r(4),P=n(R),L=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n._filterOptionsConfig={redirectFromEntryId:!0},n._logger=(0,l.default)("OVPProvider"),f.default.set(e.env),n._setFilterOptionsConfig(e.filterOptions),n._networkRetryConfig=Object.assign(n._networkRetryConfig,e.networkRetryParameters),n}return o(t,e),s(t,[{key:"getMediaConfig",value:function(e){var t=this;return e.ks&&(this.ks=e.ks,this._isAnonymous=!1),this._dataLoader=new m.default(this.playerVersion,this.partnerId,this.ks,this._networkRetryConfig),new Promise(function(r,n){var i=e.entryId;if(i){var a=t.ks;a||(a="{1:result:ks}",t._dataLoader.add(y.default,{partnerId:t.partnerId}));var o=t._getEntryRedirectFilter(e);return t._dataLoader.add(v.default,{entryId:i,ks:a,redirectFromEntryId:o}),t._dataLoader.fetchData().then(function(e){try{r(t._parseDataFromResponse(e))}catch(e){n(e)}},function(e){n(e)})}n(new P.default(P.default.Severity.CRITICAL,P.default.Category.PROVIDER,P.default.Code.MISSING_MANDATORY_PARAMS,{message:"missing entry id"}))})}},{key:"_getEntryRedirectFilter",value:function(e){return"boolean"==typeof e.redirectFromEntryId?e.redirectFromEntryId:"boolean"!=typeof this._filterOptionsConfig.redirectFromEntryId||this._filterOptionsConfig.redirectFromEntryId}},{key:"_setFilterOptionsConfig",value:function(e){e&&"boolean"==typeof e.redirectFromEntryId&&(this._filterOptionsConfig.redirectFromEntryId=e.redirectFromEntryId)}},{key:"_parseDataFromResponse",value:function(e){this._logger.debug("Data parsing started");var t={session:{isAnonymous:this._isAnonymous,partnerId:this.partnerId},sources:this._getDefaultSourcesObject(),plugins:{}};if(this.uiConfId&&(t.session.uiConfId=this.uiConfId),e){if(e.has(y.default.id)){var r=e.get(y.default.id);r&&r.response&&(this.ks=r.response,t.session.ks=this.ks)}else t.session.ks=this.ks;if(e.has(v.default.id)){var n=e.get(v.default.id);if(n&&n.response){var i=n.response;if(h.default.hasBlockAction(i))throw new P.default(P.default.Severity.CRITICAL,P.default.Category.SERVICE,P.default.Code.BLOCK_ACTION,{action:h.default.getBlockAction(i),messages:h.default.getErrorMessages(i)});var a=h.default.getMediaEntry(this.isAnonymous?"":this.ks,this.partnerId,this.uiConfId,i);Object.assign(t.sources,this._getSourcesObject(a))}}}return this._logger.debug("Data parsing finished",t),t}},{key:"getPlaylistConfig",value:function(e){var t=this;return e.ks&&(this.ks=e.ks,this._isAnonymous=!1),this._dataLoader=new m.default(this.playerVersion,this.partnerId,this.ks,this._networkRetryConfig),new Promise(function(r,n){var i=e.playlistId;if(i){var a=t.ks;a||(a="{1:result:ks}",t._dataLoader.add(y.default,{partnerId:t.partnerId})),t._dataLoader.add(b.default,{playlistId:i,ks:a}),t._dataLoader.fetchData().then(function(e){r(t._parsePlaylistDataFromResponse(e))},function(e){n(e)})}else n({success:!1,data:"Missing mandatory parameter"})})}},{key:"_parsePlaylistDataFromResponse",value:function(e){var t=this;this._logger.debug("Data parsing started");var r=this._getPlaylistObject();if(e&&e.has(b.default.id)){var n=e.get(b.default.id);if(n&&n.response){var i=h.default.getPlaylist(n.response);r.id=i.id,r.poster=i.poster,r.metadata.name=i.name,r.metadata.description=i.description,i.items.forEach(function(e){return r.items.push({sources:t._getSourcesObject(e)})})}}return this._logger.debug("Data parsing finished",r),r}},{key:"getEntryListConfig",value:function(e){var t=this;return e.ks&&(this.ks=e.ks,this._isAnonymous=!1),this._dataLoader=new m.default(this.playerVersion,this.partnerId,this.ks,this._networkRetryConfig),new Promise(function(r,n){var i=e.entries;if(i&&i.length){var a=t.ks;a||(a="{1:result:ks}",t._dataLoader.add(y.default,{partnerId:t.partnerId}));var o=t._getEntryRedirectFilter(e);t._dataLoader.add(w.default,{entries:i,ks:a,redirectFromEntryId:o}),t._dataLoader.fetchData().then(function(e){r(t._parseEntryListDataFromResponse(e))},function(e){n(e)})}else n({success:!1,data:"Missing mandatory parameter"})})}},{key:"_parseEntryListDataFromResponse",value:function(e){var t=this;this._logger.debug("Data parsing started");var r=this._getPlaylistObject();if(e&&e.has(w.default.id)){var n=e.get(w.default.id);n&&n.response&&h.default.getEntryList(n.response).items.forEach(function(e){return r.items.push({sources:t._getSourcesObject(e)})})}return this._logger.debug("Data parsing finished",r),r}},{key:"_getPlaylistObject",value:function(){return{id:"",metadata:{name:"",description:""},poster:"",items:[]}}},{key:"_getDefaultSourcesObject",value:function(){return{hls:[],dash:[],progressive:[],id:"",duration:0,type:k.default.Type.UNKNOWN,poster:"",dvr:!1,vr:null,metadata:{name:"",description:"",tags:""}}}},{key:"_getSourcesObject",value:function(e){var t=this._getDefaultSourcesObject(),r=e.sources.toJSON();return t.hls=r.hls,t.dash=r.dash,t.progressive=r.progressive,t.id=e.id,t.duration=e.duration,t.type=e.type,t.dvr=!!e.dvrStatus,t.poster=e.poster,e.sources.captions&&(t.captions=e.sources.captions),e.metadata&&"string"==typeof e.metadata.tags&&e.metadata.tags.indexOf("360")>-1&&(t.vr={}),Object.assign(t.metadata,e.metadata),t}}]),t}(S.default);t.default=L},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),a=(function(e){e&&e.__esModule}(i),function e(){n(this,e),this.items=[]});t.default=a},,,,,,,,function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalCaptionsBuilder=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(3),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s={SRT:"1",DFXP:"2",WEBVTT:"3",CAP:"4"},u={WEBVTT:"vtt"},l="index.php/service/caption_captionasset/action/serveWebVTT/captionAssetId/ASSET_ID/segmentIndex/-1/version/2/captions.vtt",c=function(){function e(){n(this,e)}return i(e,null,[{key:"createConfig",value:function(t,r){return t.filter(function(e){return[s.WEBVTT,s.SRT].includes(e.format)}).map(function(t){return{type:u.WEBVTT,language:t.language,label:t.label,url:e.createUrl(t,r)}})}},{key:"createUrl",value:function(e,t){var r=o.default.get(),n=l.split("/");return n[6]=e.id,n[10]=e.version,n=n.join("/"),t=t?"/ks/"+t:"",r.serviceUrl+"/"+n+t}}]),e}();t.ExternalCaptionsBuilder=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.NAME=t.Provider=void 0;var n=r(38),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.Provider=i.default,t.NAME="playkit-js-providers-ovp",t.VERSION="2.14.0"},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(12),u=n(s),l=r(6),c=n(l),f=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments[3];i(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o));return s._multiRequest=c.default.getMultiRequest(e,n,r),s}return o(t,e),t}(u.default);t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),s=(n(o),r(3)),u=n(s),l=r(36),c=n(l),f=r(32),d=n(f),h=function(){function e(t){i(this,e),this._response={playlistItems:{entries:[]}},this.requests=this.buildRequests(t),this._entries=t.entries}return a(e,null,[{key:"id",get:function(){return"entry_list"}}]),a(e,[{key:"buildRequests",value:function(e){var t=u.default.get(),r=[];return e.entries.forEach(function(n){r.push(c.default.list(t.serviceUrl,e.ks,n.entryId||n,e.redirectFromEntryId))}),r}},{key:"isValid",value:function(){return!(!this._entries||!this._entries.length)}},{key:"requests",set:function(e){this._requests=e},get:function(){return this._requests}},{key:"response",set:function(e){var t=this,r=void 0;e.forEach(function(e){r=new d.default(e.data),t._response.playlistItems.entries.push(r.entries[0])})},get:function(){return this._response}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),s=(n(o),r(36)),u=n(s),l=r(63),c=n(l),f=r(3),d=n(f),h=r(34),p=n(h),v=r(33),g=n(v),y=r(32),_=n(y),m=r(18),E=(n(m),r(62)),b=n(E),T=r(57),S=n(T),A=function(){function e(t){i(this,e),this._response={},this.requests=this.buildRequests(t),this._entryId=t.entryId}return a(e,null,[{key:"id",get:function(){return"media"}}]),a(e,[{key:"buildRequests",value:function(e){var t=d.default.get(),r=[];return r.push(u.default.list(t.serviceUrl,e.ks,e.entryId,e.redirectFromEntryId)),r.push(u.default.getPlaybackContext(t.serviceUrl,e.ks,e.entryId)),r.push(c.default.list(t.serviceUrl,e.ks,e.entryId)),t.experimentalLoadApiCaptions&&r.push(b.default.list(t.serviceUrl,e.ks,e.entryId)),r}},{key:"isValid",value:function(){return!!this._entryId}},{key:"requests",set:function(e){this._requests=e},get:function(){return this._requests}},{key:"response",set:function(e){var t=d.default.get(),r=new _.default(e[0].data);this._response.entry=r.entries[0],this._response.playBackContextResult=new p.default(e[1].data),this._response.metadataListResult=new g.default(e[2].data),t.experimentalLoadApiCaptions&&(this._response.captionResult=new S.default(e[3].data))},get:function(){return this._response}}]),e}();t.default=A},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),s=(n(o),r(64)),u=n(s),l=r(3),c=n(l),f=r(61),d=n(f),h=r(59),p=n(h),v=function(){function e(t){i(this,e),this._response={},this.requests=this.buildRequests(t),this._playlistId=t.playlistId}return a(e,null,[{key:"id",get:function(){return"playlist"}}]),a(e,[{key:"buildRequests",value:function(e){var t=c.default.get(),r=[];return r.push(u.default.get(t.serviceUrl,e.ks,e.playlistId)),r.push(u.default.execute(t.serviceUrl,e.ks,e.playlistId)),r}},{key:"isValid",value:function(){return!!this._playlistId}},{key:"requests",set:function(e){this._requests=e},get:function(){return this._requests}},{key:"response",set:function(e){this._response.playlistData=new d.default(e[0].data),this._response.playlistItems=new p.default(e[1].data)},get:function(){return this._response}}]),e}();t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(65),s=n(o),u=r(3),l=n(u),c=r(0),f=(n(c),function(){function e(t){i(this,e),this._response={},this.requests=this.buildRequests(t),this._partnerId=t.partnerId}return a(e,[{key:"requests",set:function(e){this._requests=e},get:function(){return this._requests}},{key:"response",set:function(e){this._response.ks=e[0].data.ks},get:function(){return this._response.ks}}],[{key:"id",get:function(){return"session"}}]),a(e,[{key:"buildRequests",value:function(e){var t=l.default.get(),r=[];return r.push(s.default.anonymousSession(t.serviceUrl,e.partnerId)),r}},{key:"isValid",value:function(){return!!this._partnerId}}]),e}());t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(3),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(){n(this,e)}return i(e,null,[{key:"build",value:function(e){var t=o.default.get(),r=t.cdnUrl,n=e.partnerId,i=e.entryId,a=e.ks,s=e.uiConfId,u=e.format,l=e.protocol,c=e.extension,f=e.flavorIds;if(!(r&&n&&i&&c&&u&&l&&c))return"";var d=r;return r.endsWith("/")||(d+="/"),d+="p/"+n+"/sp/"+n+"00/playManifest/entryId/"+i+"/protocol/"+l+"/format/"+u,f?d+="/flavorIds/"+f:s&&(d+="/uiConfId/"+s),""!==a&&(d+="/ks/"+a),d+="/a."+c,s&&""!==f&&(d+="?uiConfId="+s),d}}]),e}();t.default=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(34),s=(n(o),r(33)),u=(n(s),r(18)),l=n(u),c=r(35),f=(n(c),r(15)),d=n(f),h=r(54),p=n(h),v=r(66),g=n(v),y=r(1),_=n(y),m=r(3),E=n(m),b=r(5),T=n(b),S=r(8),A=n(S),k=r(10),O=n(k),w=r(11),R=n(w),P=r(9),L=r(39),D=n(L),C=r(19),I=n(C),M=r(22),x=(n(M),r(14)),N=(n(x),r(47)),j=function(){function e(){i(this,e)}return a(e,null,[{key:"getMediaEntry",value:function(t,r,n,i){var a=new T.default,o=i.entry,s=i.playBackContextResult,u=i.metadataListResult,l=s.sources;return a.sources=e._getParsedSources(l,t,r,n,o,s),i.captionResult&&(a.sources.captions=N.ExternalCaptionsBuilder.createConfig(i.captionResult.data,t)),e._fillBaseData(a,o,u),a}},{key:"getPlaylist",value:function(t){var r=new D.default,n=t.playlistData,i=t.playlistItems.entries;return r.id=n.id,r.name=n.name,r.description=n.description,r.poster=n.poster,i.forEach(function(t){var n=new T.default;e._fillBaseData(n,t),r.items.push(n)}),r}},{key:"getEntryList",value:function(t){var r=new I.default;return t.playlistItems.entries.forEach(function(t){var n=new T.default;e._fillBaseData(n,t),r.items.push(n)}),r}},{key:"_fillBaseData",value:function(t,r,n){return t.poster=r.poster,t.id=r.id,t.duration=r.duration,t.metadata=e._parseMetadata(n),t.metadata.description=r.description||"",t.metadata.name=r.name||"",t.metadata.tags=r.tags||"",t.type=e._getEntryType(r.entryType,r.type),t.type===T.default.Type.LIVE&&(t.dvrStatus=r.dvrStatus),t}},{key:"_getEntryType",value:function(e,t){var r=T.default.Type.UNKNOWN;switch(e){case l.default.MediaType.IMAGE.value:r=T.default.Type.IMAGE;break;case l.default.MediaType.AUDIO.value:r=T.default.Type.AUDIO;break;default:switch(t){case l.default.EntryType.MEDIA_CLIP.value:r=T.default.Type.VOD;break;case l.default.EntryType.LIVE_STREAM.value:case l.default.EntryType.LIVE_CHANNEL.value:r=T.default.Type.LIVE;break;default:r=T.default.Type.UNKNOWN}}return r}},{key:"_getParsedSources",value:function(t,r,n,i,a,o){var s=new R.default,u=function(t){var u=e._parseAdaptiveSource(t,o,r,n,i,a.id);if(u){var l=P.SupportedStreamFormat.get(t.format);s.map(u,l)}};return t&&t.length>0&&(function(){t.filter(function(e){return!(0,P.isProgressiveSource)(e.format)}).forEach(u)}(),function(){var u=t.find(function(e){return(0,P.isProgressiveSource)(e.format)});s.progressive=e._parseProgressiveSources(u,o,r,n,i,a.id)}()),s}},{key:"_parseAdaptiveSource",value:function(t,r,n,i,a,o){var s=new O.default;if(t){var u="",l=P.SupportedStreamFormat.get(t.format),c=t.getProtocol(e._getBaseProtocol()),f=t.deliveryProfileId,h=t.format,v="";if(l&&(v=l.pathExt,s.mimetype=l.mimeType),t.hasFlavorIds()?(!v&&r.flavorAssets&&r.flavorAssets.length>0&&(v=r.flavorAssets[0].fileExt),u=p.default.build({entryId:o,flavorIds:t.flavorIds,format:h,ks:n,partnerId:i,uiConfId:a,extension:v,protocol:c})):u=t.url,!u){var g="failed to create play url from source, discarding source: ("+o+"_"+f+"), "+h;return e._logger.warn(g),null}if(s.url=e._applyRegexAction(r,u),s.id=o+"_"+f+","+h,t.hasDrmData()){var y=[];t.drm.forEach(function(e){y.push(new A.default(e.licenseURL,d.default.Scheme[e.scheme],e.certificate))}),s.drmData=y}}return s}},{key:"_parseProgressiveSources",value:function(t,r,n,i,a,o){var s=[],u=[];if(t){var l=t.getProtocol(e._getBaseProtocol()),c=t.format,f=t.deliveryProfileId,d=f+","+c;r.flavorAssets.map(function(t){var h=new O.default;h.id=t.id+d,h.mimetype="mp3"===t.fileExt?"audio/mp3":"video/mp4",h.height=t.height,h.width=t.width,h.bandwidth=1024*t.bitrate,h.label=t.label||t.language;var v=p.default.build({entryId:o,flavorIds:t.id,format:c,ks:n,partnerId:i,uiConfId:a,extension:t.fileExt,protocol:l});if(""===v)return e._logger.warn("failed to create play url from source, discarding source: ("+o+"_"+f+"), "+c+"."),null;h.url=e._applyRegexAction(r,v),t.height&&t.width?s.push(h):u.push(h)})}return u.length&&!s.length?u:s}},{key:"_parseMetadata",value:function(e){var t={};return e&&e.metas&&e.metas.length>0&&e.metas.forEach(function(e){var r=void 0,n=new DOMParser;e.xml=e.xml.replace(/\r?\n|\r/g,""),e.xml=e.xml.replace(/>\s*/g,">"),e.xml=e.xml.replace(/>\s*/g,">"),r=n.parseFromString(e.xml,"text/xml");var i=g.default.xmlToJson(r);Object.keys(i.metadata).forEach(function(e){t[e]=i.metadata[e]["#text"]})}),t}},{key:"_getBaseProtocol",value:function(){var e=E.default.get(),t=/^https?:/,r=t.exec(e.cdnUrl),n=r?r[0]:document.location.protocol;return"string"==typeof n?n.slice(0,-1):"https"}},{key:"hasBlockAction",value:function(e){return e.playBackContextResult.hasBlockAction()}},{key:"getBlockAction",value:function(e){return e.playBackContextResult.getBlockAction()}},{key:"getErrorMessages",value:function(e){return e.playBackContextResult.getErrorMessages()}},{key:"_applyRegexAction",value:function(e,t){var r=e.getRequestHostRegexAction();if(r){var n=new RegExp(r.pattern,"i");if(t.match(n))return t.replace(n,r.replacement+"/")}return t}}]),e}();j._logger=(0,_.default)("OVPProviderParser"),t.default=j},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(22),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.pattern=e.pattern,r.replacement=e.replacement,r.replacmenServerNodeId=e.replacmenServerNodeId,r}return a(t,e),t}(s.default);t.default=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.hasError||(r.totalCount=e.totalCount,r.data=e.objects),r}return a(t,e),t}(s.default);t.default=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){n(this,e),this.id=t.id,this.flavorParamsId=t.flavorParamsId,this.fileExt=t.fileExt,this.bitrate=t.bitrate,this.width=t.width,this.height=t.height,this.id=t.id,this.frameRate=t.frameRate,this.isOriginal=t.isOriginal,this.isWeb=t.isWeb,this.containerFormat=t.containerFormat,this.videoCodecId=t.videoCodecId,this.status=t.status,this.language=t.language,this.label=t.label};i.Status={ERROR:-1,QUEUED:0,CONVERTING:1,READY:2,DELETED:3,NOT_APPLICABLE:4,TEMP:5,WAIT_FOR_CONVERT:6,IMPORTING:7,VALIDATING:8,EXPORTING:9},t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),u=n(s),l=r(18),c=n(l),f=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.hasError||(r.entries=[],e.map(function(e){return r.entries.push(new c.default(e))})),r}return o(t,e),t}(u.default);t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){n(this,e),this.id=t.id,this.metadataProfileId=t.metadataProfileId,this.metadataProfileVersion=t.metadataProfileVersion,this.metadataProfileId=t.metadataProfileId,this.metadataObjectType=t.metadataObjectType,this.objectId=t.objectId,this.version=t.version,this.created=new Date(0),this.created.setUTCSeconds(t.createdAt),this.updated=new Date(0),this.updated.setUTCSeconds(t.updatedAt),this.status=t.status,this.xml=t.xml};i.ObjectType={AD_CUE_POINT:"adCuePointMetadata.AdCuePoint",ANNOTATION:"annotationMetadata.Annotation",CODE_CUE_POINT:"codeCuePointMetadata.CodeCuePoint",THUMB_CUE_POINT:"thumbCuePointMetadata.thumbCuePoint",ENTRY:1,CATEGORY:2,USER:3,PARTNER:4,DYNAMIC_OBJECT:5},i.Status={VALID:1,INVALID:2,DELETED:3},t.default=i},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){n(this,e),this.id=t.id,this.name=t.name,this.description=t.description,this.poster=t.thumbnailUrl};t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(6),l=n(u),c=r(0),f=n(c),d=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"list",value:function(e,t,r){var n=new Map;n.set("Content-Type","application/json");var i=new f.default(n);return i.service="caption_captionasset",i.action="list",i.method="POST",i.url=i.getUrl(e),i.params={ks:t,"filter:entryIdEqual":r},i}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(6),l=n(u),c=r(0),f=n(c),d=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"list",value:function(e,t,r){var n=new Map;n.set("Content-Type","application/json");var i=new f.default(n);i.service="metadata_metadata",i.action="list",i.method="POST",i.url=i.getUrl(e),i.tag="metadata_metadata-list";var a={objectType:"KalturaMetadataFilter",objectIdEqual:r,metadataObjectTypeEqual:"1"};return i.params={filter:a,ks:t},i}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(6),l=n(u),c=r(0),f=n(c),d=r(31),h=n(d),p=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"execute",value:function(e,t,r){var n=new Map;n.set("Content-Type","application/json");var i=new f.default(n);return i.service="playlist",i.action="execute",i.method="POST",i.url=i.getUrl(e),i.tag="playlist-execute",i.params={ks:t,id:r,responseProfile:new h.default},i}},{key:"get",value:function(e,t,r){var n=new Map;n.set("Content-Type","application/json");var i=new f.default(n);return i.service="playlist",i.action="get",i.method="POST",i.url=i.getUrl(e),i.tag="playlist-get",i.params={ks:t,id:r,responseProfile:{fields:"id,name,description,thumbnailUrl",type:1}},i}}]),t}(l.default);t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(6),l=n(u),c=r(0),f=n(c),d=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"anonymousSession",value:function(e,t){var r=new Map;r.set("Content-Type","application/json");var n=new f.default(r);return n.service="session",n.action="startWidgetSession",n.method="POST",n.url=n.getUrl(e),n.tag="session-startWidget",n.params={widgetId:"_"+t},n}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return i(e,null,[{key:"xmlToJson",value:function(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var r=0;r<e.attributes.length;r++){var n=e.attributes.item(r);t["@attributes"][n.nodeName]=n.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var a=e.childNodes.item(i),o=a.nodeName;if(void 0===t[o])t[o]=this.xmlToJson(a);else{if(void 0===t[o].push){var s=t[o];t[o]=[],t[o].push(s)}t[o].push(this.xmlToJson(a))}}return t}}]),e}();t.default=a}])})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(!e)throw new Error(P.ValidationErrorType.INITIAL_CONFIG_REQUIRED);a(e.targetId),o(e.provider)}function a(e){if(!e)throw new Error(P.ValidationErrorType.TARGET_ID_REQUIRED);if(!document.getElementById(e))throw new Error(P.ValidationErrorType.DOM_ELEMENT_WITH_TARGET_ID_REQUIRED+e)}function o(e){if(!e.partnerId)throw new Error(P.ValidationErrorType.PARTNER_ID_REQUIRED)}function s(e){var t=document.createElement("div");t.id=R.Utils.Generator.uniqueId(5),t.className=F,t.setAttribute("tabindex","-1");var r=document.getElementById(e);return r&&t&&r.appendChild(t),t.id}function u(e){!e.disableUserCache&&D.default.isLocalStorageAvailable()&&D.default.hasStorage()&&R.Utils.Object.mergeDeep(e,D.default.getStorageConfig())}function l(e){D.default.isLocalStorageAvailable()&&D.default.attach(e)}function c(e,t){e.cast&&x.RemotePlayerManager.load(e.cast,new N.RemoteControl(t))}function f(e){if(D.default.isLocalStorageAvailable()){var t=D.default.getPlayerTextStyle();t&&(e.textStyle=R.Utils.Object.mergeDeep(new R.TextStyle,t))}}function d(e){if(k()){var t=function t(){e.removeEventListener(e.Event.UI.UI_CLICKED,t),(0,R.setCapabilities)(R.EngineType.HTML5,{autoplay:!0})},r=function r(){e.removeEventListener(e.Event.SOURCE_SELECTED,r),e.addEventListener(e.Event.UI.UI_CLICKED,t)};e.addEventListener(e.Event.SOURCE_SELECTED,r)}}function h(){var e=!1;if(!0===window.DEBUG_KALTURA_PLAYER)e=!0;else if(window.URLSearchParams){var t=new URLSearchParams(window.location.search);e=t.has(U)}else e=!!v(U);return e}function p(e){var t=C.LogLevel.ERROR;h()?(t=C.LogLevel.DEBUG,e.logLevel=C.LogLevel.DEBUG.name):e.logLevel&&C.LogLevel[e.logLevel]&&(t=C.LogLevel[e.logLevel]),e.ui.logLevel=e.provider.logLevel=t.name,(0,C.setLogLevel)(t)}function v(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}function g(e){var t=R.Utils.Object.getPropertyPath(window,"__kalturaplayerdata.UIConf");return null!==e&&void 0!==e&&(void 0!==t&&void 0!==t[e]||!1)}function y(e){var t={};return g(e)&&(t=window.__kalturaplayerdata.UIConf[e]),t}function _(e){var t=s(e.targetId),r={targetId:e.targetId,provider:{partnerId:e.provider.partnerId},ui:{targetId:t}};if(R.Utils.Object.mergeDeep(r,e),r.provider.uiConfId){var n=T(y(r.provider.uiConfId));r=R.Utils.Object.mergeDeep({},n,r)}return m(r),b(r),(0,w.setDefaultAnalyticsPlugin)(r),(0,M.configureExternalStreamRedirect)(r),E(r),r}function m(e){if(A()||k()){"boolean"!=typeof R.Utils.Object.getPropertyPath(e,"playback.preferNative.hls")&&R.Utils.Object.mergeDeep(e,{playback:{preferNative:{hls:!0}}})}}function E(e){if(k()&&e.plugins&&e.plugins.ima){var t=R.Utils.Object.getPropertyPath(e,"playback.playsinline"),r=R.Utils.Object.getPropertyPath(e,"plugins.ima.delayInitUntilSourceSelected");"boolean"==typeof t&&!0!==t||"boolean"==typeof r||R.Utils.Object.mergeDeep(e,{plugins:{ima:{delayInitUntilSourceSelected:!0}}})}}function b(e){if(A()){"boolean"!=typeof R.Utils.Object.getPropertyPath(e,"playback.useNativeTextTrack")&&R.Utils.Object.mergeDeep(e,{playback:{useNativeTextTrack:!0}})}}function T(e){var t=function(t,r){if(R.Utils.Object.hasPropertyPath(e,t)){j.push({level:"warn",msg:"Path config.player."+t+" will be deprecated soon. Please update your config structure as describe here: https://github.com/kaltura/kaltura-player-js/blob/master/docs/configuration.md"});var n=R.Utils.Object.getPropertyPath(e,t),i=R.Utils.Object.createPropertyPath({},r,n);R.Utils.Object.mergeDeep(e,i),R.Utils.Object.deletePropertyPath(e,t)}},r=[["duration","sources.duration"],["type","sources.type"],["dvr","sources.dvr"],["id","sources.id"],["name","metadata.name"],["metadata.poster","sources.poster"],["metadata","sources.metadata"]];return function(){if(e.player){j.push({level:"warn",msg:"Path config.player will be deprecated soon. Please update your config structure as describe here: https://github.com/kaltura/kaltura-player-js/blob/master/docs/configuration.md"});var t=R.Utils.Object.copyDeep(e.player);delete e.player,R.Utils.Object.mergeDeep(e,t)}}(),r.forEach(function(e){return t(e[0],e[1])}),e}function S(){j.forEach(function(e){return(0,I.default)("KalturaPlayer:Setup")[e.level](e.msg)})}function A(){return R.Env.browser.name.includes("Safari")}function k(){return"iOS"===R.Env.os.name}function O(e,t){var r=t.sources&&t.sources.progressive;if(r&&r[0]&&"video/youtube"===r[0].mimetype){var n=e.config.playback,i=!1;n.streamPriority.forEach(function(e){"youtube"===e.engine&&(i=!0)}),i||n.streamPriority.push({engine:"youtube",format:"progressive"}),t.playback=n}}Object.defineProperty(t,"__esModule",{value:!0}),t.maybeSetStreamPriority=t.isIos=t.isSafari=t.getDefaultOptions=t.checkNativeHlsSupport=t.createKalturaPlayerContainer=t.setLogLevel=t.validateConfig=t.attachToFirstClick=t.setStorageTextStyle=t.applyCastSupport=t.applyStorageSupport=t.setStorageConfig=t.supportLegacyOptions=t.printSetupMessages=void 0;var w=r(356),R=r(11),P=r(357),L=r(358),D=n(L),C=r(28),I=n(C),M=r(360),x=r(361),N=r(362),j=(r(51),[]),F="kaltura-player-container",U="debugKalturaPlayer";t.printSetupMessages=S,t.supportLegacyOptions=T,t.setStorageConfig=u,t.applyStorageSupport=l,t.applyCastSupport=c,t.setStorageTextStyle=f,t.attachToFirstClick=d,t.validateConfig=i,t.setLogLevel=p,t.createKalturaPlayerContainer=s,t.checkNativeHlsSupport=m,t.getDefaultOptions=_,t.isSafari=A,t.isIos=k,t.maybeSetStreamPriority=O},function(e,t,r){"use strict";function n(e,t){e.config.session&&e.config.session.id?a(e,t):i(t)}function i(e){o(e,d.Utils.Generator.guid()+":"+d.Utils.Generator.guid())}function a(e,t){var r=/:((?:[a-z0-9]|-)*)/i,n=r.exec(e.config.session.id);n&&n[1]&&o(t,e.config.session.id.replace(n[1],d.Utils.Generator.guid()))}function o(e,t){e.session=e.session||{},e.session.id=t}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(t){var r=new RegExp(p+"((?:[a-z0-9]|-)*:(?:[a-z0-9]|-)*)","i"),n=r.exec(e.url);if(n&&n[1])e.url=e.url.replace(n[1],t);else{var i=-1===e.url.indexOf("?")?"?":"&";e.url+=i+p+t}}}function u(){var e=void 0;try{e=window.parent.document.URL}catch(t){e=document.referrer}return e}function l(e){if(-1===e.url.indexOf(v)){var t=-1===e.url.indexOf("?")?"?":"&",r=btoa(u().substr(0,1e3));e.url+=t+v+r}}function c(e){if(-1===e.url.indexOf(g)){var t=-1===e.url.indexOf("?")?"?":"&";e.url+=t+g+"0.37.3"}}function f(e,t){n(e,t);var r=t.sources;Object.values(d.StreamType).forEach(function(e){r[e]&&r[e].forEach(function(e){"string"==typeof e.url&&e.url.toLowerCase().indexOf(h)>-1&&!e.localSource&&(s(e,t.session&&t.session.id),l(e),c(e))})})}Object.defineProperty(t,"__esModule",{value:!0}),t.addClientTag=t.addReferrer=t.getReferrer=t.updateSessionIdInUrl=t.handleSessionId=t.addKalturaParams=void 0;var d=r(11),h="playmanifest/",p="playSessionId=",v="referrer=",g="clientTag=html5:v";t.addKalturaParams=f,t.handleSessionId=n,t.updateSessionIdInUrl=s,t.getReferrer=u,t.addReferrer=l,t.addClientTag=c},function(e,t,r){"use strict";function n(e){if(e.plugins){a.pluginConfig.set(e.plugins);var t=d(e),r=(0,s.default)(JSON.stringify(a.pluginConfig.get()),t),n=void 0;try{n=JSON.parse(r,function(e){try{return JSON.parse(this[e])}catch(t){return this[e]}})}catch(e){n={}}n=f(n),e.plugins=f(e.plugins),e.plugins&&Object.keys(e.plugins).forEach(function(t){if(e.plugins&&e.plugins[t]){var r=l.Utils.Object.mergeDeep({},n[t],e.plugins[t]);e.plugins&&(e.plugins[t]=r)}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.evaluatePluginsConfig=void 0;var i=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=r(363),o=r(136),s=function(e){return e&&e.__esModule?e:{default:e}}(o),u=r(134),l=r(11),c=function(e){return("number"==typeof e||"function"==typeof e||"string"==typeof e||"boolean"==typeof e)&&!a.templateRegex.test(e.toString())},f=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(t).reduce(function(t,r){var n=i(r,2),a=n[0],o=n[1];return"function"!=typeof o&&l.Utils.Object.isObject(o)?t[a]=e(o):c(o)&&(t[a]=o),t},{})},d=function(e){var t={pVersion:"0.37.3",pName:"kaltura-player-js"};e.targetId&&(t.domRootElementId=e.targetId),e.provider&&e.provider.env&&(t.serviceUrl=e.provider.env.serviceUrl);var r={referrer:(0,u.getReferrer)()};return e.provider&&l.Utils.Object.mergeDeep(r,{ks:e.provider.ks,uiConfId:e.provider.uiConfId,partnerId:e.provider.partnerId}),e.session&&l.Utils.Object.mergeDeep(r,{sessionId:e.session.id,ks:e.session.ks,isAnonymous:e.session.isAnonymous,uiConfId:e.session.uiConfId,partnerId:e.session.partnerId}),e.sources&&l.Utils.Object.mergeDeep(r,{entryId:e.sources.id,entryName:e.sources.metadata&&e.sources.metadata.name,entryType:e.sources.type}),e.playlist&&l.Utils.Object.mergeDeep(r,{playlistId:e.playlist.id}),Object.keys(r).forEach(function(e){void 0===r[e]&&delete r[e]}),l.Utils.Object.mergeDeep(t,r),t};t.evaluatePluginsConfig=n},function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var r=void 0,n=e;for(var i in t){var a=void 0!==t[i]&&null!==t[i]?t[i]:"";"string"==typeof a&&a.indexOf('"')>-1&&(a=a.replace(/"/g,'\\"')),r=new RegExp("{{"+i+"}}","g"),n=n.replace(r,a)}return n}catch(e){return""}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e,t,r){var n=e.poster,i=t.poster,a=r.width,o=r.height;"string"==typeof n&&n===i&&(e.poster=n+"/height/"+o+"/width/"+a)}Object.defineProperty(t,"__esModule",{value:!0}),t.addKalturaPoster=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r){n(this,e),this._sources=t,this._config=r}return i(e,[{key:"updateSources",value:function(e){this._sources&&(this._sources.hls=e.hls,this._sources.dash=e.dash,this._sources.progressive=e.progressive)}},{key:"isPlayable",value:function(){return!(!this._sources||!(this._sources.hls&&this._sources.hls.length||this._sources.dash&&this._sources.dash.length||this._sources.progressive&&this._sources.progressive.length))}},{key:"sources",get:function(){return this._sources}},{key:"config",get:function(){return this._config}}]),e}();t.PlaylistItem=a},function(e,t,r){"use strict";function n(){return s}function i(e){return s[e]?s[e]:null}Object.defineProperty(t,"__esModule",{value:!0}),t.getPlayers=t.getPlayer=t.getPlayerProxy=void 0;var a=r(51),o=r(11),s={},u=["_remotePlayer","_listeners","_uiWrapper"],l={get:function(e,t){if("destroy"===t){var r=e.config.targetId;delete s[r]}return t in o.FakeEventTarget.prototype||u.includes(t)?e[t]:e._remotePlayer&&t in e._remotePlayer?e._remotePlayer[t]:e[t]},set:function(e,t,r){return e._remotePlayer&&!u.includes(t)?t in e._remotePlayer&&(e._remotePlayer[t]=r):e[t]=r,!0}},c=function(e){var t=new a.KalturaPlayer(e),r=new Proxy(t,l);return s[e.targetId]=r,r};t.getPlayerProxy=c,t.getPlayer=i,t.getPlayers=n},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PLAYER_NAME=t.VERSION=t.PLAYER_TYPE=t.playlist=t.cast=t.shaka=t.setup=t.providers=t.ui=t.core=t.getPlayer=t.getPlayers=void 0;var a=r(68),o=i(a);r(344);var s=r(28),u=i(s),l=r(11),c=n(l),f=r(95),d=n(f),h=r(132),p=n(h);r(349),r(351),r(352),r(353);var v=r(354),g=n(v),y=r(355),_=r(139),m=r(52),E=r(372),b=(0,s.getLogLevel)();(0,s.setLogLevel)(s.LogLevel.INFO),(0,u.default)().log("%c kaltura-player-js 0.37.3","color: #ff98f9;  font-size: large"),(0,u.default)().log("%c For more details see https://github.com/kaltura/kaltura-player-js","color: #ff98f9;"),(0,s.setLogLevel)(b),o.default.installAll(),t.getPlayers=_.getPlayers,t.getPlayer=_.getPlayer,t.core=c,t.ui=d,t.providers=p,t.setup=y.setup,t.shaka=g,t.cast=m.cast,t.playlist=E.playlist,t.PLAYER_TYPE="ovp",t.VERSION="0.37.3",t.PLAYER_NAME="kaltura-player-js"},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}function a(){}function o(){}function s(){}function u(){return new c}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function(){function e(){n(this,e)}return l(e,[{key:"log",value:function(){}},{key:"debug",value:function(){}}]),e}(),f={name:""};t.useDefaults=i,t.get=u,t.log=s,t.getLevel=a,t.setLevel=o,t.ERROR=f},function(e,t,r){"use strict";(function(e){function t(e,t,r){e[t]||Object[n](e,t,{writable:!0,configurable:!0,value:r})}if(r(143),r(340),r(341),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var n="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,r(53))},function(e,t,r){r(144),r(146),r(147),r(148),r(149),r(150),r(151),r(152),r(153),r(154),r(155),r(156),r(157),r(158),r(159),r(160),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(171),r(172),r(173),r(174),r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(182),r(183),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(218),r(219),r(220),r(221),r(222),r(224),r(225),r(227),r(228),r(229),r(230),r(231),r(232),r(233),r(235),r(236),r(237),r(238),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(90),r(248),r(249),r(116),r(250),r(251),r(252),r(253),r(254),r(119),r(121),r(122),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(306),r(307),r(308),r(309),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),r(320),r(321),r(322),r(323),r(324),r(325),r(326),r(327),r(328),r(329),r(330),r(331),r(332),r(333),r(334),r(335),r(336),r(337),r(338),r(339),e.exports=r(22)},function(e,t,r){"use strict";var n=r(2),i=r(12),a=r(6),o=r(0),s=r(14),u=r(31).KEY,l=r(3),c=r(54),f=r(44),d=r(34),h=r(5),p=r(99),v=r(70),g=r(145),y=r(57),_=r(1),m=r(16),E=r(23),b=r(33),T=r(38),S=r(102),A=r(17),k=r(7),O=r(36),w=A.f,R=k.f,P=S.f,L=n.Symbol,D=n.JSON,C=D&&D.stringify,I=h("_hidden"),M=h("toPrimitive"),x={}.propertyIsEnumerable,N=c("symbol-registry"),j=c("symbols"),F=c("op-symbols"),U=Object.prototype,B="function"==typeof L,G=n.QObject,H=!G||!G.prototype||!G.prototype.findChild,V=a&&l(function(){return 7!=T(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=w(U,t);n&&delete U[t],R(e,t,r),n&&e!==U&&R(U,t,n)}:R,K=function(e){var t=j[e]=T(L.prototype);return t._k=e,t},Y=B&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},W=function(e,t,r){return e===U&&W(F,t,r),_(e),t=E(t,!0),_(r),i(j,t)?(r.enumerable?(i(e,I)&&e[I][t]&&(e[I][t]=!1),r=T(r,{enumerable:b(0,!1)})):(i(e,I)||R(e,I,b(1,{})),e[I][t]=!0),V(e,t,r)):R(e,t,r)},q=function(e,t){_(e);for(var r,n=g(t=m(t)),i=0,a=n.length;a>i;)W(e,r=n[i++],t[r]);return e},X=function(e,t){return void 0===t?T(e):q(T(e),t)},z=function(e){var t=x.call(this,e=E(e,!0));return!(this===U&&i(j,e)&&!i(F,e))&&(!(t||!i(this,e)||!i(j,e)||i(this,I)&&this[I][e])||t)},J=function(e,t){if(e=m(e),t=E(t,!0),e!==U||!i(j,t)||i(F,t)){var r=w(e,t);return!r||!i(j,t)||i(e,I)&&e[I][t]||(r.enumerable=!0),r}},Q=function(e){for(var t,r=P(m(e)),n=[],a=0;r.length>a;)i(j,t=r[a++])||t==I||t==u||n.push(t);return n},$=function(e){for(var t,r=e===U,n=P(r?F:m(e)),a=[],o=0;n.length>o;)!i(j,t=n[o++])||r&&!i(U,t)||a.push(j[t]);return a};B||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(r){this===U&&t.call(F,r),i(this,I)&&i(this[I],e)&&(this[I][e]=!1),V(this,e,b(1,r))};return a&&H&&V(U,e,{configurable:!0,set:t}),K(e)},s(L.prototype,"toString",function(){return this._k}),A.f=J,k.f=W,r(39).f=S.f=Q,r(49).f=z,r(56).f=$,a&&!r(35)&&s(U,"propertyIsEnumerable",z,!0),p.f=function(e){return K(h(e))}),o(o.G+o.W+o.F*!B,{Symbol:L});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)h(Z[ee++]);for(var te=O(h.store),re=0;te.length>re;)v(te[re++]);o(o.S+o.F*!B,"Symbol",{for:function(e){return i(N,e+="")?N[e]:N[e]=L(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),o(o.S+o.F*!B,"Object",{create:X,defineProperty:W,defineProperties:q,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),D&&o(o.S+o.F*(!B||l(function(){var e=L();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!Y(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&y(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!Y(t))return t}),n[1]=t,C.apply(D,n)}}}),L.prototype[M]||r(13)(L.prototype,M,L.prototype.valueOf),f(L,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t,r){var n=r(36),i=r(56),a=r(49);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var o,s=r(e),u=a.f,l=0;s.length>l;)u.call(e,o=s[l++])&&t.push(o);return t}},function(e,t,r){var n=r(0);n(n.S,"Object",{create:r(38)})},function(e,t,r){var n=r(0);n(n.S+n.F*!r(6),"Object",{defineProperty:r(7).f})},function(e,t,r){var n=r(0);n(n.S+n.F*!r(6),"Object",{defineProperties:r(101)})},function(e,t,r){var n=r(16),i=r(17).f;r(26)("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},function(e,t,r){var n=r(9),i=r(18);r(26)("getPrototypeOf",function(){return function(e){return i(n(e))}})},function(e,t,r){var n=r(9),i=r(36);r(26)("keys",function(){return function(e){return i(n(e))}})},function(e,t,r){r(26)("getOwnPropertyNames",function(){return r(102).f})},function(e,t,r){var n=r(4),i=r(31).onFreeze;r(26)("freeze",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(4),i=r(31).onFreeze;r(26)("seal",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(4),i=r(31).onFreeze;r(26)("preventExtensions",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(4);r(26)("isFrozen",function(e){return function(t){return!n(t)||!!e&&e(t)}})},function(e,t,r){var n=r(4);r(26)("isSealed",function(e){return function(t){return!n(t)||!!e&&e(t)}})},function(e,t,r){var n=r(4);r(26)("isExtensible",function(e){return function(t){return!!n(t)&&(!e||e(t))}})},function(e,t,r){var n=r(0);n(n.S+n.F,"Object",{assign:r(103)})},function(e,t,r){var n=r(0);n(n.S,"Object",{is:r(161)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,r){var n=r(0);n(n.S,"Object",{setPrototypeOf:r(74).set})},function(e,t,r){"use strict";var n=r(50),i={};i[r(5)("toStringTag")]="z",i+""!="[object z]"&&r(14)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(e,t,r){var n=r(0);n(n.P,"Function",{bind:r(104)})},function(e,t,r){var n=r(7).f,i=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in i||r(6)&&n(i,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},function(e,t,r){"use strict";var n=r(4),i=r(18),a=r(5)("hasInstance"),o=Function.prototype;a in o||r(7).f(o,a,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,r){var n=r(0),i=r(106);n(n.G+n.F*(parseInt!=i),{parseInt:i})},function(e,t,r){var n=r(0),i=r(107);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},function(e,t,r){"use strict";var n=r(2),i=r(12),a=r(20),o=r(76),s=r(23),u=r(3),l=r(39).f,c=r(17).f,f=r(7).f,d=r(45).trim,h=n.Number,p=h,v=h.prototype,g="Number"==a(r(38)(v)),y="trim"in String.prototype,_=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():d(t,3);var r,n,i,a=t.charCodeAt(0);if(43===a||45===a){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var o,u=t.slice(2),l=0,c=u.length;l<c;l++)if((o=u.charCodeAt(l))<48||o>i)return NaN;return parseInt(u,n)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof h&&(g?u(function(){v.valueOf.call(r)}):"Number"!=a(r))?o(new p(_(t)),r,h):_(t)};for(var m,E=r(6)?l(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;E.length>b;b++)i(p,m=E[b])&&!i(h,m)&&f(h,m,c(p,m));h.prototype=v,v.constructor=h,r(14)(n,"Number",h)}},function(e,t,r){"use strict";var n=r(0),i=r(25),a=r(108),o=r(77),s=1..toFixed,u=Math.floor,l=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",f=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*l[r],l[r]=n%1e7,n=u(n/1e7)},d=function(e){for(var t=6,r=0;--t>=0;)r+=l[t],l[t]=u(r/e),r=r%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==l[e]){var r=String(l[e]);t=""===t?r:t+o.call("0",7-r.length)+r}return t},p=function(e,t,r){return 0===t?r:t%2==1?p(e,t-1,r*e):p(e*e,t/2,r)},v=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t};n(n.P+n.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(3)(function(){s.call({})})),"Number",{toFixed:function(e){var t,r,n,s,u=a(this,c),l=i(e),g="",y="0";if(l<0||l>20)throw RangeError(c);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(g="-",u=-u),u>1e-21)if(t=v(u*p(2,69,1))-69,r=t<0?u*p(2,-t,1):u/p(2,t,1),r*=4503599627370496,(t=52-t)>0){for(f(0,r),n=l;n>=7;)f(1e7,0),n-=7;for(f(p(10,n,1),0),n=t-1;n>=23;)d(1<<23),n-=23;d(1<<n),f(1,1),d(2),y=h()}else f(0,r),f(1<<-t,0),y=h()+o.call("0",l);return l>0?(s=y.length,y=g+(s<=l?"0."+o.call("0",l-s)+y:y.slice(0,s-l)+"."+y.slice(s-l))):y=g+y,y}})},function(e,t,r){"use strict";var n=r(0),i=r(3),a=r(108),o=1..toPrecision;n(n.P+n.F*(i(function(){return"1"!==o.call(1,void 0)})||!i(function(){o.call({})})),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return void 0===e?o.call(t):o.call(t,e)}})},function(e,t,r){var n=r(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){var n=r(0),i=r(2).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,r){var n=r(0);n(n.S,"Number",{isInteger:r(109)})},function(e,t,r){var n=r(0);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){var n=r(0),i=r(109),a=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return i(e)&&a(e)<=9007199254740991}})},function(e,t,r){var n=r(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var n=r(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){var n=r(0),i=r(107);n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,r){var n=r(0),i=r(106);n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,r){var n=r(0),i=r(110),a=Math.sqrt,o=Math.acosh;n(n.S+n.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+a(e-1)*a(e+1))}})},function(e,t,r){function n(e){return isFinite(e=+e)&&0!=e?e<0?-n(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=r(0),a=Math.asinh;i(i.S+i.F*!(a&&1/a(0)>0),"Math",{asinh:n})},function(e,t,r){var n=r(0),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,r){var n=r(0),i=r(78);n(n.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,r){var n=r(0),i=Math.exp;n(n.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,r){var n=r(0),i=r(79);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,r){var n=r(0);n(n.S,"Math",{fround:r(111)})},function(e,t,r){var n=r(0),i=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,a=0,o=0,s=arguments.length,u=0;o<s;)r=i(arguments[o++]),u<r?(n=u/r,a=a*n*n+1,u=r):r>0?(n=r/u,a+=n*n):a+=r;return u===1/0?1/0:u*Math.sqrt(a)}})},function(e,t,r){var n=r(0),i=Math.imul;n(n.S+n.F*r(3)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var r=+e,n=+t,i=65535&r,a=65535&n;return 0|i*a+((65535&r>>>16)*a+i*(65535&n>>>16)<<16>>>0)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,r){var n=r(0);n(n.S,"Math",{log1p:r(110)})},function(e,t,r){var n=r(0);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var n=r(0);n(n.S,"Math",{sign:r(78)})},function(e,t,r){var n=r(0),i=r(79),a=Math.exp;n(n.S+n.F*r(3)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},function(e,t,r){var n=r(0),i=r(79),a=Math.exp;n(n.S,"Math",{tanh:function(e){var t=i(e=+e),r=i(-e);return t==1/0?1:r==1/0?-1:(t-r)/(a(e)+a(-e))}})},function(e,t,r){var n=r(0);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){var n=r(0),i=r(37),a=String.fromCharCode,o=String.fromCodePoint;n(n.S+n.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,o=0;n>o;){if(t=+arguments[o++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}})},function(e,t,r){var n=r(0),i=r(16),a=r(8);n(n.S,"String",{raw:function(e){for(var t=i(e.raw),r=a(t.length),n=arguments.length,o=[],s=0;r>s;)o.push(String(t[s++])),s<n&&o.push(String(arguments[s]));return o.join("")}})},function(e,t,r){"use strict";r(45)("trim",function(e){return function(){return e(this,3)}})},function(e,t,r){"use strict";var n=r(80)(!0);r(81)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){"use strict";var n=r(0),i=r(80)(!1);n(n.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,r){"use strict";var n=r(0),i=r(8),a=r(83),o="".endsWith;n(n.P+n.F*r(84)("endsWith"),"String",{endsWith:function(e){var t=a(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=i(t.length),s=void 0===r?n:Math.min(i(r),n),u=String(e);return o?o.call(t,u,s):t.slice(s-u.length,s)===u}})},function(e,t,r){"use strict";var n=r(0),i=r(83);n(n.P+n.F*r(84)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(0);n(n.P,"String",{repeat:r(77)})},function(e,t,r){"use strict";var n=r(0),i=r(8),a=r(83),o="".startsWith;n(n.P+n.F*r(84)("startsWith"),"String",{startsWith:function(e){var t=a(this,e,"startsWith"),r=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return o?o.call(t,n,r):t.slice(r,r+n.length)===n}})},function(e,t,r){"use strict";r(15)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,r){"use strict";r(15)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,r){"use strict";r(15)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,r){"use strict";r(15)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,r){"use strict";r(15)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,r){"use strict";r(15)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,r){"use strict";r(15)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,r){"use strict";r(15)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,r){"use strict";r(15)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,r){"use strict";r(15)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,r){"use strict";r(15)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,r){"use strict";r(15)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,r){"use strict";r(15)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,r){var n=r(0);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,r){"use strict";var n=r(0),i=r(9),a=r(23);n(n.P+n.F*r(3)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),r=a(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},function(e,t,r){var n=r(0),i=r(223);n(n.P+n.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,r){"use strict";var n=r(3),i=Date.prototype.getTime,a=Date.prototype.toISOString,o=function(e){return e>9?e:"0"+e};e.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-5e13-1))})||!n(function(){a.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"."+(r>99?r:"0"+o(r))+"Z"}:a},function(e,t,r){var n=Date.prototype,i=n.toString,a=n.getTime;new Date(NaN)+""!="Invalid Date"&&r(14)(n,"toString",function(){var e=a.call(this);return e===e?i.call(this):"Invalid Date"})},function(e,t,r){var n=r(5)("toPrimitive"),i=Date.prototype;n in i||r(13)(i,n,r(226))},function(e,t,r){"use strict";var n=r(1),i=r(23);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),"number"!=e)}},function(e,t,r){var n=r(0);n(n.S,"Array",{isArray:r(57)})},function(e,t,r){"use strict";var n=r(19),i=r(0),a=r(9),o=r(112),s=r(85),u=r(8),l=r(86),c=r(87);i(i.S+i.F*!r(59)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,f,d=a(e),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,y=0,_=c(d);if(g&&(v=n(v,p>2?arguments[2]:void 0,2)),void 0==_||h==Array&&s(_))for(t=u(d.length),r=new h(t);t>y;y++)l(r,y,g?v(d[y],y):d[y]);else for(f=_.call(d),r=new h;!(i=f.next()).done;y++)l(r,y,g?o(f,v,[i.value,y],!0):i.value);return r.length=y,r}})},function(e,t,r){"use strict";var n=r(0),i=r(86);n(n.S+n.F*r(3)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)i(r,e,arguments[e++]);return r.length=t,r}})},function(e,t,r){"use strict";var n=r(0),i=r(16),a=[].join;n(n.P+n.F*(r(48)!=Object||!r(21)(a)),"Array",{join:function(e){return a.call(i(this),void 0===e?",":e)}})},function(e,t,r){"use strict";var n=r(0),i=r(73),a=r(20),o=r(37),s=r(8),u=[].slice;n(n.P+n.F*r(3)(function(){i&&u.call(i)}),"Array",{slice:function(e,t){var r=s(this.length),n=a(this);if(t=void 0===t?r:t,"Array"==n)return u.call(this,e,t);for(var i=o(e,r),l=o(t,r),c=s(l-i),f=Array(c),d=0;d<c;d++)f[d]="String"==n?this.charAt(i+d):this[i+d];return f}})},function(e,t,r){"use strict";var n=r(0),i=r(10),a=r(9),o=r(3),s=[].sort,u=[1,2,3];n(n.P+n.F*(o(function(){u.sort(void 0)})||!o(function(){u.sort(null)})||!r(21)(s)),"Array",{sort:function(e){return void 0===e?s.call(a(this)):s.call(a(this),i(e))}})},function(e,t,r){"use strict";var n=r(0),i=r(27)(0),a=r(21)([].forEach,!0);n(n.P+n.F*!a,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,r){var n=r(4),i=r(57),a=r(5)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){"use strict";var n=r(0),i=r(27)(1);n(n.P+n.F*!r(21)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(27)(2);n(n.P+n.F*!r(21)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(27)(3);n(n.P+n.F*!r(21)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(27)(4);n(n.P+n.F*!r(21)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(113);n(n.P+n.F*!r(21)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,r){"use strict";var n=r(0),i=r(113);n(n.P+n.F*!r(21)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,r){"use strict";var n=r(0),i=r(55)(!1),a=[].indexOf,o=!!a&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(o||!r(21)(a)),"Array",{indexOf:function(e){return o?a.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(0),i=r(16),a=r(25),o=r(8),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(u||!r(21)(s)),"Array",{lastIndexOf:function(e){if(u)return s.apply(this,arguments)||0;var t=i(this),r=o(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,a(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}})},function(e,t,r){var n=r(0);n(n.P,"Array",{copyWithin:r(114)}),r(32)("copyWithin")},function(e,t,r){var n=r(0);n(n.P,"Array",{fill:r(89)}),r(32)("fill")},function(e,t,r){"use strict";var n=r(0),i=r(27)(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(32)("find")},function(e,t,r){"use strict";var n=r(0),i=r(27)(6),a="findIndex",o=!0;a in[]&&Array(1)[a](function(){o=!1}),n(n.P+n.F*o,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(32)(a)},function(e,t,r){r(40)("Array")},function(e,t,r){var n=r(2),i=r(76),a=r(7).f,o=r(39).f,s=r(58),u=r(60),l=n.RegExp,c=l,f=l.prototype,d=/a/g,h=/a/g,p=new l(d)!==d;if(r(6)&&(!p||r(3)(function(){return h[r(5)("match")]=!1,l(d)!=d||l(h)==h||"/a/i"!=l(d,"i")}))){l=function(e,t){var r=this instanceof l,n=s(e),a=void 0===t;return!r&&n&&e.constructor===l&&a?e:i(p?new c(n&&!a?e.source:e,t):c((n=e instanceof l)?e.source:e,n&&a?u.call(e):t),r?this:f,l)};for(var v=o(c),g=0;v.length>g;)!function(e){e in l||a(l,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})}(v[g++]);f.constructor=l,l.prototype=f,r(14)(n,"RegExp",l)}r(40)("RegExp")},function(e,t,r){"use strict";r(116);var n=r(1),i=r(60),a=r(6),o=/./.toString,s=function(e){r(14)(RegExp.prototype,"toString",e,!0)};r(3)(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?s(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?i.call(e):void 0)}):"toString"!=o.name&&s(function(){return o.call(this)})},function(e,t,r){r(61)("match",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,r){r(61)("replace",2,function(e,t,r){return[function(n,i){"use strict";var a=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,a,i):r.call(String(a),n,i)},r]})},function(e,t,r){r(61)("search",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,r){r(61)("split",2,function(e,t,n){"use strict";var i=r(58),a=n,o=[].push,s="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[s]||2!="ab".split(/(?:ab)*/)[s]||4!=".".split(/(.?)(.?)/)[s]||".".split(/()()/)[s]>1||"".split(/.?/)[s]){var u=void 0===/()??/.exec("")[1];n=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!i(e))return a.call(r,e,t);var n,l,c,f,d,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,g=void 0===t?4294967295:t>>>0,y=new RegExp(e.source,p+"g");for(u||(n=new RegExp("^"+y.source+"$(?!\\s)",p));(l=y.exec(r))&&!((c=l.index+l[0][s])>v&&(h.push(r.slice(v,l.index)),!u&&l[s]>1&&l[0].replace(n,function(){for(d=1;d<arguments[s]-2;d++)void 0===arguments[d]&&(l[d]=void 0)}),l[s]>1&&l.index<r[s]&&o.apply(h,l.slice(1)),f=l[0][s],v=c,h[s]>=g));)y.lastIndex===l.index&&y.lastIndex++;return v===r[s]?!f&&y.test("")||h.push(""):h.push(r.slice(v)),h[s]>g?h.slice(0,g):h}}else"0".split(void 0,0)[s]&&(n=function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)});return[function(r,i){var a=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,a,i):n.call(String(a),r,i)},n]})},function(e,t,r){"use strict";var n,i,a,o,s=r(35),u=r(2),l=r(19),c=r(50),f=r(0),d=r(4),h=r(10),p=r(41),v=r(42),g=r(62),y=r(91).set,_=r(92)(),m=r(93),E=r(117),b=r(118),T=u.TypeError,S=u.process,A=u.Promise,k="process"==c(S),O=function(){},w=i=m.f,R=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[r(5)("species")]=function(e){e(O,O)};return(k||"function"==typeof PromiseRejectionEvent)&&e.then(O)instanceof t}catch(e){}}(),P=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var r=e._c;_(function(){for(var n=e._v,i=1==e._s,a=0;r.length>a;)!function(t){var r,a,o=i?t.ok:t.fail,s=t.resolve,u=t.reject,l=t.domain;try{o?(i||(2==e._h&&I(e),e._h=1),!0===o?r=n:(l&&l.enter(),r=o(n),l&&l.exit()),r===t.promise?u(T("Promise-chain cycle")):(a=P(r))?a.call(r,s,u):s(r)):u(n)}catch(e){u(e)}}(r[a++]);e._c=[],e._n=!1,t&&!e._h&&D(e)})}},D=function(e){y.call(u,function(){var t,r,n,i=e._v,a=C(e);if(a&&(t=E(function(){k?S.emit("unhandledRejection",i,e):(r=u.onunhandledrejection)?r({promise:e,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=k||C(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},C=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!C(t.promise))return!1;return!0},I=function(e){y.call(u,function(){var t;k?S.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},M=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},x=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw T("Promise can't be resolved itself");(t=P(e))?_(function(){var n={_w:r,_d:!1};try{t.call(e,l(x,n,1),l(M,n,1))}catch(e){M.call(n,e)}}):(r._v=e,r._s=1,L(r,!1))}catch(e){M.call({_w:r,_d:!1},e)}}};R||(A=function(e){p(this,A,"Promise","_h"),h(e),n.call(this);try{e(l(x,this,1),l(M,this,1))}catch(e){M.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(43)(A.prototype,{then:function(e,t){var r=w(g(this,A));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=k?S.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&L(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=l(x,e,1),this.reject=l(M,e,1)},m.f=w=function(e){return e===A||e===o?new a(e):i(e)}),f(f.G+f.W+f.F*!R,{Promise:A}),r(44)(A,"Promise"),r(40)("Promise"),o=r(22).Promise,f(f.S+f.F*!R,"Promise",{reject:function(e){var t=w(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!R),"Promise",{resolve:function(e){return b(s&&this===o?A:this,e)}}),f(f.S+f.F*!(R&&r(59)(function(e){A.all(e).catch(O)})),"Promise",{all:function(e){var t=this,r=w(t),n=r.resolve,i=r.reject,a=E(function(){var r=[],a=0,o=1;v(e,!1,function(e){var s=a++,u=!1;r.push(void 0),o++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--o||n(r))},i)}),--o||n(r)});return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=w(t),n=r.reject,i=E(function(){v(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},function(e,t,r){"use strict";var n=r(123),i=r(47);r(63)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"WeakSet"),e,!0)}},n,!1,!0)},function(e,t,r){"use strict";var n=r(0),i=r(64),a=r(94),o=r(1),s=r(37),u=r(8),l=r(4),c=r(2).ArrayBuffer,f=r(62),d=a.ArrayBuffer,h=a.DataView,p=i.ABV&&c.isView,v=d.prototype.slice,g=i.VIEW;n(n.G+n.W+n.F*(c!==d),{ArrayBuffer:d}),n(n.S+n.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||l(e)&&g in e}}),n(n.P+n.U+n.F*r(3)(function(){return!new d(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(o(this),e);for(var r=o(this).byteLength,n=s(e,r),i=s(void 0===t?r:t,r),a=new(f(this,d))(u(i-n)),l=new h(this),c=new h(a),p=0;n<i;)c.setUint8(p++,l.getUint8(n++));return a}}),r(40)("ArrayBuffer")},function(e,t,r){var n=r(0);n(n.G+n.W+n.F*!r(64).ABV,{DataView:r(94).DataView})},function(e,t,r){r(29)("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(29)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(29)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},function(e,t,r){r(29)("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(29)("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(29)("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(29)("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(29)("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(29)("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){var n=r(0),i=r(10),a=r(1),o=(r(2).Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!r(3)(function(){o(function(){})}),"Reflect",{apply:function(e,t,r){var n=i(e),u=a(r);return o?o(n,t,u):s.call(n,t,u)}})},function(e,t,r){var n=r(0),i=r(38),a=r(10),o=r(1),s=r(4),u=r(3),l=r(104),c=(r(2).Reflect||{}).construct,f=u(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),d=!u(function(){c(function(){})});n(n.S+n.F*(f||d),"Reflect",{construct:function(e,t){a(e),o(t);var r=arguments.length<3?e:a(arguments[2]);if(d&&!f)return c(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(l.apply(e,n))}var u=r.prototype,h=i(s(u)?u:Object.prototype),p=Function.apply.call(e,h,t);return s(p)?p:h}})},function(e,t,r){var n=r(7),i=r(0),a=r(1),o=r(23);i(i.S+i.F*r(3)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){a(e),t=o(t,!0),a(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},function(e,t,r){var n=r(0),i=r(17).f,a=r(1);n(n.S,"Reflect",{deleteProperty:function(e,t){var r=i(a(e),t);return!(r&&!r.configurable)&&delete e[t]}})},function(e,t,r){"use strict";var n=r(0),i=r(1),a=function(e){this._t=i(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};r(82)(a,"Object",function(){var e,t=this,r=t._k;do{if(t._i>=r.length)return{value:void 0,done:!0}}while(!((e=r[t._i++])in t._t));return{value:e,done:!1}}),n(n.S,"Reflect",{enumerate:function(e){return new a(e)}})},function(e,t,r){function n(e,t){var r,s,c=arguments.length<3?e:arguments[2];return l(e)===c?e[t]:(r=i.f(e,t))?o(r,"value")?r.value:void 0!==r.get?r.get.call(c):void 0:u(s=a(e))?n(s,t,c):void 0}var i=r(17),a=r(18),o=r(12),s=r(0),u=r(4),l=r(1);s(s.S,"Reflect",{get:n})},function(e,t,r){var n=r(17),i=r(0),a=r(1);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(a(e),t)}})},function(e,t,r){var n=r(0),i=r(18),a=r(1);n(n.S,"Reflect",{getPrototypeOf:function(e){return i(a(e))}})},function(e,t,r){var n=r(0);n(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,r){var n=r(0),i=r(1),a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return i(e),!a||a(e)}})},function(e,t,r){var n=r(0);n(n.S,"Reflect",{ownKeys:r(125)})},function(e,t,r){var n=r(0),i=r(1),a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){i(e);try{return a&&a(e),!0}catch(e){return!1}}})},function(e,t,r){function n(e,t,r){var u,d,h=arguments.length<4?e:arguments[3],p=a.f(c(e),t);if(!p){if(f(d=o(e)))return n(d,t,r,h);p=l(0)}return s(p,"value")?!(!1===p.writable||!f(h))&&(u=a.f(h,t)||l(0),u.value=r,i.f(h,t,u),!0):void 0!==p.set&&(p.set.call(h,r),!0)}var i=r(7),a=r(17),o=r(18),s=r(12),u=r(0),l=r(33),c=r(1),f=r(4);u(u.S,"Reflect",{set:n})},function(e,t,r){var n=r(0),i=r(74);i&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,r){"use strict";var n=r(0),i=r(55)(!0);n(n.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(32)("includes")},function(e,t,r){"use strict";var n=r(0),i=r(126),a=r(9),o=r(8),s=r(10),u=r(88);n(n.P,"Array",{flatMap:function(e){var t,r,n=a(this);return s(e),t=o(n.length),r=u(n,0),i(r,n,n,t,0,1,e,arguments[1]),r}}),r(32)("flatMap")},function(e,t,r){"use strict";var n=r(0),i=r(126),a=r(9),o=r(8),s=r(25),u=r(88);n(n.P,"Array",{flatten:function(){var e=arguments[0],t=a(this),r=o(t.length),n=u(t,0);return i(n,t,t,r,0,void 0===e?1:s(e)),n}}),r(32)("flatten")},function(e,t,r){"use strict";var n=r(0),i=r(80)(!0);n(n.P,"String",{at:function(e){return i(this,e)}})},function(e,t,r){"use strict";var n=r(0),i=r(127);n(n.P,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,r){"use strict";var n=r(0),i=r(127);n(n.P,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,r){"use strict";r(45)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,r){"use strict";r(45)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,r){"use strict";var n=r(0),i=r(24),a=r(8),o=r(58),s=r(60),u=RegExp.prototype,l=function(e,t){this._r=e,this._s=t};r(82)(l,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),n(n.P,"String",{matchAll:function(e){if(i(this),!o(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in u?String(e.flags):s.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=a(e.lastIndex),new l(n,t)}})},function(e,t,r){r(70)("asyncIterator")},function(e,t,r){r(70)("observable")},function(e,t,r){var n=r(0),i=r(125),a=r(16),o=r(17),s=r(86);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=a(e),u=o.f,l=i(n),c={},f=0;l.length>f;)void 0!==(r=u(n,t=l[f++]))&&s(c,t,r);return c}})},function(e,t,r){var n=r(0),i=r(128)(!1);n(n.S,"Object",{values:function(e){return i(e)}})},function(e,t,r){var n=r(0),i=r(128)(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},function(e,t,r){"use strict";var n=r(0),i=r(9),a=r(10),o=r(7);r(6)&&n(n.P+r(65),"Object",{__defineGetter__:function(e,t){o.f(i(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},function(e,t,r){"use strict";var n=r(0),i=r(9),a=r(10),o=r(7);r(6)&&n(n.P+r(65),"Object",{__defineSetter__:function(e,t){o.f(i(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},function(e,t,r){"use strict";var n=r(0),i=r(9),a=r(23),o=r(18),s=r(17).f;r(6)&&n(n.P+r(65),"Object",{__lookupGetter__:function(e){var t,r=i(this),n=a(e,!0);do{if(t=s(r,n))return t.get}while(r=o(r))}})},function(e,t,r){"use strict";var n=r(0),i=r(9),a=r(23),o=r(18),s=r(17).f;r(6)&&n(n.P+r(65),"Object",{__lookupSetter__:function(e){var t,r=i(this),n=a(e,!0);do{if(t=s(r,n))return t.set}while(r=o(r))}})},function(e,t,r){var n=r(0);n(n.P+n.R,"Map",{toJSON:r(129)("Map")})},function(e,t,r){var n=r(0);n(n.P+n.R,"Set",{toJSON:r(129)("Set")})},function(e,t,r){r(66)("Map")},function(e,t,r){r(66)("Set")},function(e,t,r){r(66)("WeakMap")},function(e,t,r){r(66)("WeakSet")},function(e,t,r){r(67)("Map")},function(e,t,r){r(67)("Set")},function(e,t,r){r(67)("WeakMap")},function(e,t,r){r(67)("WeakSet")},function(e,t,r){var n=r(0);n(n.G,{global:r(2)})},function(e,t,r){var n=r(0);n(n.S,"System",{global:r(2)})},function(e,t,r){var n=r(0),i=r(20);n(n.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{clamp:function(e,t,r){return Math.min(r,Math.max(t,e))}})},function(e,t,r){var n=r(0);n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,r){var n=r(0),i=180/Math.PI;n(n.S,"Math",{degrees:function(e){return e*i}})},function(e,t,r){var n=r(0),i=r(131),a=r(111);n(n.S,"Math",{fscale:function(e,t,r,n,o){return a(i(e,t,r,n,o))}})},function(e,t,r){var n=r(0);n(n.S,"Math",{iaddh:function(e,t,r,n){var i=e>>>0,a=t>>>0,o=r>>>0;return a+(n>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(e,t,r){var n=r(0);n(n.S,"Math",{isubh:function(e,t,r,n){var i=e>>>0,a=t>>>0,o=r>>>0;return a-(n>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(e,t,r){var n=r(0);n(n.S,"Math",{imulh:function(e,t){var r=+e,n=+t,i=65535&r,a=65535&n,o=r>>16,s=n>>16,u=(o*a>>>0)+(i*a>>>16);return o*s+(u>>16)+((i*s>>>0)+(65535&u)>>16)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,r){var n=r(0),i=Math.PI/180;n(n.S,"Math",{radians:function(e){return e*i}})},function(e,t,r){var n=r(0);n(n.S,"Math",{scale:r(131)})},function(e,t,r){var n=r(0);n(n.S,"Math",{umulh:function(e,t){var r=+e,n=+t,i=65535&r,a=65535&n,o=r>>>16,s=n>>>16,u=(o*a>>>0)+(i*a>>>16);return o*s+(u>>>16)+((i*s>>>0)+(65535&u)>>>16)}})},function(e,t,r){var n=r(0);n(n.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,r){"use strict";var n=r(0),i=r(22),a=r(2),o=r(62),s=r(118);n(n.P+n.R,"Promise",{finally:function(e){var t=o(this,i.Promise||a.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(0),i=r(93),a=r(117);n(n.S,"Promise",{try:function(e){var t=i.f(this),r=a(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){var n=r(30),i=r(1),a=n.key,o=n.set;n.exp({defineMetadata:function(e,t,r,n){o(e,t,i(r),a(n))}})},function(e,t,r){var n=r(30),i=r(1),a=n.key,o=n.map,s=n.store;n.exp({deleteMetadata:function(e,t){var r=arguments.length<3?void 0:a(arguments[2]),n=o(i(t),r,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var u=s.get(t);return u.delete(r),!!u.size||s.delete(t)}})},function(e,t,r){var n=r(30),i=r(1),a=r(18),o=n.has,s=n.get,u=n.key,l=function(e,t,r){if(o(e,t,r))return s(e,t,r);var n=a(t);return null!==n?l(e,n,r):void 0};n.exp({getMetadata:function(e,t){return l(e,i(t),arguments.length<3?void 0:u(arguments[2]))}})},function(e,t,r){var n=r(121),i=r(130),a=r(30),o=r(1),s=r(18),u=a.keys,l=a.key,c=function(e,t){var r=u(e,t),a=s(e);if(null===a)return r;var o=c(a,t);return o.length?r.length?i(new n(r.concat(o))):o:r};a.exp({getMetadataKeys:function(e){return c(o(e),arguments.length<2?void 0:l(arguments[1]))}})},function(e,t,r){var n=r(30),i=r(1),a=n.get,o=n.key;n.exp({getOwnMetadata:function(e,t){return a(e,i(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,r){var n=r(30),i=r(1),a=n.keys,o=n.key;n.exp({getOwnMetadataKeys:function(e){return a(i(e),arguments.length<2?void 0:o(arguments[1]))}})},function(e,t,r){var n=r(30),i=r(1),a=r(18),o=n.has,s=n.key,u=function(e,t,r){if(o(e,t,r))return!0;var n=a(t);return null!==n&&u(e,n,r)};n.exp({hasMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,r){var n=r(30),i=r(1),a=n.has,o=n.key;n.exp({hasOwnMetadata:function(e,t){return a(e,i(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,r){var n=r(30),i=r(1),a=r(10),o=n.key,s=n.set;n.exp({metadata:function(e,t){return function(r,n){s(e,t,(void 0!==n?i:a)(r),o(n))}}})},function(e,t,r){var n=r(0),i=r(92)(),a=r(2).process,o="process"==r(20)(a);n(n.G,{asap:function(e){var t=o&&a.domain;i(t?t.bind(e):e)}})},function(e,t,r){"use strict";var n=r(0),i=r(2),a=r(22),o=r(92)(),s=r(5)("observable"),u=r(10),l=r(1),c=r(41),f=r(43),d=r(13),h=r(42),p=h.RETURN,v=function(e){return null==e?void 0:u(e)},g=function(e){var t=e._c;t&&(e._c=void 0,t())},y=function(e){return void 0===e._o},_=function(e){y(e)||(e._o=void 0,g(e))},m=function(e,t){l(e),this._c=void 0,this._o=e,e=new E(this);try{var r=t(e),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:u(r),this._c=r)}catch(t){return void e.error(t)}y(this)&&g(this)};m.prototype=f({},{unsubscribe:function(){_(this)}});var E=function(e){this._s=e};E.prototype=f({},{next:function(e){var t=this._s;if(!y(t)){var r=t._o;try{var n=v(r.next);if(n)return n.call(r,e)}catch(e){try{_(t)}finally{throw e}}}},error:function(e){var t=this._s;if(y(t))throw e;var r=t._o;t._o=void 0;try{var n=v(r.error);if(!n)throw e;e=n.call(r,e)}catch(e){try{g(t)}finally{throw e}}return g(t),e},complete:function(e){var t=this._s;if(!y(t)){var r=t._o;t._o=void 0;try{var n=v(r.complete);e=n?n.call(r,e):void 0}catch(e){try{g(t)}finally{throw e}}return g(t),e}}});var b=function(e){c(this,b,"Observable","_f")._f=u(e)};f(b.prototype,{subscribe:function(e){return new m(e,this._f)},forEach:function(e){var t=this;return new(a.Promise||i.Promise)(function(r,n){u(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:r})})}}),f(b,{from:function(e){var t="function"==typeof this?this:b,r=v(l(e)[s]);if(r){var n=l(r.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var r=!1;return o(function(){if(!r){try{if(h(e,!1,function(e){if(t.next(e),r)return p})===p)return}catch(e){if(r)throw e;return void t.error(e)}t.complete()}}),function(){r=!0}})},of:function(){for(var e=0,t=arguments.length,r=Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:b)(function(e){var t=!1;return o(function(){if(!t){for(var n=0;n<r.length;++n)if(e.next(r[n]),t)return;e.complete()}}),function(){t=!0}})}}),d(b.prototype,s,function(){return this}),n(n.G,{Observable:b}),r(40)("Observable")},function(e,t,r){var n=r(2),i=r(0),a=n.navigator,o=[].slice,s=!!a&&/MSIE .\./.test(a.userAgent),u=function(e){return function(t,r){var n=arguments.length>2,i=!!n&&o.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};i(i.G+i.B+i.F*s,{setTimeout:u(n.setTimeout),setInterval:u(n.setInterval)})},function(e,t,r){var n=r(0),i=r(91);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,r){for(var n=r(90),i=r(36),a=r(14),o=r(2),s=r(13),u=r(46),l=r(5),c=l("iterator"),f=l("toStringTag"),d=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),v=0;v<p.length;v++){var g,y=p[v],_=h[y],m=o[y],E=m&&m.prototype;if(E&&(E[c]||s(E,c,d),E[f]||s(E,f,y),u[y]=d,_))for(g in n)E[g]||a(E,g,n[g],!0)}},function(e,t,r){(function(t){!function(t){"use strict";function r(e,t,r,n){var a=t&&t.prototype instanceof i?t:i,o=Object.create(a.prototype),s=new h(n||[]);return o._invoke=l(e,r,s),o}function n(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function i(){}function a(){}function o(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function r(t,i,a,o){var s=n(e[t],e,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&_.call(l,"__await")?Promise.resolve(l.__await).then(function(e){r("next",e,a,o)},function(e){r("throw",e,a,o)}):Promise.resolve(l).then(function(e){u.value=e,a(u)},o)}o(s.arg)}function i(e,t){function n(){return new Promise(function(n,i){r(e,t,n,i)})}return a=a?a.then(n,n):n()}"object"==typeof t.process&&t.process.domain&&(r=t.process.domain.bind(r));var a;this._invoke=i}function l(e,t,r){var i=k;return function(a,o){if(i===w)throw new Error("Generator is already running");if(i===R){if("throw"===a)throw o;return v()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=c(s,r);if(u){if(u===P)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===k)throw i=R,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=w;var l=n(e,t,r);if("normal"===l.type){if(i=r.done?R:O,l.arg===P)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=R,r.method="throw",r.arg=l.arg)}}}function c(e,t){var r=e.iterator[t.method];if(r===g){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=g,c(e,t),"throw"===t.method))return P;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var i=n(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,P;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g),t.delegate=null,P):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,P)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(_.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=g,t.done=!0,t};return n.next=n}}return{next:v}}function v(){return{value:g,done:!0}}var g,y=Object.prototype,_=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},E=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",T=m.toStringTag||"@@toStringTag",S="object"==typeof e,A=t.regeneratorRuntime;if(A)return void(S&&(e.exports=A));A=t.regeneratorRuntime=S?e.exports:{},A.wrap=r;var k="suspendedStart",O="suspendedYield",w="executing",R="completed",P={},L={};L[E]=function(){return this};var D=Object.getPrototypeOf,C=D&&D(D(p([])));C&&C!==y&&_.call(C,E)&&(L=C);var I=o.prototype=i.prototype=Object.create(L);a.prototype=I.constructor=o,o.constructor=a,o[T]=a.displayName="GeneratorFunction",A.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},A.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,T in e||(e[T]="GeneratorFunction")),e.prototype=Object.create(I),e},A.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[b]=function(){return this},A.AsyncIterator=u,A.async=function(e,t,n,i){var a=new u(r(e,t,n,i));return A.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},s(I),I[T]="Generator",I[E]=function(){return this},I.toString=function(){return"[object Generator]"},A.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},A.values=p,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&_.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return a.type="throw",a.arg=e,r.next=t,n&&(r.method="next",r.arg=g),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=_.call(i,"catchLoc"),s=_.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&_.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,P):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),P},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),P}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;d(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=g),P}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,r(53))},function(e,t,r){r(342),e.exports=r(22).RegExp.escape},function(e,t,r){var n=r(0),i=r(343)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t){e.exports=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,r)}}},function(e,t,r){"use strict";r(345),r(346),r(347)},function(e,t,r){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(68),s=n(o),u=r(28),l=n(u),c=function(){function t(){i(this,t)}return a(t,null,[{key:"install",value:function(){if(e.performance&&e.performance.now)return void t._logger.debug("No need to install polyfill");t._logger.debug("Installing polyfill");var r=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-r}}}]),t}();c.id="performance.now",c._logger=(0,l.default)("PerformanceNowPolyfill"),t.default=c,s.default.register(c)}).call(t,r(53))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(68),s=n(o),u=r(28),l=n(u),c=function(){function e(){i(this,e)}return a(e,null,[{key:"install",value:function(){[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(t){if(t.hasOwnProperty("prepend"))return void e._logger.debug("No need to install polyfill on item",t);e._logger.debug("Installing polyfill on item",t),Object.defineProperty(t,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){var r=e instanceof Node;t.appendChild(r?e:document.createTextNode(String(e)))}),this.insertBefore(t,this.firstChild)}})})}}]),e}();c.id="prepend",c._logger=(0,l.default)("PrependPolyfill"),t.default=c,s.default.register(c)},function(e,t,r){(function(e,t){!function(){var r=void 0!==e&&"[object process]"==={}.toString.call(e)||"undefined"!=typeof navigator&&"ReactNative"===navigator.product?t:self;r.Proxy||(r.Proxy=function(){function e(e){return!!e&&("object"==typeof e||"function"==typeof e)}var t=null,r=function(r,n){function i(){}if(!e(r)||!e(n))throw new TypeError("Cannot create proxy with a non-object as target or handler");t=function(){i=function(e){throw new TypeError("Cannot perform '"+e+"' on a proxy that has been revoked")}};var a=n;n={get:null,set:null,apply:null,construct:null};for(var o in a){if(!(o in n))throw new TypeError("Proxy polyfill does not support trap '"+o+"'");n[o]=a[o]}"function"==typeof a&&(n.apply=a.apply.bind(a));var s=this,u=!1,l=!1;"function"==typeof r?(s=function(){var e=this&&this.constructor===s,t=Array.prototype.slice.call(arguments);return i(e?"construct":"apply"),e&&n.construct?n.construct.call(this,r,t):!e&&n.apply?n.apply(r,this,t):e?(t.unshift(r),new(r.bind.apply(r,t))):r.apply(this,t)},u=!0):r instanceof Array&&(s=[],l=!0);var c=n.get?function(e){return i("get"),n.get(this,e,s)}:function(e){return i("get"),this[e]},f=n.set?function(e,t){i("set"),n.set(this,e,t,s)}:function(e,t){i("set"),this[e]=t},d={};if(Object.getOwnPropertyNames(r).forEach(function(e){if(!((u||l)&&e in s)){var t={enumerable:!!Object.getOwnPropertyDescriptor(r,e).enumerable,get:c.bind(r,e),set:f.bind(r,e)};Object.defineProperty(s,e,t),d[e]=!0}}),a=!0,Object.setPrototypeOf?Object.setPrototypeOf(s,Object.getPrototypeOf(r)):s.__proto__?s.__proto__=r.__proto__:a=!1,n.get||!a)for(var h in r)d[h]||Object.defineProperty(s,h,{get:c.bind(r,h)});return Object.seal(r),Object.seal(s),s};return r.revocable=function(e,n){return{proxy:new r(e,n),revoke:t}},r}(),r.Proxy.revocable=r.Proxy.revocable)}()}).call(t,r(348),r(53))},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){v&&h&&(v=!1,h.length?p=h.concat(p):g=-1,p.length&&s())}function s(){if(!v){var e=i(o);v=!0;for(var t=p.length;t;){for(h=p,p=[];++g<t;)h&&h[g].run();g=-1,t=p.length}h=null,v=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(e){f=n}}();var h,p=[],v=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new u(e,t)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,r){!function(t,n){e.exports=n(r(11),r(350))}(0,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAME=t.VERSION=void 0;var n=r(0),i=r(3),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=a.default,t.VERSION="1.12.1",t.NAME="@playkit-js/playkit-js-hls",a.default.isSupported()&&(0,n.registerMediaSourceAdapter)(a.default)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),c=n(l),f=r(4),d=n(f),h=r(5),p=r(0),v=r(6),g=n(v),y=function(e){function t(e,r,n){i(this,t),t._logger.debug("Creating adapter. Hls version: "+c.default.version);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n));return o._triedReloadWithRedirect=!1,o._startTime=0,o._config=p.Utils.Object.mergeDeep({},d.default,o._config),o._config.forceRedirectExternalStreams&&(o._config.hlsConfig.pLoader=g.default),o._hls=new c.default(o._config.hlsConfig),o._capabilities.fpsControl=!0,o._hls.subtitleDisplay=o._config.subtitleDisplay,o._addBindings(),o}return o(t,e),u(t,null,[{key:"createAdapter",value:function(e,t,r){var n=p.Utils.Object.copyDeep(d.default);if(p.Utils.Object.hasPropertyPath(r,"sources.options")){var i=r.sources.options;n.forceRedirectExternalStreams=i.forceRedirectExternalStreams,n.redirectExternalStreamsHandler=i.redirectExternalStreamsHandler,n.redirectExternalStreamsTimeout=i.redirectExternalStreamsTimeout,g.default.redirectExternalStreamsHandler=n.redirectExternalStreamsHandler,g.default.redirectExternalStreamsTimeout=n.redirectExternalStreamsTimeout}if(p.Utils.Object.hasPropertyPath(r,"playback.startTime")&&p.Utils.Object.getPropertyPath(r,"playback.startTime")>-1&&(n.hlsConfig.startPosition=r.playback.startTime),p.Utils.Object.hasPropertyPath(r,"playback.useNativeTextTrack")&&(n.subtitleDisplay=p.Utils.Object.getPropertyPath(r,"playback.useNativeTextTrack")),p.Utils.Object.hasPropertyPath(r,"abr.fpsDroppedFramesInterval")&&(n.hlsConfig.fpsDroppedFramesInterval=r.abr.fpsDroppedFramesInterval),p.Utils.Object.hasPropertyPath(r,"abr.fpsDroppedMonitoringThreshold")&&(n.hlsConfig.fpsDroppedMonitoringThreshold=r.abr.fpsDroppedMonitoringThreshold),p.Utils.Object.hasPropertyPath(r,"abr.capLevelOnFPSDrop")&&(n.hlsConfig.capLevelOnFPSDrop=r.abr.capLevelOnFPSDrop),n.hlsConfig.enableCEA708Captions=r.playback.enableCEA708Captions,n.hlsConfig.captionsTextTrack1Label=r.playback.captionsTextTrack1Label,n.hlsConfig.captionsTextTrack1LanguageCode=r.playback.captionsTextTrack1LanguageCode,n.hlsConfig.captionsTextTrack2Label=r.playback.captionsTextTrack2Label,n.hlsConfig.captionsTextTrack2LanguageCode=r.playback.captionsTextTrack2LanguageCode,p.Utils.Object.hasPropertyPath(r,"abr")){var a=r.abr;"boolean"==typeof a.enabled&&(n.abr.enabled=a.enabled),"boolean"==typeof a.capLevelToPlayerSize&&(n.hlsConfig.capLevelToPlayerSize=a.capLevelToPlayerSize),a.defaultBandwidthEstimate&&(n.hlsConfig.abrEwmaDefaultEstimate=a.defaultBandwidthEstimate),a.restrictions&&(a.restrictions.minBitrate>0&&(n.hlsConfig.minAutoBitrate=a.restrictions.minBitrate),a.restrictions.maxBitrate<1/0&&(n.hlsConfig.capLevelToPlayerSize=!1,n.abr.restrictions=a.restrictions))}return p.Utils.Object.hasPropertyPath(r,"playback.options.html5.hls")&&p.Utils.Object.mergeDeep(n.hlsConfig,r.playback.options.html5.hls),new this(e,t,n)}},{key:"canPlayType",value:function(e){var r="string"==typeof e&&t._hlsMimeTypes.includes(e.toLowerCase());return t._logger.debug("canPlayType result for mimeType:"+e+" is "+r.toString()),r}},{key:"canPlayDrm",value:function(){return t._logger.warn("canPlayDrm result is false"),!1}},{key:"isSupported",value:function(){var e=c.default.isSupported();return t._logger.debug("isSupported:"+e),e}}]),u(t,[{key:"_addBindings",value:function(){var e=this;this._hls.on(c.default.Events.ERROR,function(t,r){return e._onError(r)}),this._hls.on(c.default.Events.MANIFEST_LOADED,this._onManifestLoaded.bind(this)),this._hls.on(c.default.Events.LEVEL_SWITCHED,this._onLevelSwitched.bind(this)),this._hls.on(c.default.Events.AUDIO_TRACK_SWITCHED,this._onAudioTrackSwitched.bind(this)),this._hls.on(c.default.Events.FPS_DROP,function(t,r){return e._onFpsDrop(r)}),this._mediaAttachedPromise=new Promise(function(t){return e._onMediaAttached=t}),this._hls.on(c.default.Events.MEDIA_ATTACHED,function(){return e._onMediaAttached()}),this._onRecoveredCallback=function(){return e._onRecovered()},this._onAddTrack=this._onAddTrack.bind(this),this._videoElement.addEventListener("addtrack",this._onAddTrack),this._videoElement.textTracks.onaddtrack=this._onAddTrack}},{key:"_onFpsDrop",value:function(e){this._trigger(p.EventType.FPS_DROP,e)}},{key:"_onAddTrack",value:function(e){if(!this._hls.subtitleTracks.length){var r=this._parseCEATextTrack(e.track);r&&(t._logger.debug("A CEA 608/708 caption has found",r),this._playerTracks.push(r),this._trigger(p.EventType.TRACKS_CHANGED,{tracks:this._playerTracks}))}}},{key:"handleMediaError",value:function(e){return e.code===e.MEDIA_ERR_DECODE&&(t._logger.debug("The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",e.message),this._handleMediaError())}},{key:"load",value:function(e){var t=this;return this._loadPromise||(this._startTime=e,this._loadPromise=new Promise(function(e){t._resolveLoad=e,t._loadInternal()})),this._loadPromise}},{key:"_loadInternal",value:function(){this._sourceObj&&this._sourceObj.url&&(this._hls.loadSource(this._sourceObj.url),this._hls.attachMedia(this._videoElement),this._trigger(p.EventType.ABR_MODE_CHANGED,{mode:this.isAdaptiveBitrateEnabled()?"auto":"manual"}))}},{key:"_reloadWithDirectManifest",value:function(){this._triedReloadWithRedirect=!0,this._reset(),this._config.hlsConfig.pLoader=g.default,this._hls=new c.default(this._config.hlsConfig),this._addBindings(),this._loadInternal()}},{key:"_removeRecoveredCallbackListener",value:function(){this._onRecoveredCallback&&(this._videoElement.removeEventListener(p.EventType.LOADED_METADATA,this._onRecoveredCallback),this._onRecoveredCallback=null)}},{key:"destroy",value:function(){var e=this;return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this).then(function(){t._logger.debug("destroy"),e._loadPromise=null,e._playerTracks=[],e._reset()})}},{key:"_reset",value:function(){this._removeBindings(),clearTimeout(this._resolveLoadTimeout),this._hls.detachMedia(),this._hls.destroy()}},{key:"_parseTracks",value:function(){var e=this._parseAudioTracks(this._hls.audioTracks||[]),t=this._parseVideoTracks(this._hls.levels||[]),r=this._parseTextTracks(this._hls.subtitleTracks||[]);return e.concat(t).concat(r)}},{key:"_parseAudioTracks",value:function(e){for(var t=[],r=0;r<e.length;r++){var n={id:e[r].id,active:this._hls.audioTrack===e[r].id,label:e[r].name,language:e[r].lang,index:r};t.push(new p.AudioTrack(n))}return t}},{key:"_parseVideoTracks",value:function(e){for(var t=[],r=0;r<e.length;r++){var n={active:this._hls.startLevel===r,bandwidth:e[r].bitrate,width:e[r].width,height:e[r].height,language:"",index:r};t.push(new p.VideoTrack(n))}return t}},{key:"_parseTextTracks",value:function(e){for(var t=[],r=0;r<e.length;r++){var n={id:e[r].id,active:e[r].default,label:e[r].name,kind:e[r].type.toLowerCase(),language:e[r].lang,index:r};t.push(new p.TextTrack(n))}return t}},{key:"_parseCEATextTrack",value:function(e){var t=null;if("captions"===e.kind){var r={id:e.id,active:"showing"===e.mode,label:e.label,kind:e.kind,language:e.language,index:this._playerTracks.filter(function(e){return e instanceof p.TextTrack}).length};t=new p.TextTrack(r)}return t}},{key:"selectAudioTrack",value:function(e){e instanceof p.AudioTrack&&!e.active&&this._hls.audioTracks&&(this._hls.audioTrack=e.id)}},{key:"selectVideoTrack",value:function(e){e instanceof p.VideoTrack&&(!e.active||this.isAdaptiveBitrateEnabled())&&this._hls.levels&&(this.isAdaptiveBitrateEnabled()&&this._trigger(p.EventType.ABR_MODE_CHANGED,{mode:"manual"}),this._hls.currentLevel=e.index)}},{key:"selectTextTrack",value:function(e){e instanceof p.TextTrack&&!e.active&&(this._hls.subtitleTracks.length?(this._hls.subtitleTrack=e.id,this._notifyTrackChanged(e)):this._selectNativeTextTrack(e))}},{key:"_selectNativeTextTrack",value:function(e){var t=Array.from(this._videoElement.textTracks).find(function(t){return t.language===e.language});t&&(this._disableNativeTextTracks(),t.mode=this._config.subtitleDisplay?"showing":"hidden",this._notifyTrackChanged(e))}},{key:"_notifyTrackChanged",value:function(e){t._logger.debug("Text track changed",e),this._onTrackChanged(e)}},{key:"_disableNativeTextTracks",value:function(){Array.from(this._videoElement.textTracks).forEach(function(e){e.mode="disabled"})}},{key:"hideTextTrack",value:function(){this._hls.subtitleTracks.length?this._hls.subtitleTrack=-1:this._disableNativeTextTracks()}},{key:"enableAdaptiveBitrate",value:function(){this.isAdaptiveBitrateEnabled()||(this._trigger(p.EventType.ABR_MODE_CHANGED,{mode:"auto"}),this._hls.nextLevel=-1)}},{key:"isAdaptiveBitrateEnabled",value:function(){return this._hls.autoLevelEnabled}},{key:"_getLevelDetails",value:function(){var e=this._hls.levels[this._hls.currentLevel]||this._hls.levels[this._hls.nextLevel]||this._hls.levels[this._hls.nextAutoLevel]||this._hls.levels[this._hls.nextLoadLevel];return e&&e.details?e.details:{}}},{key:"_getLiveEdge",value:function(){try{var e=void 0;return e=this._hls.liveSyncPosition?this._hls.liveSyncPosition:this._hls.config.liveSyncDuration?this._videoElement.duration-this._hls.config.liveSyncDuration:this._videoElement.duration-this._hls.config.liveSyncDurationCount*this._getLevelDetails().targetduration,e>0?e:this._videoElement.duration}catch(e){return t._logger.debug("Live edge calculation failed, fall back to duration"),this._videoElement.duration}}},{key:"seekToLiveEdge",value:function(){try{this._videoElement.currentTime=this._getLiveEdge()}catch(e){return}}},{key:"isLive",value:function(){try{return!!this._getLevelDetails().live}catch(e){return!1}}},{key:"_onManifestLoaded",value:function(){var e=this;t._logger.debug("The source has been loaded successfully"),this._hls.config.autoStartLoad||this._hls.startLoad(this._startTime),this._playerTracks=this._parseTracks(),this._maybeApplyAbrRestrictions(),this._mediaAttachedPromise.then(function(){e._resolveLoad({tracks:e._playerTracks})})}},{key:"_maybeApplyAbrRestrictions",value:function(){if(this._config.abr.enabled){if(this._config.abr.restrictions){var e=this._config.abr.restrictions;if(e.maxBitrate){var r=e.minBitrate?e.minBitrate:0;if(e.maxBitrate>r){var n=this._hls.levels.findIndex(function(t){return t.bitrate>e.maxBitrate});n>0&&(n-=1),this._hls.autoLevelCapping=n}else t._logger.warn("Invalid maxBitrate restriction, maxBitrate must be greater than minBitrate",r,e.maxBitrate)}}}else this._hls.currentLevel=0}},{key:"_onLevelSwitched",value:function(e,r){var n=this._playerTracks.find(function(e){return e instanceof p.VideoTrack&&e.index===r.level});t._logger.debug("Video track changed",n),this._onTrackChanged(n)}},{key:"_onAudioTrackSwitched",value:function(e,r){var n=this._playerTracks.find(function(e){return e instanceof p.AudioTrack&&e.id===r.id});t._logger.debug("Audio track changed",n),this._onTrackChanged(n),this._handleWaitingUponAudioTrackSwitch()}},{key:"_handleWaitingUponAudioTrackSwitch",value:function(){var e=this;if(["IE","Edge"].includes(p.Env.browser.name)){var t=function t(){e._trigger(p.EventType.PLAYING),e._videoElement.removeEventListener(p.EventType.TIME_UPDATE,t)};this._videoElement.addEventListener(p.EventType.TIME_UPDATE,t)}}},{key:"_onError",value:function(e){var r=e.type,n=e.details;if(e.fatal){var i=void 0;switch(r){case c.default.ErrorTypes.NETWORK_ERROR:![c.default.ErrorDetails.MANIFEST_LOAD_ERROR,c.default.ErrorDetails.MANIFEST_LOAD_TIMEOUT].includes(n)||this._triedReloadWithRedirect||this._config.forceRedirectExternalStreams?i=new p.Error(p.Error.Severity.CRITICAL,p.Error.Category.NETWORK,p.Error.Code.HTTP_ERROR,n):this._reloadWithDirectManifest();break;case c.default.ErrorTypes.MEDIA_ERROR:i=this._handleMediaError()?new p.Error(p.Error.Severity.RECOVERABLE,p.Error.Category.MEDIA,p.Error.Code.HLS_FATAL_MEDIA_ERROR,n):new p.Error(p.Error.Severity.CRITICAL,p.Error.Category.MEDIA,p.Error.Code.HLS_FATAL_MEDIA_ERROR,n);break;default:i=new p.Error(p.Error.Severity.CRITICAL,p.Error.Category.PLAYER,p.Error.Code.HLS_FATAL_MEDIA_ERROR,n)}this._trigger(p.EventType.ERROR,i),i&&i.severity===p.Error.Severity.CRITICAL&&this.destroy()}else{var a=h.HlsJsErrorMap[n]||{category:0,code:0},o=a.category,s=a.code;t._logger.warn(new p.Error(p.Error.Severity.RECOVERABLE,o,s,n))}}},{key:"_handleMediaError",value:function(){var e=performance.now(),r=!0;return this._checkTimeDeltaHasPassed(e,this._recoverDecodingErrorDate,this._config.recoverDecodingErrorDelay)?(this._videoElement.addEventListener(p.EventType.LOADED_METADATA,this._onRecoveredCallback),this._recoverDecodingError()):this._checkTimeDeltaHasPassed(e,this._recoverSwapAudioCodecDate,this._config.recoverSwapAudioCodecDelay)?(this._videoElement.addEventListener(p.EventType.LOADED_METADATA,this._onRecoveredCallback),this._recoverSwapAudioCodec()):(r=!1,t._logger.error("cannot recover, last media error recovery failed")),r}},{key:"_onRecovered",value:function(){this._trigger(p.EventType.MEDIA_RECOVERED),this._videoElement.removeEventListener(p.EventType.LOADED_METADATA,this._onRecoveredCallback)}},{key:"_checkTimeDeltaHasPassed",value:function(e,t,r){return!t||e-t>r}},{key:"_recoverDecodingError",value:function(){this._recoverDecodingErrorDate=performance.now(),t._logger.warn("try to recover media Error"),this._hls.recoverMediaError()}},{key:"_recoverSwapAudioCodec",value:function(){this._recoverSwapAudioCodecDate=performance.now(),t._logger.warn("try to swap Audio Codec and recover media Error"),this._hls.swapAudioCodec(),this._hls.recoverMediaError()}},{key:"_removeBindings",value:function(){this._hls.off(c.default.Events.ERROR,this._onError),this._hls.off(c.default.Events.LEVEL_SWITCHED,this._onLevelSwitched),this._hls.off(c.default.Events.AUDIO_TRACK_SWITCHED,this._onAudioTrackSwitched),this._hls.off(c.default.Events.MANIFEST_LOADED,this._onManifestLoaded),this._hls.off(c.default.Events.FPS_DROP,this._onFpsDrop),this._videoElement.textTracks.onaddtrack=null,this._videoElement.removeEventListener("addtrack",this._onAddTrack),this._removeRecoveredCallbackListener()}},{key:"getStartTimeOfDvrWindow",value:function(){if(!this.isLive())return 0;try{var e=this._hls.levels[this._hls.nextLoadLevel],r=e.details,n=r.fragments,i=n.length,a=n[0].start+n[0].duration,o=n[i-1].start+n[i-1].duration,s=void 0!==this._hls.config.liveMaxLatencyDuration?this._hls.config.liveMaxLatencyDuration:this._hls.config.liveMaxLatencyDurationCount*r.targetduration;return Math.max(a-this._hls.config.maxFragLookUpTolerance,o-s)}catch(e){return t._logger.debug("Unable obtain the start of DVR window"),0}}}]),t}(p.BaseMediaSourceAdapter);y.id="HlsAdapter",y._logger=p.BaseMediaSourceAdapter.getLogger(y.id),y._hlsMimeTypes=["application/x-mpegurl","application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],t.default=y},function(e,t){e.exports={recoverDecodingErrorDelay:3e3,recoverSwapAudioCodecDelay:3e3,abr:{enabled:!0,restrictions:{}},hlsConfig:{fragLoadingMaxRetry:4,maxMaxBufferLength:60}}},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.HlsJsErrorMap=void 0;var i,a=r(1),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=r(0),u=(i={},n(i,o.default.ErrorDetails.MANIFEST_LOAD_ERROR,{category:s.Error.Category.MANIFEST,code:s.Error.Code.HTTP_ERROR}),n(i,o.default.ErrorDetails.MANIFEST_LOAD_TIMEOUT,{category:s.Error.Category.MANIFEST,code:s.Error.Code.TIMEOUT}),n(i,o.default.ErrorDetails.MANIFEST_PARSING_ERROR,{category:s.Error.Category.MANIFEST,code:s.Error.Code.HLSJS_CANNOT_PARSE}),n(i,o.default.ErrorDetails.LEVEL_LOAD_ERROR,{category:s.Error.Category.NETWORK,code:s.Error.Code.HTTP_ERROR}),n(i,o.default.ErrorDetails.LEVEL_LOAD_TIMEOUT,{category:s.Error.Category.NETWORK,code:s.Error.Code.TIMEOUT}),n(i,o.default.ErrorDetails.LEVEL_SWITCH_ERROR,{category:s.Error.Category.PLAYER,code:s.Error.Code.BITRATE_SWITCH_ISSUE}),n(i,o.default.ErrorDetails.FRAG_LOAD_ERROR,{category:s.Error.Category.NETWORK,code:s.Error.Code.HTTP_ERROR}),n(i,o.default.ErrorDetails.FRAG_LOOP_LOADING_ERROR,{category:s.Error.Category.NETWORK,code:s.Error.Code.HTTP_ERROR}),n(i,o.default.ErrorDetails.FRAG_LOAD_TIMEOUT,{category:s.Error.Category.NETWORK,code:s.Error.Code.TIMEOUT}),n(i,o.default.ErrorDetails.FRAG_PARSING_ERROR,{category:s.Error.Category.MEDIA,code:s.Error.Code.HLS_FRAG_PARSING_ERROR}),n(i,o.default.ErrorDetails.BUFFER_APPEND_ERROR,{category:s.Error.Category.MEDIA,code:s.Error.Code.HLS_BUFFER_APPEND_ISSUE}),n(i,o.default.ErrorDetails.BUFFER_APPENDING_ERROR,{category:s.Error.Category.MEDIA,code:s.Error.Code.HLS_BUFFER_APPENDING_ISSUE}),n(i,o.default.ErrorDetails.BUFFER_STALLED_ERROR,{category:s.Error.Category.MEDIA,code:s.Error.Code.HLS_BUFFER_STALLED_ERROR}),i);t.HlsJsErrorMap=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(1),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=r.load.bind(r),s=t.redirectExternalStreamsHandler;return r.load=function(e,r,n){var i=e.url;"manifest"===e.type?o.Utils.Http.jsonp(i,s,{timeout:t.redirectExternalStreamsTimeout}).then(function(t){e.url=t,a(e,r,n)}).catch(function(){return a(e,r,n)}):a(e,r,n)},r}return a(t,e),t}(u.default.DefaultConfig.loader);l.redirectExternalStreamsHandler=function(e){return e},t.default=l}])})},function(e,t,r){"undefined"!=typeof window&&function(t,r){e.exports=r()}(0,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(t){return e[t]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":/*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new i(r,n||e,a),s=l?l+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}var u=Object.prototype.hasOwnProperty,l="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(l=!1)),s.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)u.call(e,t)&&r.push(l?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=l?l+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,a=new Array(i);n<i;n++)a[n]=r[n].fn;return a},s.prototype.listenerCount=function(e){var t=l?l+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,n,i,a){var o=l?l+e:e;if(!this._events[o])return!1;var s,u,c=this._events[o],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,i),!0;case 6:return c.fn.call(c.context,t,r,n,i,a),!0}for(u=1,s=new Array(f-1);u<f;u++)s[u-1]=arguments[u];c.fn.apply(c.context,s)}else{var d,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),f){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,n);break;default:if(!s)for(d=1,s=new Array(f-1);d<f;d++)s[d-1]=arguments[d];c[u].fn.apply(c[u].context,s)}}return!0},s.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,r,n){var i=l?l+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||n&&!a.once||r&&a.context!==r||o(this,i);else{for(var s=0,u=[],c=a.length;s<c;s++)(a[s].fn!==t||n&&!a[s].once||r&&a[s].context!==r)&&u.push(a[s]);u.length?this._events[i]=1===u.length?u[0]:u:o(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=l?l+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=l,s.EventEmitter=s,e.exports=s},"./node_modules/node-libs-browser/node_modules/events/events.js":/*!**********************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/events/events.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(r=this._events[e],o(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(a(r))for(s=Array.prototype.slice.call(arguments,1),l=r.slice(),i=l.length,u=0;u<i;u++)l[u].apply(this,s);return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,o,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},"./node_modules/url-toolkit/src/url-toolkit.js":/*!*****************************************************!*\
  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
  \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){!function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=n.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,f=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=o.normalizePath(f)}else l.path=s.path,a.params||(l.params=s.params,a.query||(l.query=s.query));return null===l.path&&(l.path=r.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(l)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o}()},"./node_modules/webworkify-webpack/index.js":/*!**************************************************!*\
  !*** ./node_modules/webworkify-webpack/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){function n(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t.oe=function(e){throw console.error(e),e};var n=t(t.s=ENTRY_MODULE);return n.default||n}function i(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(e){return!isNaN(1*e)}function o(e,t,n){var o={};o[n]=[];var s=t.toString(),u=s.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return o;for(var f,d=u[1],h=new RegExp("(\\\\n|\\W)"+i(d)+c,"g");f=h.exec(s);)"dll-reference"!==f[3]&&o[n].push(f[3]);for(h=new RegExp("\\("+i(d)+'\\("(dll-reference\\s('+l+'))"\\)\\)'+c,"g");f=h.exec(s);)e[f[2]]||(o[n].push(f[1]),e[f[2]]=r(f[1]).m),o[f[2]]=o[f[2]]||[],o[f[2]].push(f[4]);for(var p=Object.keys(o),v=0;v<p.length;v++)for(var g=0;g<o[p[v]].length;g++)a(o[p[v]][g])&&(o[p[v]][g]=1*o[p[v]][g]);return o}function s(e){return Object.keys(e).reduce(function(t,r){return t||e[r].length>0},!1)}function u(e,t){for(var r={main:[t]},n={main:[]},i={main:{}};s(r);)for(var a=Object.keys(r),u=0;u<a.length;u++){var l=a[u],c=r[l],f=c.pop();if(i[l]=i[l]||{},!i[l][f]&&e[l][f]){i[l][f]=!0,n[l]=n[l]||[],n[l].push(f);for(var d=o(e,e[l][f],l),h=Object.keys(d),p=0;p<h.length;p++)r[h[p]]=r[h[p]]||[],r[h[p]]=r[h[p]].concat(d[h[p]])}}return n}var l="[\\.|\\-|\\+|\\w|/|@]+",c="\\((/\\*.*?\\*/)?s?.*?("+l+").*?\\)";e.exports=function(e,t){t=t||{};var i={main:r.m},a=t.all?{main:Object.keys(i.main)}:u(i,e),o="";Object.keys(a).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;a[e][t];)t++;a[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map(function(t){return JSON.stringify(t)+": "+i[e][t].toString()}).join(",")+"});\n"}),o=o+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map(function(e){return JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"});if(t.bare)return s;var l=window.URL||window.webkitURL||window.mozURL||window.msURL,c=l.createObjectURL(s),f=new window.Worker(c);return f.objectURL=c,f}},"./src/config.js":/*!***********************!*\
  !*** ./src/config.js ***!
  \***********************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./controller/abr-controller */"./src/controller/abr-controller.js"),i=r(/*! ./controller/buffer-controller */"./src/controller/buffer-controller.js"),a=r(/*! ./controller/cap-level-controller */"./src/controller/cap-level-controller.js"),o=r(/*! ./controller/fps-controller */"./src/controller/fps-controller.js"),s=r(/*! ./utils/xhr-loader */"./src/utils/xhr-loader.js"),u=r(/*! ./controller/audio-track-controller */"./src/controller/audio-track-controller.js"),l=r(/*! ./controller/audio-stream-controller */"./src/controller/audio-stream-controller.js"),c=r(/*! ./utils/cues */"./src/utils/cues.js"),f=r(/*! ./controller/timeline-controller */"./src/controller/timeline-controller.js"),d=r(/*! ./controller/subtitle-track-controller */"./src/controller/subtitle-track-controller.js"),h=r(/*! ./controller/subtitle-stream-controller */"./src/controller/subtitle-stream-controller.js"),p=r(/*! ./controller/eme-controller */"./src/controller/eme-controller.js"),v=r(/*! ./utils/mediakeys-helper */"./src/utils/mediakeys-helper.js");t.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:n.default,bufferController:i.default,capLevelController:a.default,fpsController:o.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:v.requestMediaKeySystemAccess},t.hlsDefaultConfig.subtitleStreamController=h.SubtitleStreamController,t.hlsDefaultConfig.subtitleTrackController=d.default,t.hlsDefaultConfig.timelineController=f.default,t.hlsDefaultConfig.cueHandler=c,t.hlsDefaultConfig.enableCEA708Captions=!0,t.hlsDefaultConfig.enableWebVTT=!0,t.hlsDefaultConfig.captionsTextTrack1Label="English",t.hlsDefaultConfig.captionsTextTrack1LanguageCode="en",t.hlsDefaultConfig.captionsTextTrack2Label="Spanish",t.hlsDefaultConfig.captionsTextTrack2LanguageCode="es",t.hlsDefaultConfig.audioStreamController=l.default,t.hlsDefaultConfig.audioTrackController=u.default,t.hlsDefaultConfig.emeController=p.default},"./src/controller/abr-controller.js":/*!******************************************!*\
  !*** ./src/controller/abr-controller.js ***!
  \******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.js"),s=r(/*! ../errors */"./src/errors.js"),u=r(/*! ../utils/logger */"./src/utils/logger.js"),l=r(/*! ../utils/ewma-bandwidth-estimator */"./src/utils/ewma-bandwidth-estimator.js"),c=window.performance,f=function(t){function r(e){var r=t.call(this,e,i.default.FRAG_LOADING,i.default.FRAG_LOADED,i.default.FRAG_BUFFERED,i.default.ERROR)||this;return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return n(r,t),r.prototype.destroy=function(){this.clearTimer(),a.default.prototype.destroy.call(this)},r.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r=this.hls,n=r.config,i=t.level,a=r.levels[i].details.live,o=void 0,s=void 0;a?(o=n.abrEwmaFastLive,s=n.abrEwmaSlowLive):(o=n.abrEwmaFastVoD,s=n.abrEwmaSlowVoD),this._bwEstimator=new l.default(r,s,o,n.abrEwmaDefaultEstimate)}},r.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var n=r.loader,a=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return u.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var s=n.stats;if(t&&s&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var l=c.now()-s.trequest,f=Math.abs(t.playbackRate);if(l>500*r.duration/f){var d=e.levels,h=Math.max(1,s.bw?s.bw/8:1e3*s.loaded/l),p=d[r.level],v=p.realBitrate?Math.max(p.realBitrate,p.bitrate):p.bitrate,g=s.total?s.total:Math.max(s.loaded,Math.round(r.duration*v/8)),y=t.currentTime,_=(g-s.loaded)/h,m=(o.BufferHelper.bufferInfo(t,y,e.config.maxBufferHole).end-y)/f;if(m<2*r.duration/f&&_>m){var E=void 0,b=void 0;for(b=r.level-1;b>a;b--){var T=d[b].realBitrate?Math.max(d[b].realBitrate,d[b].bitrate):d[b].bitrate;if((E=r.duration*T/(6.4*h))<m)break}E<_&&(u.logger.warn("loading too slow, abort fragment loading and switch to level "+b+":fragLoadedDelay["+b+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+E.toFixed(1)+"<"+_.toFixed(1)+":"+m.toFixed(1)),e.nextLoadLevel=b,this._bwEstimator.sample(l,s.loaded),n.abort(),this.clearTimer(),e.trigger(i.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:s}))}}}}},r.prototype.onFragLoaded=function(t){var r=t.frag;if("main"===r.type&&e.isFinite(r.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[r.level],i=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,a=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:i,duration:a},n.realBitrate=Math.round(8*i/a)}if(t.frag.bitrateTest){var o=t.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(t)}}},r.prototype.onFragBuffered=function(t){var r=t.stats,n=t.frag;if(!0!==r.aborted&&"main"===n.type&&e.isFinite(n.sn)&&(!n.bitrateTest||r.tload===r.tbuffered)){var i=r.tparsed-r.trequest;u.logger.log("latency/loading/parsing/append/kbps:"+Math.round(r.tfirst-r.trequest)+"/"+Math.round(r.tload-r.tfirst)+"/"+Math.round(r.tparsed-r.tload)+"/"+Math.round(r.tbuffered-r.tparsed)+"/"+Math.round(8*r.loaded/(r.tbuffered-r.trequest))),this._bwEstimator.sample(i,r.loaded),r.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},r.prototype.onError=function(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(r.prototype,"nextAutoLevel",{get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_nextABRAutoLevel",{get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,a=e.media,s=this.lastLoadedFragLevel,l=this.fragCurrent?this.fragCurrent.duration:0,c=a?a.currentTime:0,f=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(o.BufferHelper.bufferInfo(a,c,n.maxBufferHole).end-c)/f,p=this._findBestLevel(s,l,d,i,t,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(p>=0)return p;u.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var v=l?Math.min(l,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,y=n.abrBandWidthUpFactor;if(0===h){var _=this.bitrateTestDelay;if(_){v=(l?Math.min(l,n.maxLoadingDelay):n.maxLoadingDelay)-_,u.logger.trace("bitrate test took "+Math.round(1e3*_)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*v)+" ms"),g=y=1}}return p=this._findBestLevel(s,l,d,i,t,h+v,g,y,r),Math.max(p,0)},enumerable:!0,configurable:!0}),r.prototype._findBestLevel=function(e,t,r,n,i,a,o,s,l){for(var c=i;c>=n;c--){var f=l[c];if(f){var d=f.details,h=d?d.totalduration/d.fragments.length:t,p=!!d&&d.live,v=void 0;v=c<=e?o*r:s*r;var g=l[c].realBitrate?Math.max(l[c].realBitrate,l[c].bitrate):l[c].bitrate,y=g*h/v;if(u.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(v)+"/"+g+"/"+h+"/"+a+"/"+y),v>g&&(!y||p&&!this.bitrateTestDelay||y<a))return c}}return-1},r}(a.default);t.default=f}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/audio-stream-controller.js":/*!***************************************************!*\
  !*** ./src/controller/audio-stream-controller.js ***!
  \***************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../utils/binary-search */"./src/utils/binary-search.js"),a=r(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.js"),o=r(/*! ../demux/demuxer */"./src/demux/demuxer.js"),s=r(/*! ../events */"./src/events.js"),u=r(/*! ./level-helper */"./src/controller/level-helper.js"),l=r(/*! ../utils/time-ranges */"./src/utils/time-ranges.js"),c=r(/*! ../errors */"./src/errors.js"),f=r(/*! ../utils/logger */"./src/utils/logger.js"),d=r(/*! ../utils/discontinuities */"./src/utils/discontinuities.js"),h=r(/*! ./fragment-tracker */"./src/controller/fragment-tracker.js"),p=r(/*! ../loader/fragment */"./src/loader/fragment.js"),v=r(/*! ./base-stream-controller */"./src/controller/base-stream-controller.js"),g=window.performance,y=function(t){function r(e,r){var n=t.call(this,e,s.default.MEDIA_ATTACHED,s.default.MEDIA_DETACHING,s.default.AUDIO_TRACKS_UPDATED,s.default.AUDIO_TRACK_SWITCHING,s.default.AUDIO_TRACK_LOADED,s.default.KEY_LOADED,s.default.FRAG_LOADED,s.default.FRAG_PARSING_INIT_SEGMENT,s.default.FRAG_PARSING_DATA,s.default.FRAG_PARSED,s.default.ERROR,s.default.BUFFER_RESET,s.default.BUFFER_CREATED,s.default.BUFFER_APPENDED,s.default.BUFFER_FLUSHED,s.default.INIT_PTS_FOUND)||this;return n.fragmentTracker=r,n.config=e.config,n.audioCodecSwap=!1,n._state=v.State.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return n(r,t),r.prototype.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},r.prototype.onHandlerDestroyed=function(){this.state=v.State.STOPPED,this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},r.prototype.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[r]=n,this.videoTrackCC=r,f.logger.log("InitPTS for cc: "+r+" found from video track: "+n),this.state===v.State.WAITING_INIT_PTS&&this.tick())},r.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(f.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=v.State.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=v.State.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=v.State.STOPPED},r.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v.State.STOPPED},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,f.logger.log("audio stream:"+t+"->"+e)}},enumerable:!0,configurable:!0}),r.prototype.doTick=function(){var t,r,n,o=this.hls,u=o.config;switch(this.state){case v.State.ERROR:case v.State.PAUSED:case v.State.BUFFER_FLUSHING:break;case v.State.STARTING:this.state=v.State.WAITING_TRACK,this.loadedmetadata=!1;break;case v.State.IDLE:var l=this.tracks;if(!l)break;if(!this.media&&(this.startFragRequested||!u.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var c=this.mediaBuffer?this.mediaBuffer:this.media,p=this.videoBuffer?this.videoBuffer:this.media,y=a.BufferHelper.bufferInfo(c,t,u.maxBufferHole),_=a.BufferHelper.bufferInfo(p,t,u.maxBufferHole),m=y.len,E=y.end,b=this.fragPrevious,T=Math.min(u.maxBufferLength,u.maxMaxBufferLength),S=Math.max(T,_.len),A=this.audioSwitch,k=this.trackId;if((m<S||A)&&k<l.length){if(void 0===(n=l[k].details)){this.state=v.State.WAITING_TRACK;break}if(!A&&this._streamEnded(y,n))return this.hls.trigger(s.default.BUFFER_EOS,{type:"audio"}),void(this.state=v.State.ENDED);var O=n.fragments,w=O.length,R=O[0].start,P=O[w-1].start+O[w-1].duration,L=void 0;if(A)if(n.live&&!n.PTSKnown)f.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),E=0;else if(E=t,n.PTSKnown&&t<R){if(!(y.end>R||y.nextStart))return;f.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=R+.05}if(n.initSegment&&!n.initSegment.data)L=n.initSegment;else if(E<=R){if(L=O[0],null!==this.videoTrackCC&&L.cc!==this.videoTrackCC&&(L=d.findFragWithCC(O,this.videoTrackCC)),n.live&&L.loadIdx&&L.loadIdx===this.fragLoadIdx){var D=y.nextStart?y.nextStart:R;return f.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(D+.05)),void(this.media.currentTime=D+.05)}}else{var C=void 0,I=u.maxFragLookUpTolerance,M=b?O[b.sn-O[0].sn+1]:void 0,x=function(e){var t=Math.min(I,e.duration);return e.start+e.duration-t<=E?1:e.start-t>E&&e.start?-1:0};E<P?(E>P-I&&(I=0),C=M&&!x(M)?M:i.default.search(O,x)):C=O[w-1],C&&(L=C,R=C.start,b&&L.level===b.level&&L.sn===b.sn&&(L.sn<n.endSN?(L=O[L.sn+1-n.startSN],f.logger.log("SN just loaded, load next one: "+L.sn)):L=null))}L&&(L.encrypted?(f.logger.log("Loading key for "+L.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+k),this.state=v.State.KEY_LOADING,o.trigger(s.default.KEY_LOADING,{frag:L})):(f.logger.log("Loading "+L.sn+", cc: "+L.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+k+", currentTime:"+t+",bufferEnd:"+E.toFixed(3)),this.fragCurrent=L,(A||this.fragmentTracker.getState(L)===h.FragmentState.NOT_LOADED)&&(this.startFragRequested=!0,e.isFinite(L.sn)&&(this.nextLoadPosition=L.start+L.duration),o.trigger(s.default.FRAG_LOADING,{frag:L}),this.state=v.State.FRAG_LOADING)))}break;case v.State.WAITING_TRACK:r=this.tracks[this.trackId],r&&r.details&&(this.state=v.State.IDLE);break;case v.State.FRAG_LOADING_WAITING_RETRY:var N=g.now(),j=this.retryDate;c=this.media;var F=c&&c.seeking;(!j||N>=j||F)&&(f.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=v.State.IDLE);break;case v.State.WAITING_INIT_PTS:var U=this.videoTrackCC;if(void 0===this.initPTS[U])break;var B=this.waitingFragment;if(B){var G=B.frag.cc;U!==G?(r=this.tracks[this.trackId],r.details&&r.details.live&&(f.logger.warn("Waiting fragment CC ("+G+") does not match video track CC ("+U+")"),this.waitingFragment=null,this.state=v.State.IDLE)):(this.state=v.State.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=v.State.IDLE;break;case v.State.STOPPED:case v.State.FRAG_LOADING:case v.State.PARSING:case v.State.PARSED:case v.State.ENDED:}},r.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},r.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(f.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onAudioTracksUpdated=function(e){f.logger.log("audio tracks updated"),this.tracks=e.audioTracks},r.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=v.State.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=v.State.IDLE),this.tick()},r.prototype.onAudioTrackLoaded=function(t){var r=t.details,n=t.id,i=this.tracks[n],a=r.totalduration,o=0;if(f.logger.log("track "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+a),r.live){var s=i.details;s&&r.fragments.length>0?(u.mergeDetails(s,r),o=r.fragments[0].start,r.PTSKnown?f.logger.log("live audio playlist sliding:"+o.toFixed(3)):f.logger.log("live audio playlist - outdated PTS, unknown sliding")):(r.PTSKnown=!1,f.logger.log("live audio playlist - first load, unknown sliding"))}else r.PTSKnown=!1;if(i.details=r,!this.startFragRequested){if(-1===this.startPosition){var l=r.startTimeOffset;e.isFinite(l)?(f.logger.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===v.State.WAITING_TRACK&&(this.state=v.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===v.State.KEY_LOADING&&(this.state=v.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===v.State.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var n=this.tracks[this.trackId],i=n.details,a=i.totalduration,u=t.level,l=t.sn,c=t.cc,d=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",h=this.stats=e.stats;if("initSegment"===l)this.state=v.State.IDLE,h.tparsed=h.tbuffered=g.now(),i.initSegment.data=e.payload,this.hls.trigger(s.default.FRAG_BUFFERED,{stats:h,frag:t,id:"audio"}),this.tick();else{this.state=v.State.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new o.default(this.hls,"audio"));var p=this.initPTS[c],y=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==p){this.pendingBuffering=!0,f.logger.log("Demuxing "+l+" of ["+i.startSN+" ,"+i.endSN+"],track "+u);this.demuxer.push(e.payload,y,d,null,t,a,!1,p)}else f.logger.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+l+" of ["+i.startSN+" ,"+i.endSN+"],track "+u),this.waitingFragment=e,this.state=v.State.WAITING_INIT_PTS}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===v.State.PARSING){var n=e.tracks,i=void 0;if(n.video&&delete n.video,i=n.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(s.default.BUFFER_CODECS,n),f.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.default.BUFFER_APPENDING,o))}this.tick()}}},r.prototype.onFragParsingData=function(t){var r=this,n=this.fragCurrent,i=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&i.sn===n.sn&&i.level===n.level&&this.state===v.State.PARSING){var a=this.trackId,o=this.tracks[a],l=this.hls;e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),n.addElementaryStream(p.default.ElementaryStreamTypes.AUDIO),f.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),u.updateFragPTSDTS(o.details,n,t.startPTS,t.endPTS);var d=this.audioSwitch,h=this.media,g=!1;if(d&&h)if(h.readyState){var y=h.currentTime;f.logger.log("switching audio track : currentTime:"+y),y>=t.startPTS&&(f.logger.log("switching audio track : flushing all audio"),this.state=v.State.BUFFER_FLUSHING,l.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),g=!0,this.audioSwitch=!1,l.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:a}))}else this.audioSwitch=!1,l.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:a});var _=this.pendingData;if(!_)return f.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void l.trigger(s.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&_.push({type:t.type,data:e,parent:"audio",content:"data"})}),!g&&_.length&&(_.forEach(function(e){r.state===v.State.PARSING&&(r.pendingBuffering=!0,r.hls.trigger(s.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},r.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===v.State.PARSING&&(this.stats.tparsed=g.now(),this.state=v.State.PARSED,this._checkAppendedParsed())},r.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},r.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==v.State.PARSING&&t!==v.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==v.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=g.now(),r.trigger(s.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;f.logger.log("audio buffered : "+l.default.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=v.State.IDLE}this.tick()}},r.prototype.onError=function(t){var r=t.frag;if(!r||"audio"===r.type)switch(t.details){case c.ErrorDetails.FRAG_LOAD_ERROR:case c.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=t.frag;if(n&&"audio"!==n.type)break;if(!t.fatal){var i=this.fragLoadError;i?i++:i=1;var o=this.config;if(i<=o.fragLoadingMaxRetry){this.fragLoadError=i;var u=Math.min(Math.pow(2,i-1)*o.fragLoadingRetryDelay,o.fragLoadingMaxRetryTimeout);f.logger.warn("AudioStreamController: frag loading failed, retry in "+u+" ms"),this.retryDate=g.now()+u,this.state=v.State.FRAG_LOADING_WAITING_RETRY}else f.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=v.State.ERROR}break;case c.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case c.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case c.ErrorDetails.KEY_LOAD_ERROR:case c.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==v.State.ERROR&&(this.state=t.fatal?v.State.ERROR:v.State.IDLE,f.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case c.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===v.State.PARSING||this.state===v.State.PARSED)){var l=this.mediaBuffer,d=this.media.currentTime;if(l&&a.BufferHelper.isBuffered(l,d)&&a.BufferHelper.isBuffered(l,d+.5)){var o=this.config;o.maxMaxBufferLength>=o.maxBufferLength&&(o.maxMaxBufferLength/=2,f.logger.warn("AudioStreamController: reduce max buffer length to "+o.maxMaxBufferLength+"s")),this.state=v.State.IDLE}else f.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=v.State.BUFFER_FLUSHING,this.hls.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"})}}},r.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(f.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach(function(t){e.hls.trigger(s.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=v.State.PARSED):(this.state=v.State.IDLE,this.fragPrevious=null,this.tick())},r}(v.default);t.default=y}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/audio-track-controller.js":/*!**************************************************!*\
  !*** ./src/controller/audio-track-controller.js ***!
  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../task-loop */"./src/task-loop.js"),o=r(/*! ../utils/logger */"./src/utils/logger.js"),s=r(/*! ../errors */"./src/errors.js"),u=function(e){function t(t){var r=e.call(this,t,i.default.MANIFEST_LOADING,i.default.MANIFEST_PARSED,i.default.AUDIO_TRACK_LOADED,i.default.AUDIO_TRACK_SWITCHED,i.default.LEVEL_LOADED,i.default.ERROR)||this;return r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}return n(t,e),t.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},t.prototype.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(i.default.AUDIO_TRACKS_UPDATED,{audioTracks:t})},t.prototype.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)return void o.logger.warn("Invalid audio track id:",e.id);if(o.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()},t.prototype.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},t.prototype.onLevelLoaded=function(e){var t=this.hls.levels[e.level];if(t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},t.prototype.onError=function(e){e.type===s.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(o.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},Object.defineProperty(t.prototype,"audioTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1},enumerable:!0,configurable:!0}),t.prototype._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)return void o.logger.debug("Same id as current audio-track passed, and track details available -> no-op");if(e<0||e>=this.tracks.length)return void o.logger.warn("Invalid id passed to audio-track controller");var t=this.tracks[e];o.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,n=t.type,a=t.id;this.hls.trigger(i.default.AUDIO_TRACK_SWITCHING,{id:a,type:n,url:r}),this._loadTrackDetailsIfNeeded(t)},t.prototype.doTick=function(){this._updateTrack(this._trackId)},t.prototype._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var a=t.filter(function(e){return e.default});a.length?t=a:o.logger.warn("No default audio tracks defined")}var u=!1,l=function(){t.forEach(function(t){u||e.audioGroupId&&t.groupId!==e.audioGroupId||n&&n!==t.name||(e._setAudioTrack(t.id),u=!0)})};l(),u||(n=null,l()),u||(o.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},t.prototype._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live)&&!!r},t.prototype._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;o.logger.log("loading audio-track playlist for id: "+r),this.hls.trigger(i.default.AUDIO_TRACK_LOADING,{url:t,id:r})}},t.prototype._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,o.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},t.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,n=t.language,i=t.groupId;o.logger.warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+r+'" / "'+n+'"');for(var a=e,s=0;s<this.tracks.length;s++)if(!this.trackIdBlacklist[s]){var u=this.tracks[s];if(u.name===r){a=s;break}}if(a===e)return void o.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"');o.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)},t}(a.default);t.default=u},"./src/controller/base-stream-controller.js":/*!**************************************************!*\
  !*** ./src/controller/base-stream-controller.js ***!
  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../task-loop */"./src/task-loop.js"),a=r(/*! ./fragment-tracker */"./src/controller/fragment-tracker.js"),o=r(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js");t.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};var u=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return n(i,r),i.prototype.doTick=function(){},i.prototype._streamEnded=function(e,t){var r=this,n=r.fragCurrent,i=r.fragmentTracker;if(!t.live&&n&&!n.backtracked&&n.sn===t.endSN&&!e.nextStart){var o=i.getState(n);return o===a.FragmentState.PARTIAL||o===a.FragmentState.OK}return!1},i.prototype.onMediaSeeking=function(){var r=this,n=r.config,i=r.media,a=r.mediaBuffer,u=r.state,l=i?i.currentTime:null,c=o.BufferHelper.bufferInfo(a||i,l,this.config.maxBufferHole);if(e.isFinite(l)&&s.logger.log("media seeking to "+l.toFixed(3)),u===t.State.FRAG_LOADING){var f=this.fragCurrent;if(0===c.len&&f){var d=n.maxFragLookUpTolerance,h=f.start-d,p=f.start+f.duration+d;l<h||l>p?(f.loader&&(s.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),f.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=t.State.IDLE):s.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else u===t.State.ENDED&&(0===c.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=t.State.IDLE);i&&(this.lastCurrentTime=l),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=l),this.tick()},i.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i}(i.default);t.default=u}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/buffer-controller.js":/*!*********************************************!*\
  !*** ./src/controller/buffer-controller.js ***!
  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../utils/logger */"./src/utils/logger.js"),s=r(/*! ../errors */"./src/errors.js"),u=r(/*! ../utils/mediasource-helper */"./src/utils/mediasource-helper.js"),l=u.getMediaSource(),c=function(t){function r(e){var r=t.call(this,e,i.default.MEDIA_ATTACHING,i.default.MEDIA_DETACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_RESET,i.default.BUFFER_APPENDING,i.default.BUFFER_CODECS,i.default.BUFFER_EOS,i.default.BUFFER_FLUSHING,i.default.LEVEL_PTS_UPDATED,i.default.LEVEL_UPDATED)||this;return r._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r.bufferCodecEventsExpected=0,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return n(r,t),r.prototype.destroy=function(){a.default.prototype.destroy.call(this)},r.prototype.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-e.start)>.1){var i=n.updating;try{n.abort()}catch(e){o.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(o.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},r.prototype.onManifestParsed=function(e){this.bufferCodecEventsExpected=e.altAudio?2:1,o.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new l;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},r.prototype.onMediaDetaching=function(){o.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){o.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):o.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(i.default.MEDIA_DETACHED)},r.prototype.onMediaSourceOpen=function(){o.logger.log("media source opened"),this.hls.trigger(i.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},r.prototype.checkPendingTracks=function(){var e=this,t=e.bufferCodecEventsExpected,r=e.pendingTracks,n=Object.keys(r).length;(n&&!t||2===n)&&(this.createSourceBuffers(r),this.pendingTracks={},this.doAppending())},r.prototype.onMediaSourceClose=function(){o.logger.log("media source closed")},r.prototype.onMediaSourceEnded=function(){o.logger.log("media source ended")},r.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;o.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce(function(e,r){return r.parent===t?e+1:e},0),n={},a=this.sourceBuffer;for(var s in a)n[s]=a[s].buffered;this.hls.trigger(i.default.BUFFER_APPENDED,{parent:t,pending:r,timeRanges:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===r&&this.flushLiveBackBuffer()},r.prototype.onSBUpdateError=function(e){o.logger.error("sourceBuffer error:",e),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.prototype.onBufferCodecs=function(e){var t=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(e).forEach(function(r){t.pendingTracks[r]=e[r]});var r=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),r&&"open"===r.readyState&&this.checkPendingTracks()}},r.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var n in e)if(!t[n]){var a=e[n],u=a.levelCodec||a.codec,l=a.container+";codecs="+u;o.logger.log("creating sourceBuffer("+l+")");try{var c=t[n]=r.addSourceBuffer(l);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[n]={codec:u,container:a.container},a.buffer=c}catch(e){o.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:l})}}this.hls.trigger(i.default.BUFFER_CREATED,{tracks:e})},r.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.prototype.onBufferAppendFail=function(e){o.logger.error("sourceBuffer error:",e.event),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferEos=function(e){var t=this.sourceBuffer,r=e.type;for(var n in t)r&&n!==r||t[n].ended||(t[n].ended=!0,o.logger.log(n+" sourceBuffer now EOS"));this.checkEos()},r.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var r in e){var n=e[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}o.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){o.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},r.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},r.prototype.flushLiveBackBuffer=function(){if(this._live){var e=this.hls.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))for(var t=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),i=t-Math.max(e,this._levelTargetDuration),a=n.length-1;a>=0;a--){var o=n[a],s=r[o].buffered;s.length>0&&i>s.start(0)&&this.removeBufferRange(o,r[o],0,i)}}},r.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},r.prototype.updateMediaElementDuration=function(){var t,r=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===r.liveDurationInfinity?(o.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!e.isFinite(t))&&(o.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r)t+=r[n].buffered.length}catch(e){o.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(i.default.BUFFER_FLUSHED)}},r.prototype.doAppending=function(){var e=this,t=e.hls,r=e.segments,n=e.sourceBuffer;if(Object.keys(n).length){if(this.media.error)return this.segments=[],void o.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var a=r.shift();try{var u=a.type,l=n[u];l?l.updating?r.unshift(a):(l.ended=!1,this.parent=a.parent,l.appendBuffer(a.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){o.logger.error("error while trying to append buffer:"+e.message),r.unshift(a);var c={type:s.ErrorTypes.MEDIA_ERROR,parent:a.parent};22!==e.code?(this.appendError?this.appendError++:this.appendError=1,c.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry?(o.logger.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],c.fatal=!0,t.trigger(i.default.ERROR,c)):(c.fatal=!1,t.trigger(i.default.ERROR,c))):(this.segments=[],c.details=s.ErrorDetails.BUFFER_FULL_ERROR,c.fatal=!1,t.trigger(i.default.ERROR,c))}}}},r.prototype.flushBuffer=function(e,t,r){var n,i=this.sourceBuffer;if(Object.keys(i).length){if(o.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var a in i)if(!r||a===r){if(n=i[a],n.ended=!1,n.updating)return o.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(a,n,e,t))return this.flushBufferCounter++,!1}}else o.logger.warn("abort flushing too many retries");o.logger.log("buffer flushed")}return!0},r.prototype.removeBufferRange=function(e,t,r,n){try{for(var i=0;i<t.buffered.length;i++){var a=t.buffered.start(i),s=t.buffered.end(i),u=Math.max(a,r),l=Math.min(s,n);if(Math.min(l,s)-u>.5)return o.logger.log("sb remove "+e+" ["+u+","+l+"], of ["+a+","+s+"], pos:"+this.media.currentTime),t.remove(u,l),!0}}catch(e){o.logger.warn("removeBufferRange failed",e)}return!1},r}(a.default);t.default=c}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/cap-level-controller.js":/*!************************************************!*\
  !*** ./src/controller/cap-level-controller.js ***!
  \************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=function(t){function r(r){var n=t.call(this,r,i.default.FPS_DROP_LEVEL_CAPPING,i.default.MEDIA_ATTACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_CODECS,i.default.MEDIA_DETACHING)||this;return n.autoLevelCapping=e.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}return n(r,t),r.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},r.prototype.onFpsDropLevelCapping=function(e){r.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},r.prototype.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},r.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onLevelsUpdated=function(e){this.levels=e.levels},r.prototype.onMediaDetaching=function(){this._stopCapping()},r.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},r.prototype.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,i){return r.isLevelAllowed(i,t.restrictedLevels)&&i<=e});return r.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},r.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=e.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=e.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(r.prototype,"mediaWidth",{get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaHeight",{get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r,"contentScaleFactor",{get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e},enumerable:!0,configurable:!0}),r.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},r.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var n=e.length-1,i=0;i<e.length;i+=1){var a=e[i];if((a.width>=t||a.height>=r)&&function(e,t){return!t||(e.width!==t.width||e.height!==t.height)}(a,e[i+1])){n=i;break}}return n},r}(a.default);t.default=o}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/eme-controller.js":/*!******************************************!*\
  !*** ./src/controller/eme-controller.js ***!
  \******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../event-handler */"./src/event-handler.js"),a=r(/*! ../events */"./src/events.js"),o=r(/*! ../errors */"./src/errors.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=window.XMLHttpRequest,l={WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready"},c=function(e,t,r){var n={videoCapabilities:[]};return t.forEach(function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})}),[n]},f=function(e,t,r){switch(e){case l.WIDEVINE:return c(0,r);default:throw Error("Unknown key-system: "+e)}},d=function(e){function t(t){var r=e.call(this,t,a.default.MEDIA_ATTACHED,a.default.MANIFEST_PARSED)||this;return r._widevineLicenseUrl=t.config.widevineLicenseUrl,r._licenseXhrSetup=t.config.licenseXhrSetup,r._emeEnabled=t.config.emeEnabled,r._requestMediaKeySystemAccess=t.config.requestMediaKeySystemAccessFunc,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._isMediaEncrypted=!1,r._requestLicenseFailureCount=0,r}return n(t,e),t.prototype.getLicenseServerUrl=function(e){var t;switch(e){case l.WIDEVINE:t=this._widevineLicenseUrl;break;default:t=null}return t||(s.logger.error('No license server URL configured for key-system "'+e+'"'),this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),t},t.prototype._attemptKeySystemAccess=function(e,t,r){var n=this,i=f(e,0,r);if(!i)return void s.logger.warn("Can not create config for key-system (maybe because platform is not supported):",e);s.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,i).then(function(t){n._onMediaKeySystemAccessObtained(e,t)}).catch(function(t){s.logger.error('Failed to obtain key-system "'+e+'" access:',t)})},Object.defineProperty(t.prototype,"requestMediaKeySystemAccess",{get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess},enumerable:!0,configurable:!0}),t.prototype._onMediaKeySystemAccessObtained=function(e,t){var r=this;s.logger.log('Access for key-system "'+e+'" obtained');var n={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(n),t.createMediaKeys().then(function(t){n.mediaKeys=t,s.logger.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated()}).catch(function(e){s.logger.error("Failed to create media-keys:",e)})},t.prototype._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},t.prototype._onNewMediaKeySession=function(e){var t=this;s.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",function(r){t._onKeySessionMessage(e,r.message)},!1)},t.prototype._onKeySessionMessage=function(e,t){s.logger.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){s.logger.log("Received license data, updating key-session"),e.update(t)})},t.prototype._onMediaEncrypted=function(e,t){s.logger.log('Media is encrypted using "'+e+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=e,this._mediaEncryptionInitData=t,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},t.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return s.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});s.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},t.prototype._generateRequestWithPreferredKeySession=function(){var e=this,t=this._mediaKeysList[0];if(!t)return s.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(t.mediaKeysSessionInitialized)return void s.logger.warn("Key-Session already initialized but requested again");var r=t.mediaKeysSession;r||(s.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}));var n=this._mediaEncryptionInitDataType,i=this._mediaEncryptionInitData;s.logger.log('Generating key-session request for "'+n+'" init data type'),t.mediaKeysSessionInitialized=!0,r.generateRequest(n,i).then(function(){s.logger.debug("Key-session generation succeeded")}).catch(function(t){s.logger.error("Error generating key-session request:",t),e.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},t.prototype._createLicenseXhr=function(e,t,r){var n=new u,i=this._licenseXhrSetup;try{if(i)try{i(n,e)}catch(t){n.open("POST",e,!0),i(n,e)}n.readyState||n.open("POST",e,!0)}catch(e){return s.logger.error("Error setting up key-system license XHR",e),void this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,r),n},t.prototype._onLicenseRequestReadyStageChange=function(e,t,r,n){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,s.logger.log("License request succeeded"),n(e.response);else{if(s.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),++this._requestLicenseFailureCount<=3){var i=3-this._requestLicenseFailureCount+1;return s.logger.warn("Retrying license request, "+i+" attempts left"),void this._requestLicense(r,n)}this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},t.prototype._generateLicenseRequestChallenge=function(e,t){var r;return e.mediaKeySystemDomain===l.PLAYREADY?s.logger.error("PlayReady is not supported (yet)"):e.mediaKeySystemDomain===l.WIDEVINE?r=t:s.logger.error("Unsupported key-system:",e.mediaKeySystemDomain),r},t.prototype._requestLicense=function(e,t){s.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return s.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),i=this._createLicenseXhr(n,e,t);s.logger.log("Sending license request to URL: "+n),i.send(this._generateLicenseRequestChallenge(r,e))},t.prototype.onMediaAttached=function(e){var t=this;if(this._emeEnabled){var r=e.media;this._media=r,r.addEventListener("encrypted",function(e){t._onMediaEncrypted(e.initDataType,e.initData)})}},t.prototype.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map(function(e){return e.audioCodec}),r=e.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(l.WIDEVINE,t,r)}},t}(i.default);t.default=d},"./src/controller/fps-controller.js":/*!******************************************!*\
  !*** ./src/controller/fps-controller.js ***!
  \******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../utils/logger */"./src/utils/logger.js"),s=window.performance,u=function(e){function t(t){return e.call(this,t,i.default.MEDIA_ATTACHING)||this}return n(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){"function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}},t.prototype.checkFPS=function(e,t,r){var n=s.now();if(t){if(this.lastTime){var a=n-this.lastTime,u=r-this.lastDroppedFrames,l=t-this.lastDecodedFrames,c=1e3*u/a,f=this.hls;if(f.trigger(i.default.FPS_DROP,{currentDropped:u,currentDecoded:l,totalDroppedFrames:r}),c>0&&u>f.config.fpsDroppedMonitoringThreshold*l){var d=f.currentLevel;o.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===f.autoLevelCapping||f.autoLevelCapping>=d)&&(d-=1,f.trigger(i.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:f.currentLevel}),f.autoLevelCapping=d,f.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(a.default);t.default=u},"./src/controller/fragment-finders.js":/*!********************************************!*\
  !*** ./src/controller/fragment-finders.js ***!
  \********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){function n(t,r,n){if(!Array.isArray(t)||!t.length||!e.isFinite(r))return null;if(r<t[0].programDateTime)return null;if(r>=t[t.length-1].endProgramDateTime)return null;n=n||0;for(var i=0;i<t.length;++i){var a=t[i];if(o(r,n,a))return a}return null}function i(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=e?t[e.sn-t[0].sn+1]:null;return i&&!a(r,n,i)?i:s.default.search(t,a.bind(null,r,n))}function a(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function o(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.endProgramDateTime-n>e}Object.defineProperty(t,"__esModule",{value:!0});var s=r(/*! ../utils/binary-search */"./src/utils/binary-search.js");t.findFragmentByPDT=n,t.findFragmentByPTS=i,t.fragmentWithinToleranceTest=a,t.pdtWithinToleranceTest=o}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/fragment-tracker.js":/*!********************************************!*\
  !*** ./src/controller/fragment-tracker.js ***!
  \********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../event-handler */"./src/event-handler.js"),a=r(/*! ../events */"./src/events.js");t.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var o=function(r){function o(e){var t=r.call(this,e,a.default.BUFFER_APPENDED,a.default.FRAG_BUFFERED,a.default.FRAG_LOADED)||this;return t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}return n(o,r),o.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,i.default.prototype.destroy.call(this),r.prototype.destroy.call(this)},o.prototype.getBufferedFrag=function(e,t){var r=this.fragments,n=Object.keys(r).filter(function(n){var i=r[n];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var a=i.body;return a.startPTS<=e&&e<=a.endPTS});if(0===n.length)return null;var i=n.pop();return r[i].body},o.prototype.detectEvictedFragments=function(e,t){var r,n,i=this;Object.keys(this.fragments).forEach(function(a){var o=i.fragments[a];if(!0===o.buffered){var s=o.range[e];if(s){r=s.time;for(var u=0;u<r.length;u++)if(n=r[u],!1===i.isTimeBuffered(n.startPTS,n.endPTS,t)){i.removeFragment(o.body);break}}}})},o.prototype.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach(function(r){if(e.hasElementaryStream(r)){var i=t.timeRanges[r];n.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}}))},o.prototype.getBufferedTimes=function(e,t,r){for(var n,i,a=[],o=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,e>=n&&t<=i){a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<i&&t>n)a.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),o=!0;else if(t<=n)break}return{time:a,partial:o}},o.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},o.prototype.getPartialFragment=function(e){var t,r,n,i=this,a=null,o=0;return Object.keys(this.fragments).forEach(function(s){var u=i.fragments[s];i.isPartial(u)&&(r=u.body.startPTS-i.bufferPadding,n=u.body.endPTS+i.bufferPadding,e>=r&&e<=n&&(t=Math.min(e-r,n-e),o<=t&&(a=u.body,o=t)))}),a},o.prototype.getState=function(e){var r=this.getFragmentKey(e),n=this.fragments[r],i=t.FragmentState.NOT_LOADED;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?t.FragmentState.PARTIAL:t.FragmentState.OK:t.FragmentState.APPENDING),i},o.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},o.prototype.isTimeBuffered=function(e,t,r){for(var n,i,a=0;a<r.length;a++){if(n=r.start(a)-this.bufferPadding,i=r.end(a)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1},o.prototype.onFragLoaded=function(t){var r=t.frag;e.isFinite(r.sn)&&!r.bitrateTest&&(this.fragments[this.getFragmentKey(r)]={body:r,range:Object.create(null),buffered:!1})},o.prototype.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)})},o.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},o.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},o.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},o.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},o}(i.default);t.FragmentTracker=o}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/gap-controller.js":/*!******************************************!*\
  !*** ./src/controller/gap-controller.js ***!
  \******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.js"),i=r(/*! ../errors */"./src/errors.js"),a=r(/*! ../events */"./src/events.js"),o=r(/*! ../utils/logger */"./src/utils/logger.js"),s=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.stallReported=!1}return e.prototype.poll=function(e,t){var r=this,i=r.config,a=r.media,s=a.currentTime,u=window.performance.now();if(s!==e)return this.stallReported&&(o.logger.warn("playback not stuck anymore @"+s+", after "+Math.round(u-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(a.ended||!a.buffered.length||a.readyState>2||a.seeking&&n.BufferHelper.isBuffered(a,s))){var l=u-this.stalled,c=n.BufferHelper.bufferInfo(a,s,i.maxBufferHole);if(!this.stalled)return void(this.stalled=u);l>=1e3&&this._reportStall(c.len),this._tryFixBufferStall(c,l)}},e.prototype._tryFixBufferStall=function(e,t){var r=this,n=r.config,i=r.fragmentTracker,a=r.media,o=a.currentTime,s=i.getPartialFragment(o);s&&this._trySkipBufferHole(s),e.len>.5&&t>1e3*n.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e.prototype._reportStall=function(e){var t=this,r=t.hls,n=t.media;t.stallReported||(this.stallReported=!0,o.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),r.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},e.prototype._trySkipBufferHole=function(e){for(var t=this,r=t.hls,n=t.media,s=n.currentTime,u=0,l=0;l<n.buffered.length;l++){var c=n.buffered.start(l);if(s>=u&&s<c)return n.currentTime=Math.max(c,n.currentTime+.1),o.logger.warn("skipping hole, adjusting currentTime from "+s+" to "+n.currentTime),this.stalled=null,void r.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+s+" to "+n.currentTime,frag:e});u=n.buffered.end(l)}},e.prototype._tryNudgeBuffer=function(){var e=this,t=e.config,r=e.hls,n=e.media,s=n.currentTime,u=(this.nudgeRetry||0)+1;if(this.nudgeRetry=u,u<t.nudgeMaxRetry){var l=s+u*t.nudgeOffset;o.logger.log("adjust currentTime from "+s+" to "+l),n.currentTime=l,r.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else o.logger.error("still stuck in high buffer @"+s+" after "+t.nudgeMaxRetry+", raise fatal error"),r.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();t.default=s},"./src/controller/id3-track-controller.js":/*!************************************************!*\
  !*** ./src/controller/id3-track-controller.js ***!
  \************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../demux/id3 */"./src/demux/id3.js"),s=r(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.js"),u=function(e){function t(t){var r=e.call(this,t,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.FRAG_PARSING_METADATA)||this;return r.id3Track=void 0,r.media=void 0,r}return n(t,e),t.prototype.destroy=function(){a.default.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){s.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},t.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return s.sendAddTrackEvent(r,this.media),r}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var a=o.default.getID3Frames(r[i].data);if(a){var s=r[i].pts,u=i<r.length-1?r[i+1].pts:t.endPTS;s===u&&(u+=1e-4);for(var l=0;l<a.length;l++){var c=a[l];if(!o.default.isTimeStampFrame(c)){var f=new n(s,u,"");f.value=c,this.id3Track.addCue(f)}}}}},t}(a.default);t.default=u},"./src/controller/level-controller.js":/*!********************************************!*\
  !*** ./src/controller/level-controller.js ***!
  \********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i,a=r(/*! ../events */"./src/events.js"),o=r(/*! ../event-handler */"./src/event-handler.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=r(/*! ../errors */"./src/errors.js"),l=r(/*! ../utils/codecs */"./src/utils/codecs.js"),c=r(/*! ./level-helper */"./src/controller/level-helper.js"),f=window.performance,d=function(e){function t(t){var r=e.call(this,t,a.default.MANIFEST_LOADED,a.default.LEVEL_LOADED,a.default.AUDIO_TRACK_SWITCHED,a.default.FRAG_LOADED,a.default.ERROR)||this;return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,i=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}return n(t,e),t.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},t.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t,r=[],n=[],o={},f=null,d=!1,h=!1;if(e.levels.forEach(function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,d=d||!!e.videoCodec,h=h||!!e.audioCodec,i&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),f=o[e.bitrate],f?f.url.push(e.url):(e.url=[e.url],e.urlId=0,o[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&(h=!0,c.addGroupId(f||e,"audio",t.AUDIO)),t.SUBTITLES&&c.addGroupId(f||e,"text",t.SUBTITLES))}),d&&h&&(r=r.filter(function(e){return!!e.videoCodec})),r=r.filter(function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||l.isCodecSupportedInMp4(t,"audio"))&&(!r||l.isCodecSupportedInMp4(r,"video"))}),e.audioTracks&&(n=e.audioTracks.filter(function(e){return!e.audioCodec||l.isCodecSupportedInMp4(e.audioCodec,"audio")}),n.forEach(function(e,t){e.id=t})),r.length>0){t=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var p=0;p<r.length;p++)if(r[p].bitrate===t){this._firstLevel=p,s.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(a.default.MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:e.stats,audio:h,video:d,altAudio:n.some(function(e){return!!e.url})})}else this.hls.trigger(a.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))},enumerable:!0,configurable:!0}),t.prototype.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){s.logger.log("switching to level "+e),this.currentLevelIndex=e;var n=t[e];n.level=e,r.trigger(a.default.LEVEL_SWITCHING,n)}var i=t[e],o=i.details;if(!o||o.live){var l=i.urlId;r.trigger(a.default.LEVEL_LOADING,{url:i.url[l],level:e,id:l})}}else r.trigger(a.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(e){this._firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e},enumerable:!0,configurable:!0}),t.prototype.onError=function(e){if(e.fatal)return void(e.type===u.ErrorTypes.NETWORK_ERROR&&this.clearTimer());var t,r=!1,n=!1;switch(e.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,n=!0;break;case u.ErrorDetails.LEVEL_LOAD_ERROR:case u.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case u.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,n)},t.prototype.recoverLevel=function(e,t,r,n){var i,a,o,u=this,l=this.hls.config,c=e.details,f=this._levels[t];if(f.loadError++,f.fragmentError=n,r){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return s.logger.error("level controller, cannot recover from "+c+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return u.loadLevel()},a),e.levelRetry=!0,this.levelRetryCount++,s.logger.warn("level controller, "+c+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&(i=f.url.length,i>1&&f.loadError<i?(f.urlId=(f.urlId+1)%i,f.details=void 0,s.logger.warn("level controller, "+c+" for level "+t+": switching to redundant URL-id "+f.urlId)):-1===this.manualLevelIndex?(o=0===t?this._levels.length-1:t-1,s.logger.warn("level controller, "+c+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):n&&(s.logger.warn("level controller, "+c+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,r=e.level;if(r===this.currentLevelIndex){var n=this._levels[r];n.fragmentError||(n.loadError=0,this.levelRetryCount=0);var i=e.details;if(i.live){var a=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),o=a,u=n.details;u&&i.endSN===u.endSN&&(o/=2,s.logger.log("same live playlist, reload twice faster")),o-=f.now()-e.stats.trequest,o=Math.max(a/2,Math.round(o)),s.logger.log("live playlist, reload in "+Math.round(o)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},o)}else this.clearTimer()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){var n=r.audioGroupIds.findIndex(function(e){return e===t});n!==r.urlId&&(r.urlId=n,this.startLoad())}},t.prototype.loadLevel=function(){if(s.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,n=e.url[r];s.logger.log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(a.default.LEVEL_LOADING,{url:n,level:t,id:r})}}},Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)},enumerable:!0,configurable:!0}),t}(o.default);t.default=d},"./src/controller/level-helper.js":/*!****************************************!*\
  !*** ./src/controller/level-helper.js ***!
  \****************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){function n(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function i(t,r,n){var i=t[r],a=t[n],o=a.startPTS;e.isFinite(o)?n>r?(i.duration=o-i.start,i.duration<0&&s.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(a.duration=i.start-o,a.duration<0&&s.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):a.start=n>r?i.start+i.duration:Math.max(i.start-a.duration,0)}function a(t,r,n,a,o,s){var u=n;if(e.isFinite(r.startPTS)){var l=Math.abs(r.startPTS-n);e.isFinite(r.deltaPTS)?r.deltaPTS=Math.max(l,r.deltaPTS):r.deltaPTS=l,u=Math.max(n,r.startPTS),n=Math.min(n,r.startPTS),a=Math.max(a,r.endPTS),o=Math.min(o,r.startDTS),s=Math.max(s,r.endDTS)}var c=n-r.start;r.start=r.startPTS=n,r.maxStartPTS=u,r.endPTS=a,r.startDTS=o,r.endDTS=s,r.duration=a-n;var f=r.sn;if(!t||f<t.startSN||f>t.endSN)return 0;var d,h,p;for(d=f-t.startSN,h=t.fragments,h[d]=r,p=d;p>0;p--)i(h,p,p-1);for(p=d;p<h.length-1;p++)i(h,p,p+1);return t.PTSKnown=!0,c}function o(t,r){var n,i=Math.max(t.startSN,r.startSN)-r.startSN,o=Math.min(t.endSN,r.endSN)-r.startSN,u=r.startSN-t.startSN,l=t.fragments,c=r.fragments,f=0;if(r.initSegment&&t.initSegment&&(r.initSegment=t.initSegment),o<i)return void(r.PTSKnown=!1);for(var d=i;d<=o;d++){var h=l[u+d],p=c[d];p&&h&&(f=h.cc-p.cc,e.isFinite(h.startPTS)&&(p.start=p.startPTS=h.startPTS,p.endPTS=h.endPTS,p.duration=h.duration,p.backtracked=h.backtracked,p.dropped=h.dropped,n=p))}if(f)for(s.logger.log("discontinuity sliding from playlist, take drift into account"),d=0;d<c.length;d++)c[d].cc+=f;if(n)a(r,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS);else if(u>=0&&u<l.length){var v=l[u].start;for(d=0;d<c.length;d++)c[d].start+=v}r.PTSKnown=t.PTSKnown}Object.defineProperty(t,"__esModule",{value:!0});var s=r(/*! ../utils/logger */"./src/utils/logger.js");t.addGroupId=n,t.updatePTS=i,t.updateFragPTSDTS=a,t.mergeDetails=o}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/stream-controller.js":/*!*********************************************!*\
  !*** ./src/controller/stream-controller.js ***!
  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../utils/binary-search */"./src/utils/binary-search.js"),a=r(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.js"),o=r(/*! ../demux/demuxer */"./src/demux/demuxer.js"),s=r(/*! ../events */"./src/events.js"),u=r(/*! ./fragment-tracker */"./src/controller/fragment-tracker.js"),l=r(/*! ../loader/fragment */"./src/loader/fragment.js"),c=r(/*! ../loader/playlist-loader */"./src/loader/playlist-loader.js"),f=r(/*! ./level-helper */"./src/controller/level-helper.js"),d=r(/*! ../utils/time-ranges */"./src/utils/time-ranges.js"),h=r(/*! ../errors */"./src/errors.js"),p=r(/*! ../utils/logger */"./src/utils/logger.js"),v=r(/*! ../utils/discontinuities */"./src/utils/discontinuities.js"),g=r(/*! ./fragment-finders */"./src/controller/fragment-finders.js"),y=r(/*! ./gap-controller */"./src/controller/gap-controller.js"),_=r(/*! ./base-stream-controller */"./src/controller/base-stream-controller.js"),m=function(t){function r(e,r){var n=t.call(this,e,s.default.MEDIA_ATTACHED,s.default.MEDIA_DETACHING,s.default.MANIFEST_LOADING,s.default.MANIFEST_PARSED,s.default.LEVEL_LOADED,s.default.KEY_LOADED,s.default.FRAG_LOADED,s.default.FRAG_LOAD_EMERGENCY_ABORTED,s.default.FRAG_PARSING_INIT_SEGMENT,s.default.FRAG_PARSING_DATA,s.default.FRAG_PARSED,s.default.ERROR,s.default.AUDIO_TRACK_SWITCHING,s.default.AUDIO_TRACK_SWITCHED,s.default.BUFFER_CREATED,s.default.BUFFER_APPENDED,s.default.BUFFER_FLUSHED)||this;return n.fragmentTracker=r,n.config=e.config,n.audioCodecSwap=!1,n._state=_.State.STOPPED,n.stallReported=!1,n.gapController=null,n}return n(r,t),r.prototype.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},r.prototype.onHandlerDestroyed=function(){this.state=_.State.STOPPED,this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},r.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(p.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=_.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=_.State.STOPPED},r.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=_.State.STOPPED,this.forceStartLoad=!1},r.prototype.doTick=function(){switch(this.state){case _.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case _.State.IDLE:this._doTickIdle();break;case _.State.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=_.State.IDLE);break;case _.State.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(p.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=_.State.IDLE);break;case _.State.ERROR:case _.State.STOPPED:case _.State.FRAG_LOADING:case _.State.PARSING:case _.State.PARSED:case _.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},r.prototype._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch)){var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,o=this.levels[i];if(o){var u,l=o.bitrate;u=l?Math.max(8*t.maxBufferSize/l,t.maxBufferLength):t.maxBufferLength,u=Math.min(u,t.maxMaxBufferLength);var c=a.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,t.maxBufferHole),f=c.len;if(!(f>=u)){p.logger.trace("buffer length of "+f.toFixed(3)+" is below max of "+u.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var d=o.details;if(!d||d.live&&this.levelLastLoaded!==i)return void(this.state=_.State.WAITING_LEVEL);if(this._streamEnded(c,d)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(s.default.BUFFER_EOS,h),void(this.state=_.State.ENDED)}this._fetchPayloadOrEos(n,c,d)}}}},r.prototype._fetchPayloadOrEos=function(e,t,r){var n=this.fragPrevious,i=this.level,a=r.fragments,o=a.length;if(0!==o){var s,u=a[0].start,l=a[o-1].start+a[o-1].duration,c=t.end;if(r.initSegment&&!r.initSegment.data)s=r.initSegment;else if(r.live){var f=this.config.initialLiveManifestSize;if(o<f)return void p.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+f);if(null===(s=this._ensureFragmentAtLivePoint(r,c,u,l,n,a,o)))return}else c<u&&(s=a[0]);s||(s=this._findFragment(u,n,o,a,c,l,r)),s&&(s.encrypted?(p.logger.log("Loading key for "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i),this._loadKey(s)):(p.logger.log("Loading "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i+", currentTime:"+e.toFixed(3)+",bufferEnd:"+c.toFixed(3)),this._loadFragment(s)))}},r.prototype._ensureFragmentAtLivePoint=function(e,t,r,n,a,o,s){var u,l=this.hls.config,c=this.media,f=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-l.maxFragLookUpTolerance,n-f)){var d=this.liveSyncPosition=this.computeLivePosition(r,e);p.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),t=d,c&&c.readyState&&c.duration>d&&(c.currentTime=d),this.nextLoadPosition=d}if(e.PTSKnown&&t>n&&c&&c.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(a)if(e.hasProgramDateTime)p.logger.log("live playlist, switching playlist, load frag with same PDT: "+a.programDateTime),u=g.findFragmentByPDT(o,a.endProgramDateTime,l.maxFragLookUpTolerance);else{var h=a.sn+1;if(h>=e.startSN&&h<=e.endSN){var v=o[h-e.startSN];a.cc===v.cc&&(u=v,p.logger.log("live playlist, switching playlist, load frag with next SN: "+u.sn))}u||(u=i.default.search(o,function(e){return a.cc-e.cc}))&&p.logger.log("live playlist, switching playlist, load frag with same CC: "+u.sn)}u||(u=o[Math.min(s-1,Math.round(s/2))],p.logger.log("live playlist, switching playlist, unknown, load middle frag : "+u.sn))}return u},r.prototype._findFragment=function(e,t,r,n,i,a,o){var s,u=this.hls.config;if(i<a){var l=i>a-u.maxFragLookUpTolerance?0:u.maxFragLookUpTolerance;s=g.findFragmentByPTS(t,n,i,l)}else s=n[r-1];if(s){var c=s.sn-o.startSN,f=t&&s.level===t.level,d=n[c-1],h=n[c+1];if(t&&s.sn===t.sn)if(f&&!s.backtracked)if(s.sn<o.endSN){var v=t.deltaPTS;v&&v>u.maxBufferHole&&t.dropped&&c?(s=d,p.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(s=h,p.logger.log("SN just loaded, load next one: "+s.sn,s))}else s=null;else s.backtracked&&(h&&h.backtracked?(p.logger.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+h.sn),s=h):(p.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,d?(s=d,s.backtracked=!0):c&&(s=null)))}return s},r.prototype._loadKey=function(e){this.state=_.State.KEY_LOADING,this.hls.trigger(s.default.KEY_LOADING,{frag:e})},r.prototype._loadFragment=function(t){var r=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,e.isFinite(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||r===u.FragmentState.NOT_LOADED||r===u.FragmentState.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(s.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new o.default(this.hls,"main")),this.state=_.State.FRAG_LOADING):r===u.FragmentState.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,p.logger.log("main stream:"+t+"->"+e),this.hls.trigger(s.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},enumerable:!0,configurable:!0}),r.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,c.default.LevelType.MAIN)},Object.defineProperty(r.prototype,"currentLevel",{get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nextBufferedFrag",{get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null},enumerable:!0,configurable:!0}),r.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},Object.defineProperty(r.prototype,"nextLevel",{get:function(){var e=this.nextBufferedFrag;return e?e.level:-1},enumerable:!0,configurable:!0}),r.prototype._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&(t=r.currentTime,t>this.lastCurrentTime&&(this.lastCurrentTime=t),a.BufferHelper.isBuffered(r,t)?e=this.getBufferedFrag(t):a.BufferHelper.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(s.default.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(s.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},r.prototype.immediateLevelSwitch=function(){if(p.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,r=void 0;t?(r=t.paused,t.pause()):r=!0,this.previouslyPaused=r}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)},r.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,a.BufferHelper.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},r.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var r=void 0,n=void 0,i=void 0;if(n=this.getBufferedFrag(t.currentTime),n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),t.paused)r=0;else{var a=this.hls.nextLoadLevel,o=this.levels[a],s=this.fragLastKbps;r=s&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*s)+1:0}if((i=this.getBufferedFrag(t.currentTime+r))&&(i=this.followingBufferedFrag(i))){var u=this.fragCurrent;u&&u.loader&&u.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,e.POSITIVE_INFINITY)}}},r.prototype.flushMainBuffer=function(e,t){this.state=_.State.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(s.default.BUFFER_FLUSHING,r)},r.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new y.default(r,t,this.fragmentTracker,this.hls)},r.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(p.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onMediaSeeked=function(){var t=this.media,r=t?t.currentTime:void 0;e.isFinite(r)&&p.logger.log("media seeked to "+r.toFixed(3)),this.tick()},r.prototype.onManifestLoading=function(){p.logger.log("trigger BUFFER_RESET"),this.hls.trigger(s.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.prototype.onManifestParsed=function(e){var t,r=!1,n=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&p.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},r.prototype.onLevelLoaded=function(t){var r=t.details,n=t.level,i=this.levels[this.levelLastLoaded],a=this.levels[n],o=r.totalduration,u=0;if(p.logger.log("level "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+o),r.live){var l=a.details;l&&r.fragments.length>0?(f.mergeDetails(l,r),u=r.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(u,l),r.PTSKnown&&e.isFinite(u)?p.logger.log("live playlist sliding:"+u.toFixed(3)):(p.logger.log("live playlist - outdated PTS, unknown sliding"),v.alignStream(this.fragPrevious,i,r))):(p.logger.log("live playlist - first load, unknown sliding"),r.PTSKnown=!1,v.alignStream(this.fragPrevious,i,r))}else r.PTSKnown=!1;if(a.details=r,this.levelLastLoaded=n,this.hls.trigger(s.default.LEVEL_UPDATED,{details:r,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=r.startTimeOffset;e.isFinite(c)?(c<0&&(p.logger.log("negative start time offset "+c+", count from end of last fragment"),c=u+o+c),p.logger.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c):r.live?(this.startPosition=this.computeLivePosition(u,r),p.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===_.State.WAITING_LEVEL&&(this.state=_.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===_.State.KEY_LOADING&&(this.state=_.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(e){var t=this,r=t.fragCurrent,n=t.hls,i=t.levels,a=t.media,u=e.frag;if(this.state===_.State.FRAG_LOADING&&r&&"main"===u.type&&u.level===r.level&&u.sn===r.sn){var l=e.stats,c=i[r.level],f=c.details;if(this.bitrateTest=!1,this.stats=l,p.logger.log("Loaded "+r.sn+" of ["+f.startSN+" ,"+f.endSN+"],level "+r.level),u.bitrateTest&&n.nextLoadLevel)this.state=_.State.IDLE,this.startFragRequested=!1,l.tparsed=l.tbuffered=window.performance.now(),n.trigger(s.default.FRAG_BUFFERED,{stats:l,frag:r,id:"main"}),this.tick();else if("initSegment"===u.sn)this.state=_.State.IDLE,l.tparsed=l.tbuffered=window.performance.now(),f.initSegment.data=e.payload,n.trigger(s.default.FRAG_BUFFERED,{stats:l,frag:r,id:"main"}),this.tick();else{p.logger.log("Parsing "+r.sn+" of ["+f.startSN+" ,"+f.endSN+"],level "+r.level+", cc "+r.cc),this.state=_.State.PARSING,this.pendingBuffering=!0,this.appended=!1,u.bitrateTest&&(u.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:u}));var d=!(a&&a.seeking)&&(f.PTSKnown||!f.live),h=f.initSegment?f.initSegment.data:[],v=this._getAudioCodec(c),g=this.demuxer=this.demuxer||new o.default(this.hls,"main");g.push(e.payload,h,v,c.videoCodec,r,f.totalduration,d)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===_.State.PARSING){var n=e.tracks,i=void 0,a=void 0;if(n.audio&&this.altAudio&&delete n.audio,a=n.audio){var o=this.levels[this.level].audioCodec,u=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===u.indexOf("firefox")&&(o="mp4a.40.5"),-1!==u.indexOf("android")&&"audio/mpeg"!==a.container&&(o="mp4a.40.2",p.logger.log("Android: force audio codec to "+o)),a.levelCodec=o,a.id=e.id}a=n.video,a&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=e.id),this.hls.trigger(s.default.BUFFER_CODECS,n);for(i in n){a=n[i],p.logger.log("main track:"+i+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var l=a.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.default.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}},r.prototype.onFragParsingData=function(t){var r=this,n=this.fragCurrent,i=t.frag;if(n&&"main"===t.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===_.State.PARSING){var a=this.levels[this.level],o=n;if(e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),!0===t.hasAudio&&o.addElementaryStream(l.default.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&o.addElementaryStream(l.default.ElementaryStreamTypes.VIDEO),p.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(o.dropped=t.dropped,o.dropped)if(o.backtracked)p.logger.warn("Already backtracked on this fragment, appending with the gap",o.sn);else{var u=a.details;if(!u||o.sn!==u.startSN)return p.logger.warn("missing video frame(s), backtracking fragment",o.sn),this.fragmentTracker.removeFragment(o),o.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=_.State.IDLE,this.fragPrevious=o,void this.tick();p.logger.warn("missing video frame(s) on first frag, appending with gap",o.sn)}else o.backtracked=!1;var c=f.updateFragPTSDTS(a.details,o,t.startPTS,t.endPTS,t.startDTS,t.endDTS),d=this.hls;d.trigger(s.default.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:c,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&r.state===_.State.PARSING&&(r.appended=!0,r.pendingBuffering=!0,d.trigger(s.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},r.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===_.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=_.State.PARSED,this._checkAppendedParsed())},r.prototype.onAudioTrackSwitching=function(t){var r=!!t.url,n=t.id;if(!r){if(this.mediaBuffer!==this.media){p.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(p.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=_.State.IDLE}var a=this.hls;a.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),a.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},r.prototype.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(p.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},r.prototype.onBufferCreated=function(e){var t,r,n=e.tracks,i=!1;for(var a in n){var o=n[a];"main"===o.id?(r=a,t=o,"video"===a&&(this.videoBuffer=n[a].buffer)):i=!0}i&&t?(p.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},r.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==_.State.PARSING&&t!==_.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==_.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;p.logger.log("main buffered : "+d.default.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(s.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=_.State.IDLE}this.tick()}},r.prototype.onError=function(t){var r=t.frag||this.fragCurrent;if(!r||"main"===r.type){var n=!!this.media&&a.BufferHelper.isBuffered(this.media,this.media.currentTime)&&a.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);p.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=_.State.FRAG_LOADING_WAITING_RETRY}else p.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=_.State.ERROR;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==_.State.ERROR&&(t.fatal?(this.state=_.State.ERROR,p.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==_.State.WAITING_LEVEL||(this.state=_.State.IDLE));break;case h.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==_.State.PARSING&&this.state!==_.State.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=_.State.IDLE):(p.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)))}}},r.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,p.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},r.prototype._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=this.mediaBuffer?this.mediaBuffer:e,r=t.buffered;!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,r)}},r.prototype.onFragLoadEmergencyAborted=function(){this.state=_.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(l.default.ElementaryStreamTypes.VIDEO,e.buffered),this.state=_.State.IDLE,this.fragPrevious=null},r.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.prototype.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},r.prototype._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=e.seeking?t:this.startPosition;t!==r&&(p.logger.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+t+" "),e.currentTime=r)},r.prototype._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},Object.defineProperty(r.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e},enumerable:!0,configurable:!0}),r}(_.default);t.default=m}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/subtitle-stream-controller.js":/*!******************************************************!*\
  !*** ./src/controller/subtitle-stream-controller.js ***!
  \******************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../utils/logger */"./src/utils/logger.js"),o=r(/*! ../crypt/decrypter */"./src/crypt/decrypter.js"),s=r(/*! ../task-loop */"./src/task-loop.js"),u=r(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.js"),l=r(/*! ./fragment-finders */"./src/controller/fragment-finders.js"),c=r(/*! ./fragment-tracker */"./src/controller/fragment-tracker.js"),f=window.performance;t.SubtitleStreamControllerState={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"};var d=t.SubtitleStreamControllerState,h=function(e){function t(t,r){var n=e.call(this,t,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.ERROR,i.default.KEY_LOADED,i.default.FRAG_LOADED,i.default.SUBTITLE_TRACKS_UPDATED,i.default.SUBTITLE_TRACK_SWITCH,i.default.SUBTITLE_TRACK_LOADED,i.default.SUBTITLE_FRAG_PROCESSED)||this;return n.fragmentTracker=r,n.config=t.config,n.state=d.STOPPED,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new o.default(t,t.config),n}return n(t,e),t.prototype.onHandlerDestroyed=function(){this.fragmentTracker=null,this.state=d.STOPPED,e.prototype.onHandlerDestroyed.call(this)},t.prototype.onSubtitleFragProcessed=function(e){if(this.state=d.IDLE,e.success){var t=this.tracksBuffered[this.currentTrackId],r=e.frag;if(this.fragPrevious=r,t){for(var n,i=0;i<t.length;i++)if(r.start>=t[i].start&&r.start<=t[i].end){n=t[i];break}n?n.end=r.start+r.duration:t.push({start:r.start,end:r.start+r.duration})}}},t.prototype.onMediaAttached=function(e){this.media=e.media,this.state=d.IDLE},t.prototype.onMediaDetaching=function(){this.media=null,this.state=d.STOPPED},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=d.IDLE)},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;a.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,!this.tracks||-1===this.currentTrackId)return void this.clearInterval();var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)},t.prototype.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details;if(!this.tracks)return void a.logger.warn("Can not update subtitle details, no tracks found");this.tracks[t]&&(a.logger.log("Updating subtitle track details"),this.tracks[t].details=r),this.setInterval(500)},t.prototype.onKeyLoaded=function(){this.state===d.KEY_LOADING&&(this.state=d.IDLE)},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,n=e.frag,a=this.hls;if(this.state===d.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var o=f.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,function(e){var t=f.now();a.trigger(i.default.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:o,tdecrypt:t}})})}},t.prototype.doTick=function(){if(!this.media)return void(this.state=d.IDLE);switch(this.state){case d.IDLE:var e=this.tracks,t=this.currentTrackId;if(!e||!e[t]||!e[t].details)break;var r=e[t].details,n=this.config,o=n.maxBufferHole,s=Math.min(n.maxBufferLength,n.maxMaxBufferLength),f=n.maxFragLookUpTolerance,h=u.BufferHelper.bufferedInfo(this._getBuffered(),this.media.currentTime,o),p=h.end,v=h.len,g=r.fragments,y=g.length,_=g[y-1].start+g[y-1].duration,m=void 0;v<s&&p<_?m=l.findFragmentByPTS(this.fragPrevious,g,p,f):r.hasProgramDateTime&&this.fragPrevious&&(m=l.findFragmentByPDT(g,this.fragPrevious.endProgramDateTime,f)),m&&m.encrypted?(a.logger.log("Loading key for "+m.sn),this.state=d.KEY_LOADING,this.hls.trigger(i.default.KEY_LOADING,{frag:m})):m&&this.fragmentTracker.getState(m)===c.FragmentState.NOT_LOADED&&(m.trackId=t,this.fragCurrent=m,this.state=d.FRAG_LOADING,this.hls.trigger(i.default.FRAG_LOADING,{frag:m}))}},t.prototype._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},t}(s.default);t.SubtitleStreamController=h},"./src/controller/subtitle-track-controller.js":/*!*****************************************************!*\
  !*** ./src/controller/subtitle-track-controller.js ***!
  \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";function n(e){for(var t=[],r=0;r<e.length;r++)"subtitles"===e[r].kind&&t.push(e[r]);return t}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(/*! ../events */"./src/events.js"),o=r(/*! ../event-handler */"./src/event-handler.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=function(e){function t(t){var r=e.call(this,t,a.default.MEDIA_ATTACHED,a.default.MEDIA_DETACHING,a.default.MANIFEST_LOADING,a.default.MANIFEST_LOADED,a.default.SUBTITLE_TRACK_LOADED)||this;return r.tracks=[],r.trackId=-1,r.media=null,r.subtitleDisplay=!0,r}return i(t,e),t.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=n(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},t.prototype.destroy=function(){o.default.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.trackId=-1,this.hls.trigger(a.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},t.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var r=t.details;r&&!r.live||(s.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(a.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},t.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(s.logger.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&this._stopTimer())},Object.defineProperty(t.prototype,"subtitleTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTrack",{get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this.setSubtitleTrackInternal(e))},enumerable:!0,configurable:!0}),t.prototype.setSubtitleTrackInternal=function(e){var t=this,r=t.hls,n=t.tracks;if(!("number"!=typeof e||e<-1||e>=n.length)&&(this._stopTimer(),this.trackId=e,s.logger.log("switching to subtitle track "+e),r.trigger(a.default.SUBTITLE_TRACK_SWITCH,{id:e}),-1!==e)){var i=n[e],o=i.details;o&&!o.live||(s.logger.log("(re)loading playlist for subtitle track "+e),r.trigger(a.default.SUBTITLE_TRACK_LOADING,{url:i.url,id:e}))}},t.prototype._stopTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},t.prototype._toggleTrackModes=function(e){var t=this,r=t.media,i=t.subtitleDisplay,a=t.trackId;if(r){var o=n(r.textTracks);if(-1===e)[].slice.call(o).forEach(function(e){e.mode="disabled"});else{var s=o[a];s&&(s.mode="disabled")}var u=o[e];u&&(u.mode=i?"showing":"hidden")}},t}(o.default);t.default=u},"./src/controller/timeline-controller.js":/*!***********************************************!*\
  !*** ./src/controller/timeline-controller.js ***!
  \***********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){function n(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function i(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(/*! ../events */"./src/events.js"),s=r(/*! ../event-handler */"./src/event-handler.js"),u=r(/*! ../utils/cea-608-parser */"./src/utils/cea-608-parser.js"),l=r(/*! ../utils/output-filter */"./src/utils/output-filter.js"),c=r(/*! ../utils/webvtt-parser */"./src/utils/webvtt-parser.js"),f=r(/*! ../utils/logger */"./src/utils/logger.js"),d=r(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.js"),h=function(t){function r(e){var r=t.call(this,e,o.default.MEDIA_ATTACHING,o.default.MEDIA_DETACHING,o.default.FRAG_PARSING_USERDATA,o.default.FRAG_DECRYPTED,o.default.MANIFEST_LOADING,o.default.MANIFEST_LOADED,o.default.FRAG_LOADED,o.default.LEVEL_SWITCHING,o.default.INIT_PTS_FOUND)||this;if(r.hls=e,r.config=e.config,r.enabled=!0,r.Cues=e.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=[],r.cueRanges=[],r.captionsTracks={},r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode}},r.config.enableCEA708Captions){var n=new l.default(r,"textTrack1"),i=new l.default(r,"textTrack2");r.cea608Parser=new u.default(0,n,i)}return r}return a(r,t),r.prototype.addCues=function(e,t,r,n){for(var a=this.cueRanges,o=!1,s=a.length;s--;){var u=a[s],l=i(u[0],u[1],t,r);if(l>=0&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],r),o=!0,l/(r-t)>.5))return}o||a.push([t,r]),this.Cues.newCue(this.captionsTracks[e],t,r,n)},r.prototype.onInitPtsFound=function(e){var t=this;if("main"===e.id&&(this.initPTS[e.frag.cc]=e.initPTS),this.unparsedVttFrags.length){var r=this.unparsedVttFrags;this.unparsedVttFrags=[],r.forEach(function(e){t.onFragLoaded(e)})}},r.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r];if(n[e])return n}return null},r.prototype.createCaptionsTrack=function(e){var t=this.captionsProperties[e],r=t.label,n=t.languageCode,i=this.captionsTracks;if(!i[e]){var a=this.getExistingTrack(e);if(a)i[e]=a,d.clearCurrentCues(i[e]),d.sendAddTrackEvent(i[e],this.media);else{var o=this.createTextTrack("captions",r,n);o&&(o[e]=!0,i[e]=o)}}},r.prototype.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},r.prototype.destroy=function(){s.default.prototype.destroy.call(this)},r.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},r.prototype.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){d.clearCurrentCues(e[t]),delete e[t]})},r.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},r.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)d.clearCurrentCues(t[r])}},r.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,i){var a;if(i<r.length){var o=[].slice.call(r).find(function(t){return n(t,e)});o&&(a=o)}a||(a=t.createTextTrack("subtitles",e.name,e.lang)),e.default?a.mode=t.hls.subtitleDisplay?"showing":"hidden":a.mode="disabled",t.textTracks.push(a)})}},r.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},r.prototype.onFragLoaded=function(t){var r=t.frag,n=t.payload;if("main"===r.type){var i=r.sn;if(i!==this.lastSn+1){var a=this.cea608Parser;a&&a.reset()}this.lastSn=i}else if("subtitle"===r.type)if(n.byteLength){if(!e.isFinite(this.initPTS[r.cc]))return this.unparsedVttFrags.push(t),void(this.initPTS.length&&this.hls.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r}));var s=r.decryptdata;null!=s&&null!=s.key&&"AES-128"===s.method||this._parseVTTs(r,n)}else this.hls.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r})},r.prototype._parseVTTs=function(e,t){var r=this.vttCCs;r[e.cc]||(r[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var n=this.textTracks,i=this.hls;c.default.parse(t,this.initPTS[e.cc],r,e.cc,function(t){var r=n[e.trackId];if("disabled"===r.mode)return void i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e});t.forEach(function(e){if(!r.cues.getCueById(e.id))try{r.addCue(e)}catch(n){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,r.addCue(t)}}),i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(t){f.logger.log("Failed to parse VTT cue: "+t),i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},r.prototype.onFragDecrypted=function(t){var r=t.payload,n=t.frag;if("subtitle"===n.type){if(!e.isFinite(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(n,r)}},r.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}},r.prototype.extractCea608Data=function(e){for(var t,r,n,i,a,o=31&e[0],s=2,u=[],l=0;l<o;l++)t=e[s++],r=127&e[s++],n=127&e[s++],i=0!=(4&t),a=3&t,0===r&&0===n||i&&0===a&&(u.push(r),u.push(n));return u},r}(s.default);t.default=h}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/crypt/aes-crypto.js":/*!*********************************!*\
  !*** ./src/crypt/aes-crypto.js ***!
  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();t.default=n},"./src/crypt/aes-decryptor.js":/*!************************************!*\
  !*** ./src/crypt/aes-decryptor.js ***!
  \************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";function n(e){var t=e.byteLength,r=t&&new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}Object.defineProperty(t,"__esModule",{value:!0}),t.removePadding=n;var i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],o=r[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],f=s[3],d=new Uint32Array(256),h=0,p=0,v=0;for(v=0;v<256;v++)d[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,e[h]=g,t[g]=h;var y=d[h],_=d[y],m=d[_],E=257*d[g]^16843008*g;n[h]=E<<24|E>>>8,i[h]=E<<16|E>>>16,a[h]=E<<8|E>>>24,o[h]=E,E=16843009*m^65537*_^257*y^16843008*h,u[g]=E<<24|E>>>8,l[g]=E<<16|E>>>16,c[g]=E<<8|E>>>24,f[g]=E,h?(h=y^d[d[d[m^y]]],p^=d[d[p]]):h=p=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,u,l=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(l),f=this.invKeySchedule=new Uint32Array(l),d=this.sBox,h=this.rcon,p=this.invSubMix,v=p[0],g=p[1],y=p[2],_=p[3];for(a=0;a<l;a++)a<i?s=c[a]=t[a]:(u=s,a%i==0?(u=u<<8|u>>>24,u=d[u>>>24]<<24|d[u>>>16&255]<<16|d[u>>>8&255]<<8|d[255&u],u^=h[a/i|0]<<24):i>6&&a%i==4&&(u=d[u>>>24]<<24|d[u>>>16&255]<<16|d[u>>>8&255]<<8|d[255&u]),c[a]=s=(c[a-i]^u)>>>0);for(o=0;o<l;o++)a=l-o,u=3&o?c[a]:c[a-4],f[o]=o<4||a<=4?u:v[d[u>>>24]]^g[d[u>>>16&255]]^y[d[u>>>8&255]]^_[d[255&u]],f[o]=f[o]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,r,i){for(var a,o,s,u,l,c,f,d,h,p,v,g,y,_,m=this.keySize+6,E=this.invKeySchedule,b=this.invSBox,T=this.invSubMix,S=T[0],A=T[1],k=T[2],O=T[3],w=this.uint8ArrayToUint32Array_(r),R=w[0],P=w[1],L=w[2],D=w[3],C=new Int32Array(e),I=new Int32Array(C.length),M=this.networkToHostOrderSwap;t<C.length;){for(h=M(C[t]),p=M(C[t+1]),v=M(C[t+2]),g=M(C[t+3]),l=h^E[0],c=g^E[1],f=v^E[2],d=p^E[3],y=4,_=1;_<m;_++)a=S[l>>>24]^A[c>>16&255]^k[f>>8&255]^O[255&d]^E[y],o=S[c>>>24]^A[f>>16&255]^k[d>>8&255]^O[255&l]^E[y+1],s=S[f>>>24]^A[d>>16&255]^k[l>>8&255]^O[255&c]^E[y+2],u=S[d>>>24]^A[l>>16&255]^k[c>>8&255]^O[255&f]^E[y+3],l=a,c=o,f=s,d=u,y+=4;a=b[l>>>24]<<24^b[c>>16&255]<<16^b[f>>8&255]<<8^b[255&d]^E[y],o=b[c>>>24]<<24^b[f>>16&255]<<16^b[d>>8&255]<<8^b[255&l]^E[y+1],s=b[f>>>24]<<24^b[d>>16&255]<<16^b[l>>8&255]<<8^b[255&c]^E[y+2],u=b[d>>>24]<<24^b[l>>16&255]<<16^b[c>>8&255]<<8^b[255&f]^E[y+3],y+=3,I[t]=M(a^R),I[t+1]=M(u^P),I[t+2]=M(s^L),I[t+3]=M(o^D),R=h,P=p,L=v,D=g,t+=4}return i?n(I.buffer):I.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}();t.default=i},"./src/crypt/decrypter.js":/*!********************************!*\
  !*** ./src/crypt/decrypter.js ***!
  \********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./aes-crypto */"./src/crypt/aes-crypto.js"),i=r(/*! ./fast-aes-key */"./src/crypt/fast-aes-key.js"),a=r(/*! ./aes-decryptor */"./src/crypt/aes-decryptor.js"),o=r(/*! ../errors */"./src/errors.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=r(/*! ../events */"./src/events.js"),l=r(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),c=l.getSelfScope(),f=function(){function e(e,t,r){var n=(void 0===r?{}:r).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var a=c.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,r,o){var u=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var l=this.decryptor;l||(this.decryptor=l=new a.default),l.expandKey(t),o(l.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i.default(c,t)),this.fastAesKey.expandKey().then(function(i){new n.default(c,r).decrypt(e,i).catch(function(n){u.onWebCryptoError(n,e,t,r,o)}).then(function(e){o(e)})}).catch(function(n){u.onWebCryptoError(n,e,t,r,o)})}},e.prototype.onWebCryptoError=function(e,t,r,n,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=f},"./src/crypt/fast-aes-key.js":/*!***********************************!*\
  !*** ./src/crypt/fast-aes-key.js ***!
  \***********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();t.default=n},"./src/demux/aacdemuxer.js":/*!*********************************!*\
  !*** ./src/demux/aacdemuxer.js ***!
  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./adts */"./src/demux/adts.js"),i=r(/*! ../utils/logger */"./src/utils/logger.js"),a=r(/*! ../demux/id3 */"./src/demux/id3.js"),o=function(){function t(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return t.prototype.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(e){if(!e)return!1;for(var t=a.default.getID3Data(e,0)||[],r=t.length,o=e.length;r<o;r++)if(n.probe(e,r))return i.logger.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,r,o,s){for(var u=this._audioTrack,l=a.default.getID3Data(t,0)||[],c=a.default.getTimeStamp(l),f=e.isFinite(c)?90*c:9e4*r,d=0,h=f,p=t.length,v=l.length,g=[{pts:h,dts:h,data:l}];v<p-1;)if(n.isHeader(t,v)&&v+5<p){n.initTrackConfig(u,this.observer,t,v,u.manifestCodec);var y=n.appendFrame(u,t,v,f,d);if(!y){i.logger.log("Unable to parse AAC frame");break}v+=y.length,h=y.sample.pts,d++}else a.default.isHeader(t,v)?(l=a.default.getID3Data(t,v),g.push({pts:h,dts:h,data:l}),v+=l.length):v++;this.remuxer.remux(u,{samples:[]},{samples:g,inputTimeScale:9e4},{samples:[]},r,o,s)},t.prototype.destroy=function(){},t}();t.default=o}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/demux/adts.js":/*!***************************!*\
  !*** ./src/demux/adts.js ***!
  \***************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";function n(e,t,r,n){var i,a,o,s,u,l=navigator.userAgent.toLowerCase(),c=n,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return i=1+((192&t[r+2])>>>6),(a=(60&t[r+2])>>>2)>f.length-1?void e.trigger(v.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a}):(s=(1&t[r+2])<<2,s|=(192&t[r+3])>>>6,h.logger.log("manifest codec:"+n+",ADTS data:type:"+i+",sampleingIndex:"+a+"["+f[a]+"Hz],channelConfig:"+s),/firefox/i.test(l)?a>=6?(i=5,u=new Array(4),o=a-3):(i=2,u=new Array(2),o=a):-1!==l.indexOf("android")?(i=2,u=new Array(2),o=a):(i=5,u=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&a>=6?o=a-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(a>=6&&1===s||/vivaldi/i.test(l))||!n&&1===s)&&(i=2,u=new Array(2)),o=a)),u[0]=i<<3,u[0]|=(14&a)>>1,u[1]|=(1&a)<<7,u[1]|=s<<3,5===i&&(u[1]|=(14&o)>>1,u[2]=(1&o)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:f[a],channelCount:s,codec:"mp4a.40."+i,manifestCodec:c})}function i(e,t){return 255===e[t]&&240==(246&e[t+1])}function a(e,t){return 1&e[t+1]?7:9}function o(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function s(e,t){return!!(t+1<e.length&&i(e,t))}function u(e,t){if(t+1<e.length&&i(e,t)){var r=a(e,t),n=r;t+5<e.length&&(n=o(e,t));var s=t+n;if(s===e.length||s+1<e.length&&i(e,s))return!0}return!1}function l(e,t,r,i,a){if(!e.samplerate){var o=n(t,r,i,a);e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,h.logger.log("parsed codec:"+e.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}}function c(e){return 9216e4/e}function f(e,t,r,n,i){var s,u,l,c=e.length;if(s=a(e,t),u=o(e,t),(u-=s)>0&&t+s+u<=c)return l=r+n*i,{headerLength:s,frameLength:u,stamp:l}}function d(e,t,r,n,i){var a=c(e.samplerate),o=f(t,r,n,i,a);if(o){var s=o.stamp,u=o.headerLength,l=o.frameLength,d={unit:t.subarray(r+u,r+u+l),pts:s,dts:s};return e.samples.push(d),e.len+=l,{sample:d,length:l+u}}}Object.defineProperty(t,"__esModule",{value:!0});var h=r(/*! ../utils/logger */"./src/utils/logger.js"),p=r(/*! ../errors */"./src/errors.js"),v=r(/*! ../events */"./src/events.js");t.getAudioConfig=n,t.isHeaderPattern=i,t.getHeaderLength=a,t.getFullFrameLength=o,t.isHeader=s,t.probe=u,t.initTrackConfig=l,t.getFrameDuration=c,t.parseFrameHeader=f,t.appendFrame=d},"./src/demux/demuxer-inline.js":/*!*************************************!*\
  !*** ./src/demux/demuxer-inline.js ***!
  \*************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(/*! ../events */"./src/events.js"),a=r(/*! ../errors */"./src/errors.js"),o=r(/*! ../crypt/decrypter */"./src/crypt/decrypter.js"),s=r(/*! ../demux/aacdemuxer */"./src/demux/aacdemuxer.js"),u=r(/*! ../demux/mp4demuxer */"./src/demux/mp4demuxer.js"),l=r(/*! ../demux/tsdemuxer */"./src/demux/tsdemuxer.js"),c=r(/*! ../demux/mp3demuxer */"./src/demux/mp3demuxer.js"),f=r(/*! ../remux/mp4-remuxer */"./src/remux/mp4-remuxer.js"),d=r(/*! ../remux/passthrough-remuxer */"./src/remux/passthrough-remuxer.js"),h=r(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),p=r(/*! ../utils/logger */"./src/utils/logger.js"),v=h.getSelfScope();try{n=v.performance.now.bind(v.performance)}catch(e){p.logger.debug("Unable to use Performance API on this environment"),n=v.Date.now}var g=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,r,a,s,u,l,c,f,d,h,p){var v=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var g=this.decrypter;null==g&&(g=this.decrypter=new o.default(this.observer,this.config));var y=n();g.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var o=n();v.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:y,tdecrypt:o}}),v.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),a,s,u,l,c,f,d,h,p)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),a,s,u,l,c,f,d,h,p)},e.prototype.pushDecrypted=function(e,t,r,n,o,h,p,v,g,y,_,m){var E=this.demuxer;if(!E||(p||v)&&!this.probe(e)){for(var b=this.observer,T=this.typeSupported,S=this.config,A=[{demux:l.default,remux:f.default},{demux:u.default,remux:d.default},{demux:s.default,remux:f.default},{demux:c.default,remux:f.default}],k=0,O=A.length;k<O;k++){var w=A[k],R=w.demux.probe;if(R(e)){var P=this.remuxer=new w.remux(b,S,T,this.vendor);E=new w.demux(b,P,S,T),this.probe=R;break}}if(!E)return void b.trigger(i.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=E}var L=this.remuxer;(p||v)&&(E.resetInitSegment(r,n,o,y),L.resetInitSegment()),p&&(E.resetTimeStamp(m),L.resetTimeStamp(m)),"function"==typeof E.setDecryptData&&E.setDecryptData(t),E.append(e,h,g,_)},e}();t.default=g},"./src/demux/demuxer-worker.js":/*!*************************************!*\
  !*** ./src/demux/demuxer-worker.js ***!
  \*************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),i=r(/*! ../events */"./src/events.js"),a=r(/*! ../utils/logger */"./src/utils/logger.js"),o=r(/*! events */"./node_modules/node-libs-browser/node_modules/events/events.js"),s=function(e){var t=new o.EventEmitter;t.trigger=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.removeListener.apply(t,[e].concat(r))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new n.default(t,o.typeSupported,s,o.vendor),a.enableLogs(s.debug),r("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),t.on(i.default.FRAG_DECRYPTED,r),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(i.default.FRAG_PARSED,r),t.on(i.default.ERROR,r),t.on(i.default.FRAG_PARSING_METADATA,r),t.on(i.default.FRAG_PARSING_USERDATA,r),t.on(i.default.INIT_PTS_FOUND,r),t.on(i.default.FRAG_PARSING_DATA,function(t,r){var n=[],i={event:t,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(i,n)})};t.default=s},"./src/demux/demuxer.js":/*!******************************!*\
  !*** ./src/demux/demuxer.js ***!
  \******************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! webworkify-webpack */"./node_modules/webworkify-webpack/index.js"),i=r(/*! ../events */"./src/events.js"),a=r(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),o=r(/*! ../utils/logger */"./src/utils/logger.js"),s=r(/*! ../errors */"./src/errors.js"),u=r(/*! ../utils/mediasource-helper */"./src/utils/mediasource-helper.js"),l=r(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),c=r(/*! ../observer */"./src/observer.js"),f=l.getSelfScope(),d=u.getMediaSource(),h=function(){function t(e,t){var r=this;this.hls=e,this.id=t;var u=this.observer=new c.Observer,l=e.config,h=function(t,n){n=n||{},n.frag=r.frag,n.id=r.id,e.trigger(t,n)};u.on(i.default.FRAG_DECRYPTED,h),u.on(i.default.FRAG_PARSING_INIT_SEGMENT,h),u.on(i.default.FRAG_PARSING_DATA,h),u.on(i.default.FRAG_PARSED,h),u.on(i.default.ERROR,h),u.on(i.default.FRAG_PARSING_METADATA,h),u.on(i.default.FRAG_PARSING_USERDATA,h),u.on(i.default.INIT_PTS_FOUND,h);var p={mp4:d.isTypeSupported("video/mp4"),mpeg:d.isTypeSupported("audio/mpeg"),mp3:d.isTypeSupported('audio/mp4; codecs="mp3"')},v=navigator.vendor;if(l.enableWorker&&"undefined"!=typeof Worker){o.logger.log("demuxing in webworker");var g=void 0;try{g=this.w=n("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),g.addEventListener("message",this.onwmsg),g.onerror=function(t){e.trigger(i.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},g.postMessage({cmd:"init",typeSupported:p,vendor:v,id:t,config:JSON.stringify(l)})}catch(e){o.logger.warn("Error in worker:",e),o.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),g&&f.URL.revokeObjectURL(g.objectURL),this.demuxer=new a.default(u,p,l,v),this.w=void 0}}else this.demuxer=new a.default(u,p,l,v)}return t.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,r,n,i,a,s,u,l){var c=this.w,f=e.isFinite(a.startPTS)?a.startPTS:a.start,d=a.decryptdata,h=this.frag,p=!(h&&a.cc===h.cc),v=!(h&&a.level===h.level),g=h&&a.sn===h.sn+1,y=!v&&g;if(p&&o.logger.log(this.id+":discontinuity detected"),v&&o.logger.log(this.id+":switch detected"),this.frag=a,c)c.postMessage({cmd:"demux",data:t,decryptdata:d,initSegment:r,audioCodec:n,videoCodec:i,timeOffset:f,discontinuity:p,trackSwitch:v,contiguous:y,duration:s,accurateTimeOffset:u,defaultInitPTS:l},t instanceof ArrayBuffer?[t]:[]);else{var _=this.demuxer;_&&_.push(t,d,r,n,i,f,p,v,y,s,u,l)}},t.prototype.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":f.URL.revokeObjectURL(this.w.objectURL);break;case i.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},t}();t.default=h}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/demux/exp-golomb.js":/*!*********************************!*\
  !*** ./src/demux/exp-golomb.js ***!
  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../utils/logger */"./src/utils/logger.js"),i=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,r,n=8,i=8;for(t=0;t<e;t++)0!==i&&(r=this.readEG(),i=(n+r+256)%256),n=0===i?n:i},e.prototype.readSPS=function(){var e,t,r,n,i,a,o,s=0,u=0,l=0,c=0,f=this.readUByte.bind(this),d=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),g=this.skipEG.bind(this),y=this.skipUEG.bind(this),_=this.skipScalingList.bind(this);if(f(),e=f(),d(5),v(3),f(),y(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var m=h();if(3===m&&v(1),y(),y(),v(1),p())for(a=3!==m?8:12,o=0;o<a;o++)p()&&_(o<6?16:64)}y();var E=h();if(0===E)h();else if(1===E)for(v(1),g(),g(),t=h(),o=0;o<t;o++)g();y(),v(1),r=h(),n=h(),i=d(1),0===i&&v(1),v(1),p()&&(s=h(),u=h(),l=h(),c=h());var b=[1,1];if(p()&&p()){switch(f()){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:b=[f()<<8|f(),f()<<8|f()]}}return{width:Math.ceil(16*(r+1)-2*s-2*u),height:(2-i)*(n+1)*16-(i?2:4)*(l+c),pixelRatio:b}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=i},"./src/demux/id3.js":/*!**************************!*\
  !*** ./src/demux/id3.js ***!
  \**************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var n=r,i=0;e.isHeader(t,r);){i+=10;i+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(i+=10),r+=i}if(i>0)return t.subarray(n,n+i)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),n=0;n<r.length;n++){var i=r[n];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4);return{type:r,size:n,data:t.subarray(10,10+n)}},e.getID3Frames=function(t){for(var r=0,n=[];e.isHeader(t,r);){var i=e._readSize(t,r+6);r+=10;for(var a=r+i;r+8<a;){var o=e._getFrameData(t.subarray(r)),s=e._decodeFrame(o);s&&n.push(s),r+=o.size+10}e.isFooter(t,r)&&(r+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);for(var r,n,i,a=e.length,o="",s=0;s<a;){if(0===(r=e[s++])&&t)return o;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:n=e[s++],o+=String.fromCharCode((31&r)<<6|63&n);break;case 14:n=e[s++],i=e[s++],o+=String.fromCharCode((15&r)<<12|(63&n)<<6|(63&i)<<0)}}return o},e}(),i=n._utf8ArrayToStr;t.utf8ArrayToStr=i,t.default=n},"./src/demux/mp3demuxer.js":/*!*********************************!*\
  !*** ./src/demux/mp3demuxer.js ***!
  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../demux/id3 */"./src/demux/id3.js"),i=r(/*! ../utils/logger */"./src/utils/logger.js"),a=r(/*! ./mpegaudio */"./src/demux/mpegaudio.js"),o=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return e.prototype.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,r,o=n.default.getID3Data(e,0);if(o&&void 0!==n.default.getTimeStamp(o))for(t=o.length,r=Math.min(e.length-1,t+100);t<r;t++)if(a.default.probe(e,t))return i.logger.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,r,i){for(var o=n.default.getID3Data(e,0),s=n.default.getTimeStamp(o),u=s?90*s:9e4*t,l=o.length,c=e.length,f=0,d=0,h=this._audioTrack,p=[{pts:u,dts:u,data:o}];l<c;)if(a.default.isHeader(e,l)){var v=a.default.appendFrame(h,e,l,u,f);if(!v)break;l+=v.length,d=v.sample.pts,f++}else n.default.isHeader(e,l)?(o=n.default.getID3Data(e,l),p.push({pts:d,dts:d,data:o}),l+=o.length):l++;this.remuxer.remux(h,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},t,r,i)},e.prototype.destroy=function(){},e}();t.default=o},"./src/demux/mp4demuxer.js":/*!*********************************!*\
  !*** ./src/demux/mp4demuxer.js ***!
  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../utils/logger */"./src/utils/logger.js"),i=r(/*! ../events */"./src/events.js"),a=Math.pow(2,32)-1,o=function(){function e(e,t){this.observer=e,this.remuxer=t}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,r,n,a){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:a?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:a?t:null}),o.video&&(s.video={container:"video/mp4",codec:n,initSegment:a?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var n,i,a,o,s,u,l,c=[];if(t.data?(u=t.start,o=t.end,t=t.data):(u=0,o=t.byteLength),!r.length)return null;for(n=u;n<o;)i=e.readUint32(t,n),a=e.bin2str(t.subarray(n+4,n+8)),l=i>1?n+i:o,a===r[0]&&(1===r.length?c.push({data:t,start:n+8,end:l}):(s=e.findBox({data:t,start:n+8,end:l},r.slice(1)),s.length&&(c=c.concat(s)))),n=l;return c},e.parseSegmentIndex=function(t){var r,n=e.findBox(t,["moov"])[0],i=n?n.end:null,a=0,o=e.findBox(t,["sidx"]);if(!o||!o[0])return null;r=[],o=o[0];var s=o.data[0];a=0===s?8:16;var u=e.readUint32(o,a);a+=4;a+=0===s?8:16,a+=2;var l=o.end+0,c=e.readUint16(o,a);a+=2;for(var f=0;f<c;f++){var d=a,h=e.readUint32(o,d);d+=4;var p=2147483647&h;if(1===(2147483648&h)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var v=e.readUint32(o,d);d+=4,r.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/u,start:l,end:l+p-1}}),l+=p,d+=4,a=d}return{earliestPresentationTime:0,timescale:u,version:s,referencesCount:c,references:r,moovEndOffset:i}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var a=i.data[i.start],o=0===a?12:20,s=e.readUint32(i,o),u=e.findBox(t,["mdia","mdhd"])[0];if(u){a=u.data[u.start],o=0===a?12:20;var l=e.readUint32(u,o),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var f=e.bin2str(c.data.subarray(c.start+8,c.start+12)),d={soun:"audio",vide:"video"}[f];if(d){var h=e.findBox(t,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var p=e.bin2str(h.data.subarray(h.start+12,h.start+16));n.logger.log("MP4Demuxer:"+d+":"+p+" found")}r[s]={timescale:l,type:d},r[d]={timescale:l,id:s}}}}}}),r},e.getStartDTS=function(t,r){var n,i,a;return n=e.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map(function(r){return e.findBox(r,["tfhd"]).map(function(n){var i,a;return i=e.readUint32(n,4),a=t[i].timescale||9e4,e.findBox(r,["tfdt"]).map(function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n})[0]/a})})),a=Math.min.apply(null,i),isFinite(a)?a:0},e.offsetStartDTS=function(t,r,n){e.findBox(r,["moof","traf"]).map(function(r){return e.findBox(r,["tfhd"]).map(function(i){var o=e.readUint32(i,4),s=t[o].timescale||9e4;e.findBox(r,["tfdt"]).map(function(t){var r=t.data[t.start],i=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,i-n*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=n*s,i=Math.max(i,0);var o=Math.floor(i/(a+1)),u=Math.floor(i%(a+1));e.writeUint32(t,4,o),e.writeUint32(t,8,u)}})})})},e.prototype.append=function(t,r,n,a){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,u=this.initPTS;if(void 0===u){var l=e.getStartDTS(o,t);this.initPTS=u=l-r,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:u})}e.offsetStartDTS(o,t,u),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,n,a,t)},e.prototype.destroy=function(){},e}();t.default=o},"./src/demux/mpegaudio.js":/*!********************************!*\
  !*** ./src/demux/mpegaudio.js ***!
  \********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,n,i){if(!(r+24>t.length)){var a=this.parseHeader(t,r);if(a&&r+a.frameLength<=t.length){var o=9e4*a.samplesPerFrame/a.sampleRate,s=n+i*o,u={unit:t.subarray(r,r+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(u),e.len+=a.frameLength,{sample:u,length:a.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,a=e[t+2]>>4&15,o=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!==r&&0!==a&&15!==a&&3!==o){var u=3===r?3-i:3===i?3:4,l=1e3*n.BitratesMap[14*u+a-1],c=3===r?0:2===r?1:2,f=n.SamplingRateMap[3*c+o],d=e[t+3]>>6==3?1:2,h=n.SamplesCoefficients[r][i],p=n.BytesInSlot[i],v=8*h*p;return{sampleRate:f,channelCount:d,frameLength:parseInt(h*l/f+s,10)*p,samplesPerFrame:v}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),n=4;r&&r.frameLength&&(n=r.frameLength);var i=t+n;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};t.default=n},"./src/demux/sample-aes.js":/*!*********************************!*\
  !*** ./src/demux/sample-aes.js ***!
  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../crypt/decrypter */"./src/crypt/decrypter.js"),i=function(){function e(e,t,r,i){this.decryptdata=r,this.discardEPB=i,this.decrypter=new n.default(e,t,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,r,n){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,function(a){a=new Uint8Array(a),i.set(a,16),n||s.decryptAacSamples(e,t+1,r)})},e.prototype.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e},e.prototype.decryptAvcSample=function(e,t,r,n,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),u=this;this.decryptBuffer(s.buffer,function(s){i.data=u.getAvcDecryptedUnit(o,s),a||u.decryptAvcSamples(e,t,r+1,n)})},e.prototype.decryptAvcSamples=function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;!(r>=i.length);r++){var a=i[r];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,a,o),!o)return}}}},e}();t.default=i},"./src/demux/tsdemuxer.js":/*!********************************!*\
  !*** ./src/demux/tsdemuxer.js ***!
  \********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./adts */"./src/demux/adts.js"),i=r(/*! ./mpegaudio */"./src/demux/mpegaudio.js"),a=r(/*! ../events */"./src/events.js"),o=r(/*! ./exp-golomb */"./src/demux/exp-golomb.js"),s=r(/*! ./sample-aes */"./src/demux/sample-aes.js"),u=r(/*! ../utils/logger */"./src/utils/logger.js"),l=r(/*! ../errors */"./src/errors.js"),c={video:1,audio:2,id3:3,text:4},f=function(){function e(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new s.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0)&&(r&&u.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:c[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,r,n,i){var o,s,c,f,d,h=t.length,p=!1;this.contiguous=n;var v=this.pmtParsed,g=this._avcTrack,y=this._audioTrack,_=this._id3Track,m=g.pid,E=y.pid,b=_.pid,T=this._pmtId,S=g.pesData,A=y.pesData,k=_.pesData,O=this._parsePAT,w=this._parsePMT,R=this._parsePES,P=this._parseAVCPES.bind(this),L=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),C=this._parseID3PES.bind(this),I=e._syncOffset(t);for(h-=(h+I)%188,o=I;o<h;o+=188)if(71===t[o]){if(s=!!(64&t[o+1]),c=((31&t[o+1])<<8)+t[o+2],(48&t[o+3])>>4>1){if((f=o+5+t[o+4])===o+188)continue}else f=o+4;switch(c){case m:s&&(S&&(d=R(S))&&void 0!==d.pts&&P(d,!1),S={data:[],size:0}),S&&(S.data.push(t.subarray(f,o+188)),S.size+=o+188-f);break;case E:s&&(A&&(d=R(A))&&void 0!==d.pts&&(y.isAAC?L(d):D(d)),A={data:[],size:0}),A&&(A.data.push(t.subarray(f,o+188)),A.size+=o+188-f);break;case b:s&&(k&&(d=R(k))&&void 0!==d.pts&&C(d),k={data:[],size:0}),k&&(k.data.push(t.subarray(f,o+188)),k.size+=o+188-f);break;case 0:s&&(f+=t[f]+1),T=this._pmtId=O(t,f);break;case T:s&&(f+=t[f]+1);var M=w(t,f,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);m=M.avc,m>0&&(g.pid=m),E=M.audio,E>0&&(y.pid=E,y.isAAC=M.isAAC),b=M.id3,b>0&&(_.pid=b),p&&!v&&(u.logger.log("reparse from beginning"),p=!1,o=I-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(a.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(d=R(S))&&void 0!==d.pts?(P(d,!0),g.pesData=null):g.pesData=S,A&&(d=R(A))&&void 0!==d.pts?(y.isAAC?L(d):D(d),y.pesData=null):(A&&A.size&&u.logger.log("last AAC PES packet truncated,might overlap between fragments"),y.pesData=A),k&&(d=R(k))&&void 0!==d.pts?(C(d),_.pesData=null):_.pesData=k,null==this.sampleAes?this.remuxer.remux(y,g,_,this._txtTrack,r,n,i):this.decryptAndRemux(y,g,_,this._txtTrack,r,n,i)},e.prototype.decryptAndRemux=function(e,t,r,n,i,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,r,n,i,a,o)})}else this.decryptAndRemuxAvc(e,t,r,n,i,a,o)},e.prototype.decryptAndRemuxAvc=function(e,t,r,n,i,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,r,n,i,a,o)})}else this.remuxer.remux(e,t,r,n,i,a,o)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,r,n){var i,a,o,s,l={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&e[t+1])<<8|e[t+2],a=t+3+i-4,o=(15&e[t+10])<<8|e[t+11],t+=12+o;t<a;){switch(s=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){u.logger.log("unkown stream type:"+e[t]);break}case 15:-1===l.audio&&(l.audio=s);break;case 21:-1===l.id3&&(l.id3=s);break;case 219:if(!n){u.logger.log("unkown stream type:"+e[t]);break}case 27:-1===l.avc&&(l.avc=s);break;case 3:case 4:r?-1===l.audio&&(l.audio=s,l.isAAC=!1):u.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:u.logger.warn("HEVC stream type found, not supported for now");break;default:u.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return l},e.prototype._parsePES=function(e){var t,r,n,i,a,o,s,l,c=0,f=e.data;if(!e||0===e.size)return null;for(;f[0].length<19&&f.length>1;){var d=new Uint8Array(f[0].length+f[1].length);d.set(f[0]),d.set(f[1],f[0].length),f[0]=d,f.splice(1,1)}if(t=f[0],1===(t[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;r=t[7],192&r&&(o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,o>4294967295&&(o-=8589934592),64&r?(s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,s>4294967295&&(s-=8589934592),o-s>54e5&&(u.logger.warn(Math.round((o-s)/9e4)+"s delta between PTS and DTS, align them"),o=s)):s=o),i=t[8],l=i+9,e.size-=l,a=new Uint8Array(e.size);for(var h=0,p=f.length;h<p;h++){t=f[h];var v=t.byteLength;if(l){if(l>v){l-=v;continue}t=t.subarray(l),v-=l,l=0}a.set(t,c),c+=v}return n&&(n-=i+3),{data:a,pts:o,dts:s,len:n}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&u.logger.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var r,n,i,a=this,s=this._avcTrack,u=this._parseAVCNALu(e.data),l=this.avcSample,c=!1,f=this.pushAccesUnit.bind(this),d=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,l&&u.length&&!s.audFound&&(f(l,s),l=this.avcSample=d(!1,e.pts,e.dts,"")),u.forEach(function(t){switch(t.type){case 1:n=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.frame=!0;var u=t.data;if(c&&u.length>4){var h=new o.default(u).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:n=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0,r=new o.default(a.discardEPB(t.data)),r.readUByte();for(var p=0,v=0,g=!1,y=0;!g&&r.bytesAvailable>1;){p=0;do{y=r.readUByte(),p+=y}while(255===y);v=0;do{y=r.readUByte(),v+=y}while(255===y);if(4===p&&0!==r.bytesAvailable){g=!0;if(181===r.readUByte()){if(49===r.readUShort()){if(1195456820===r.readUInt()){if(3===r.readUByte()){var _=r.readUByte(),m=r.readUByte(),E=31&_,b=[_,m];for(i=0;i<E;i++)b.push(r.readUByte()),b.push(r.readUByte()),b.push(r.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:b})}}}}}else if(v<r.bytesAvailable)for(i=0;i<v;i++)r.readUByte()}break;case 7:if(n=!0,c=!0,!s.sps){r=new o.default(t.data);var T=r.readSPS();s.width=T.width,s.height=T.height,s.pixelRatio=T.pixelRatio,s.sps=[t.data],s.duration=a._duration;var S=t.data.subarray(1,4),A="avc1.";for(i=0;i<3;i++){var k=S[i].toString(16);k.length<2&&(k="0"+k),A+=k}s.codec=A}break;case 8:n=!0,s.pps||(s.pps=[t.data]);break;case 9:n=!1,s.audFound=!0,l&&f(l,s),l=a.avcSample=d(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}if(l&&n){l.units.push(t)}}),t&&l&&(f(l,s),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack,n=r.samples;t=n[n.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},e.prototype._parseAVCNALu=function(e){var t,r,n,i,a,o=0,s=e.byteLength,u=this._avcTrack,l=u.naluState||0,c=l,f=[],d=-1;for(-1===l&&(d=0,a=31&e[0],l=0,o=1);o<s;)if(t=e[o++],l)if(1!==l)if(t)if(1===t){if(d>=0)n={data:e.subarray(d,o-l-1),type:a},f.push(n);else{var h=this._getLastNalUnit();if(h&&(c&&o<=4-c&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-c)),(r=o-l-1)>0)){var p=new Uint8Array(h.data.byteLength+r);p.set(h.data,0),p.set(e.subarray(0,r),h.data.byteLength),h.data=p}}o<s?(i=31&e[o],d=o,a=i,l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(d>=0&&l>=0&&(n={data:e.subarray(d,s),type:a,state:l},f.push(n)),0===f.length){var h=this._getLastNalUnit();if(h){var p=new Uint8Array(h.data.byteLength+e.byteLength);p.set(h.data,0),p.set(e,h.data.byteLength),h.data=p}}return u.naluState=l,f},e.prototype.discardEPB=function(e){for(var t,r,n=e.byteLength,i=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),r[a]=e[o];return r},e.prototype._parseAACPES=function(e){var t,r,i,o,s,c=this._audioTrack,f=e.data,d=e.pts,h=this.aacOverFlow,p=this.aacLastPTS;if(h){var v=new Uint8Array(h.byteLength+f.byteLength);v.set(h,0),v.set(f,h.byteLength),f=v}for(i=0,s=f.length;i<s-1&&!n.isHeader(f,i);i++);if(i){var g=void 0,y=void 0;if(i<s-1?(g="AAC PES did not start with ADTS header,offset:"+i,y=!1):(g="no ADTS header found in AAC PES",y=!0),u.logger.warn("parsing error:"+g),this.observer.trigger(a.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:y,reason:g}),y)return}if(n.initTrackConfig(c,this.observer,f,i,this.audioCodec),r=0,t=n.getFrameDuration(c.samplerate),h&&p){var _=p+t;Math.abs(_-d)>1&&(u.logger.log("AAC: align PTS for overlapping frames by "+Math.round((_-d)/90)),d=_)}for(;i<s;)if(n.isHeader(f,i)&&i+5<s){var m=n.appendFrame(c,f,i,d,r);if(!m)break;i+=m.length,o=m.sample.pts,r++}else i++;h=i<s?f.subarray(i,s):null,this.aacOverFlow=h,this.aacLastPTS=o},e.prototype._parseMPEGPES=function(e){for(var t=e.data,r=t.length,n=0,a=0,o=e.pts;a<r;)if(i.default.isHeader(t,a)){var s=i.default.appendFrame(this._audioTrack,t,a,o,n);if(!s)break;a+=s.length,n++}else a++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();t.default=f},"./src/errors.js":/*!***********************!*\
  !*** ./src/errors.js ***!
  \***********************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},t.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/event-handler.js":/*!******************************!*\
  !*** ./src/event-handler.js ***!
  \******************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./utils/logger */"./src/utils/logger.js"),i=r(/*! ./errors */"./src/errors.js"),a=r(/*! ./events */"./src/events.js"),o={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},s=function(){function e(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.hls=e,this.onEvent=this.onEvent.bind(this),this.handledEvents=t,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(o[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){var r=function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)};try{r.call(this,e,t).call()}catch(t){n.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(a.default.ERROR,{type:i.ErrorTypes.OTHER_ERROR,details:i.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();t.default=s},"./src/events.js":/*!***********************!*\
  !*** ./src/events.js ***!
  \***********************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"};t.default=n},"./src/hls.js":/*!********************!*\
  !*** ./src/hls.js ***!
  \********************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),a=r(/*! ./errors */"./src/errors.js"),o=r(/*! ./loader/playlist-loader */"./src/loader/playlist-loader.js"),s=r(/*! ./loader/fragment-loader */"./src/loader/fragment-loader.js"),u=r(/*! ./loader/key-loader */"./src/loader/key-loader.js"),l=r(/*! ./controller/fragment-tracker */"./src/controller/fragment-tracker.js"),c=r(/*! ./controller/stream-controller */"./src/controller/stream-controller.js"),f=r(/*! ./controller/level-controller */"./src/controller/level-controller.js"),d=r(/*! ./controller/id3-track-controller */"./src/controller/id3-track-controller.js"),h=r(/*! ./is-supported */"./src/is-supported.js"),p=r(/*! ./utils/logger */"./src/utils/logger.js"),v=r(/*! ./config */"./src/config.js"),g=r(/*! ./events */"./src/events.js"),y=r(/*! ./observer */"./src/observer.js"),_=function(e){function t(r){void 0===r&&(r={});var n=e.call(this)||this,i=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in i)a in r||(r[a]=i[a]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');p.enableLogs(r.debug),n.config=r,n._autoLevelCapping=-1;var h=n.abrController=new r.abrController(n),v=new r.bufferController(n),g=new r.capLevelController(n),y=new r.fpsController(n),_=new o.default(n),m=new s.default(n),E=new u.default(n),b=new d.default(n),T=n.levelController=new f.default(n),S=new l.FragmentTracker(n),A=n.streamController=new c.default(n,S),k=[T,A],O=r.audioStreamController;O&&k.push(new O(n,S)),n.networkControllers=k;var w=[_,m,E,h,v,g,y,b,S];if(O=r.audioTrackController){var R=new O(n);n.audioTrackController=R,w.push(R)}if(O=r.subtitleTrackController){var P=new O(n);n.subtitleTrackController=P,w.push(P)}if(O=r.emeController){var L=new O(n);n.emeController=L,w.push(L)}return O=r.subtitleStreamController,O&&w.push(new O(n,S)),O=r.timelineController,O&&w.push(new O(n)),n.coreComponents=w,n}return n(t,e),Object.defineProperty(t,"version",{get:function(){return"0.12.2"},enumerable:!0,configurable:!0}),t.isSupported=function(){return h.isSupported()},Object.defineProperty(t,"Events",{get:function(){return g.default},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorTypes",{get:function(){return a.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorDetails",{get:function(){return a.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DefaultConfig",{get:function(){return t.defaultConfig?t.defaultConfig:v.hlsDefaultConfig},set:function(e){t.defaultConfig=e},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){p.logger.log("destroy"),this.trigger(g.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(e){p.logger.log("attachMedia"),this.media=e,this.trigger(g.default.MEDIA_ATTACHING,{media:e})},t.prototype.detachMedia=function(){p.logger.log("detachMedia"),this.trigger(g.default.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(e){e=i.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),p.logger.log("loadSource:"+e),this.url=e,this.trigger(g.default.MANIFEST_LOADING,{url:e})},t.prototype.startLoad=function(e){void 0===e&&(e=-1),p.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},t.prototype.stopLoad=function(){p.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},t.prototype.swapAudioCodec=function(){p.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){p.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Object.defineProperty(t.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(e){p.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(e){p.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(e){p.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){p.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(e){p.logger.log("set startLevel:"+e);var t=this;-1!==e&&(e=Math.max(e,t.minAutoLevel)),t.levelController.startLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(e){p.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelEnabled",{get:function(){return-1===this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minAutoLevel",{get:function(){for(var e=this,t=e.levels,r=e.config.minAutoBitrate,n=t?t.length:0,i=0;i<n;i++){if((t[i].realBitrate?Math.max(t[i].realBitrate,t[i].bitrate):t[i].bitrate)>r)return i}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxAutoLevel",{get:function(){var e=this,t=e.levels,r=e.autoLevelCapping;return-1===r&&t&&t.length?t.length-1:r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextAutoLevel",{get:function(){var e=this;return Math.min(Math.max(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){var t=this;t.abrController.nextAutoLevel=Math.max(t.minAutoLevel,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTracks",{get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTracks",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTrack",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleDisplay",{get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)},enumerable:!0,configurable:!0}),t}(y.Observer);t.default=_},"./src/is-supported.js":/*!*****************************!*\
  !*** ./src/is-supported.js ***!
  \*****************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";function n(){var e=i.getMediaSource(),t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!n}Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ./utils/mediasource-helper */"./src/utils/mediasource-helper.js");t.isSupported=n},"./src/loader/fragment-loader.js":/*!***************************************!*\
  !*** ./src/loader/fragment-loader.js ***!
  \***************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../errors */"./src/errors.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=function(t){function r(e){var r=t.call(this,e,i.default.FRAG_LOADING)||this;return r.loaders={},r}return n(r,t),r.prototype.destroy=function(){var e=this.loaders;for(var r in e){var n=e[r];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},r.prototype.onFragLoading=function(t){var r=t.frag,n=r.type,i=this.loaders,a=this.hls.config,o=a.fLoader,u=a.loader;r.loaded=0;var l=i[n];l&&(s.logger.warn("abort previous fragment loader for type: "+n),l.abort()),l=i[n]=r.loader=a.fLoader?new o(a):new u(a);var c,f,d;c={url:r.url,frag:r,responseType:"arraybuffer",progressData:!1};var h=r.byteRangeStartOffset,p=r.byteRangeEndOffset;e.isFinite(h)&&e.isFinite(p)&&(c.rangeStart=h,c.rangeEnd=p),f={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},l.load(c,f,d)},r.prototype.loadsuccess=function(e,t,r,n){void 0===n&&(n=null);var a=e.data,o=r.frag;o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(i.default.FRAG_LOADED,{payload:a,frag:o,stats:t,networkDetails:n})},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null);var n=t.frag,a=n.loader;a&&a.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null);var n=t.frag,a=n.loader;a&&a.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},r.prototype.loadprogress=function(e,t,r,n){void 0===n&&(n=null);var a=t.frag;a.loaded=e.loaded,this.hls.trigger(i.default.FRAG_LOAD_PROGRESS,{frag:a,stats:e,networkDetails:n})},r}(a.default);t.default=u}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/loader/fragment.js":/*!********************************!*\
  !*** ./src/loader/fragment.js ***!
  \********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),i=r(/*! ./level-key */"./src/loader/level-key.js"),a=function(){function t(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=(e={},e[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return Object.defineProperty(t,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=n.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRange",{get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endProgramDateTime",{get:function(){if(!e.isFinite(this.programDateTime))return null;var t=e.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),t.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},t.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&(r=new i.default,r.method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r},t}();t.default=a}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/loader/key-loader.js":/*!**********************************!*\
  !*** ./src/loader/key-loader.js ***!
  \**********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../errors */"./src/errors.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=function(e){function t(t){var r=e.call(this,t,i.default.KEY_LOADING)||this;return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return n(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},a.default.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,r=t.type,n=this.loaders[r],a=t.decryptdata,o=a.uri;if(o!==this.decrypturl||null===this.decryptkey){var u=this.hls.config;n&&(s.logger.warn("abort previous key loader for type:"+r),n.abort()),t.loader=this.loaders[r]=new u.loader(u),this.decrypturl=o,this.decryptkey=null;var l=void 0,c=void 0,f=void 0;l={url:o,frag:t,responseType:"arraybuffer"},c={timeout:u.fragLoadingTimeOut,maxRetry:0,retryDelay:u.fragLoadingRetryDelay,maxRetryDelay:u.fragLoadingMaxRetryTimeout},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(l,c,f)}else this.decryptkey&&(a.key=this.decryptkey,this.hls.trigger(i.default.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,r){var n=r.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(i.default.KEY_LOADED,{frag:n})},t.prototype.loaderror=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},t.prototype.loadtimeout=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(a.default);t.default=u},"./src/loader/level-key.js":/*!*********************************!*\
  !*** ./src/loader/level-key.js ***!
  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),i=function(){function e(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=n.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),e}();t.default=i},"./src/loader/level.js":/*!*****************************!*\
  !*** ./src/loader/level.js ***!
  \*****************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return Object.defineProperty(t.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!e.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),t}();t.default=r}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/loader/m3u8-parser.js":/*!***********************************!*\
  !*** ./src/loader/m3u8-parser.js ***!
  \***********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){function n(e,t){for(var r=e[t],n=t-1;n>=0;n--){var i=e[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}function i(t,r){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):r&&r.programDateTime&&(t.programDateTime=r.endProgramDateTime),e.isFinite(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),o=r(/*! ./fragment */"./src/loader/fragment.js"),s=r(/*! ./level */"./src/loader/level.js"),u=r(/*! ./level-key */"./src/loader/level-key.js"),l=r(/*! ../utils/attr-list */"./src/utils/attr-list.js"),c=r(/*! ../utils/logger */"./src/utils/logger.js"),f=r(/*! ../utils/codecs */"./src/utils/codecs.js"),d=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,h=/#EXT-X-MEDIA:(.*)/g,p=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),v=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,g=/\.(mp4|m4s|m4v|m4a)$/i,y=function(){function t(){}return t.findGroup=function(e,t){if(!e)return null;for(var r=null,n=0;n<e.length;n++){var i=e[n];i.id===t&&(r=i)}return r},t.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},t.resolve=function(e,t){return a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var n,i=[];for(d.lastIndex=0;null!=(n=d.exec(e));){var a={},o=a.attrs=new l.default(n[1]);a.url=t.resolve(n[2],r);var s=o.decimalResolution("RESOLUTION");s&&(a.width=s.width,a.height=s.height),a.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),a.name=o.NAME,function(e,t){["video","audio"].forEach(function(r){var n=e.filter(function(e){return f.isCodecType(e,r)});if(n.length){var i=n.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[r+"Codec"]=i.length>0?i[0]:n[0],e=e.filter(function(e){return-1===n.indexOf(e)})}}),t.unknownCodecs=e}([].concat((o.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=t.convertAVC1ToAVCOTI(a.videoCodec)),i.push(a)}return i},t.parseMasterPlaylistMedia=function(e,r,n,i){void 0===i&&(i=[]);var a,o=[],s=0;for(h.lastIndex=0;null!==(a=h.exec(e));){var u={},c=new l.default(a[1]);if(c.TYPE===n){if(u.groupId=c["GROUP-ID"],u.name=c.NAME,u.type=n,u.default="YES"===c.DEFAULT,u.autoselect="YES"===c.AUTOSELECT,u.forced="YES"===c.FORCED,c.URI&&(u.url=t.resolve(c.URI,r)),u.lang=c.LANGUAGE,u.name||(u.name=u.lang),i.length){var f=t.findGroup(i,u.groupId);u.audioCodec=f?f.codec:i[0].codec}u.id=s++,o.push(u)}}return o},t.parseLevelPlaylist=function(t,r,a,f,d){var h,y,_=0,m=0,E=new s.default(r),b=new u.default,T=0,S=null,A=new o.default,k=null;for(p.lastIndex=0;null!==(h=p.exec(t));){var O=h[1];if(O){A.duration=parseFloat(O);var w=(" "+h[2]).slice(1);A.title=w||null,A.tagList.push(w?["INF",O,w]:["INF",O])}else if(h[3]){if(e.isFinite(A.duration)){var R=_++;A.type=f,A.start=m,A.levelkey=b,A.sn=R,A.level=a,A.cc=T,A.urlId=d,A.baseurl=r,A.relurl=(" "+h[3]).slice(1),i(A,S),E.fragments.push(A),S=A,m+=A.duration,A=new o.default}}else if(h[4]){if(A.rawByteRange=(" "+h[4]).slice(1),S){var P=S.byteRangeEndOffset;P&&(A.lastByteRangeEndOffset=P)}}else if(h[5])A.rawProgramDateTime=(" "+h[5]).slice(1),A.tagList.push(["PROGRAM-DATE-TIME",A.rawProgramDateTime]),null===k&&(k=E.fragments.length);else{for(h=h[0].match(v),y=1;y<h.length&&void 0===h[y];y++);var L=(" "+h[y+1]).slice(1),D=(" "+h[y+2]).slice(1);switch(h[y]){case"#":A.tagList.push(D?[L,D]:[L]);break;case"PLAYLIST-TYPE":E.type=L.toUpperCase();break;case"MEDIA-SEQUENCE":_=E.startSN=parseInt(L);break;case"TARGETDURATION":E.targetduration=parseFloat(L);break;case"VERSION":E.version=parseInt(L);break;case"EXTM3U":break;case"ENDLIST":E.live=!1;break;case"DIS":T++,A.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":T=parseInt(L);break;case"KEY":var C=L,I=new l.default(C),M=I.enumeratedString("METHOD"),x=I.URI,N=I.hexadecimalInteger("IV");M&&(b=new u.default,x&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(M)>=0&&(b.method=M,b.baseuri=r,b.reluri=x,b.key=null,b.iv=N));break;case"START":var j=L,F=new l.default(j),U=F.decimalFloatingPoint("TIME-OFFSET");e.isFinite(U)&&(E.startTimeOffset=U);break;case"MAP":var B=new l.default(L);A.relurl=B.URI,A.rawByteRange=B.BYTERANGE,A.baseurl=r,A.level=a,A.type=f,A.sn="initSegment",E.initSegment=A,A=new o.default,A.rawProgramDateTime=E.initSegment.rawProgramDateTime;break;default:c.logger.warn("line parsed but not handled: "+h)}}}return A=S,A&&!A.relurl&&(E.fragments.pop(),m-=A.duration),E.totalduration=m,E.averagetargetduration=m/E.fragments.length,E.endSN=_-1,E.startCC=E.fragments[0]?E.fragments[0].cc:0,E.endCC=T,!E.initSegment&&E.fragments.length&&E.fragments.every(function(e){return g.test(e.relurl)})&&(c.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),A=new o.default,A.relurl=E.fragments[0].relurl,A.baseurl=r,A.level=a,A.type=f,A.sn="initSegment",E.initSegment=A,E.needSidxRanges=!0),k&&n(E.fragments,k),E},t}();t.default=y}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/loader/playlist-loader.js":/*!***************************************!*\
  !*** ./src/loader/playlist-loader.js ***!
  \***************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../errors */"./src/errors.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=r(/*! ../demux/mp4demuxer */"./src/demux/mp4demuxer.js"),l=r(/*! ./m3u8-parser */"./src/loader/m3u8-parser.js"),c=window.performance,f={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},d={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},h=function(t){function r(e){var r=t.call(this,e,i.default.MANIFEST_LOADING,i.default.LEVEL_LOADING,i.default.AUDIO_TRACK_LOADING,i.default.SUBTITLE_TRACK_LOADING)||this;return r.loaders={},r}return n(r,t),Object.defineProperty(r,"ContextType",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(r,"LevelType",{get:function(){return d},enumerable:!0,configurable:!0}),r.canHaveQualityLevels=function(e){return e!==f.AUDIO_TRACK&&e!==f.SUBTITLE_TRACK},r.mapContextToLevelType=function(e){switch(e.type){case f.AUDIO_TRACK:return d.AUDIO;case f.SUBTITLE_TRACK:return d.SUBTITLE;default:return d.MAIN}},r.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r},r.prototype.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,i=r||n,a=new i(t);return e.loader=a,this.loaders[e.type]=a,a},r.prototype.getInternalLoader=function(e){return this.loaders[e.type]},r.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},r.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},r.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},r.prototype.onManifestLoading=function(e){this.load(e.url,{type:f.MANIFEST,level:0,id:null})},r.prototype.onLevelLoading=function(e){this.load(e.url,{type:f.LEVEL,level:e.level,id:e.id})},r.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:f.AUDIO_TRACK,level:null,id:e.id})},r.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:f.SUBTITLE_TRACK,level:null,id:e.id})},r.prototype.load=function(e,t){var r=this.hls.config;s.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var n=this.getInternalLoader(t);if(n){var i=n.context;if(i&&i.url===e)return s.logger.trace("playlist request ongoing"),!1;s.logger.warn("aborting previous loader for type: "+t.type),n.abort()}var a,o,u,l;switch(t.type){case f.MANIFEST:a=r.manifestLoadingMaxRetry,o=r.manifestLoadingTimeOut,u=r.manifestLoadingRetryDelay,l=r.manifestLoadingMaxRetryTimeout;break;case f.LEVEL:a=0,o=r.levelLoadingTimeOut;break;default:a=r.levelLoadingMaxRetry,o=r.levelLoadingTimeOut,u=r.levelLoadingRetryDelay,l=r.levelLoadingMaxRetryTimeout}n=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var c={timeout:o,maxRetry:a,retryDelay:u,maxRetryDelay:l},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return s.logger.debug("Calling internal loader delegate for URL: "+e),n.load(t,c,d),!0},r.prototype.loadsuccess=function(e,t,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,n);this.resetInternalLoader(r.type);var i=e.data;if(t.tload=c.now(),0!==i.indexOf("#EXTM3U"))return void this._handleManifestParsingError(e,r,"no EXTM3U delimiter",n);i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,n):this._handleMasterPlaylist(e,t,r,n)},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},r.prototype._handleMasterPlaylist=function(e,t,n,a){var o=this.hls,u=e.data,c=r.getResponseUrl(e,n),f=l.default.parseMasterPlaylist(u,c);if(!f.length)return void this._handleManifestParsingError(e,n,"no level found in manifest",a);var d=f.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),h=l.default.parseMasterPlaylistMedia(u,c,"AUDIO",d),p=l.default.parseMasterPlaylistMedia(u,c,"SUBTITLES");if(h.length){var v=!1;h.forEach(function(e){e.url||(v=!0)}),!1===v&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(s.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main"}))}o.trigger(i.default.MANIFEST_LOADED,{levels:f,audioTracks:h,subtitles:p,url:c,stats:t,networkDetails:a})},r.prototype._handleTrackOrLevelPlaylist=function(t,n,a,o){var s=this.hls,u=a.id,d=a.level,h=a.type,p=r.getResponseUrl(t,a),v=e.isFinite(u)?u:0,g=e.isFinite(d)?d:v,y=r.mapContextToLevelType(a),_=l.default.parseLevelPlaylist(t.data,p,g,y,v);if(_.tload=n.tload,h===f.MANIFEST){var m={url:p,details:_};s.trigger(i.default.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:p,stats:n,networkDetails:o})}if(n.tparsed=c.now(),_.needSidxRanges){var E=_.initSegment.url;return void this.load(E,{isSidxRequest:!0,type:h,level:d,levelDetails:_,id:u,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}a.levelDetails=_,this._handlePlaylistLoaded(t,n,a,o)},r.prototype._handleSidxRequest=function(e,t){var r=u.default.parseSegmentIndex(new Uint8Array(e.data));if(r){var n=r.references,i=t.levelDetails;n.forEach(function(e,t){var r=e.info,n=i.fragments[t];0===n.byteRange.length&&(n.rawByteRange=String(1+r.end-r.start)+"@"+String(r.start))}),i.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"}},r.prototype._handleManifestParsingError=function(e,t,r,n){this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:n})},r.prototype._handleNetworkError=function(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=null),s.logger.info("A network error occured while loading a "+e.type+"-type playlist");var a,u,l=this.getInternalLoader(e);switch(e.type){case f.MANIFEST:a=r?o.ErrorDetails.MANIFEST_LOAD_TIMEOUT:o.ErrorDetails.MANIFEST_LOAD_ERROR,u=!0;break;case f.LEVEL:a=r?o.ErrorDetails.LEVEL_LOAD_TIMEOUT:o.ErrorDetails.LEVEL_LOAD_ERROR,u=!1;break;case f.AUDIO_TRACK:a=r?o.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,u=!1;break;default:u=!1}l&&(l.abort(),this.resetInternalLoader(e.type));var c={type:o.ErrorTypes.NETWORK_ERROR,details:a,fatal:u,url:l.url,loader:l,context:e,networkDetails:t};n&&(c.response=n),this.hls.trigger(i.default.ERROR,c)},r.prototype._handlePlaylistLoaded=function(e,t,n,a){var o=n.type,s=n.level,u=n.id,l=n.levelDetails;if(!l.targetduration)return void this._handleManifestParsingError(e,n,"invalid target duration",a);if(r.canHaveQualityLevels(n.type))this.hls.trigger(i.default.LEVEL_LOADED,{details:l,level:s||0,id:u||0,stats:t,networkDetails:a});else switch(o){case f.AUDIO_TRACK:this.hls.trigger(i.default.AUDIO_TRACK_LOADED,{details:l,id:u,stats:t,networkDetails:a});break;case f.SUBTITLE_TRACK:this.hls.trigger(i.default.SUBTITLE_TRACK_LOADED,{details:l,id:u,stats:t,networkDetails:a})}},r}(a.default);t.default=h}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/observer.js":/*!*************************!*\
  !*** ./src/observer.js ***!
  \*************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(t))},t}(i.EventEmitter);t.Observer=a},"./src/polyfills/number.js":/*!*********************************!*\
  !*** ./src/polyfills/number.js ***!
  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),i=n.getSelfScope(),a=i.Number;t.Number=a,a.isFinite=a.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/remux/aac-helper.js":/*!*********************************!*\
  !*** ./src/remux/aac-helper.js ***!
  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.default=n},"./src/remux/mp4-generator.js":/*!************************************!*\
  !*** ./src/remux/mp4-generator.js ***!
  \************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,u,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,a=i;i--;)n+=r[i].byteLength;for(t=new Uint8Array(n),t[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<a;i++)t.set(r[i],n),n+=r[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),a=Math.floor(r%(n+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),a=Math.floor(r%(n+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)},e.sdtp=function(t){var r,n,i=t.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,i,a=[],o=[];for(r=0;r<t.sps.length;r++)n=t.sps[r],i=n.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)n=t.pps[r],i=n.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),u=t.width,l=t.height,c=t.pixelRatio[0],f=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,f>>24,f>>16&255,f>>8&255,255&f])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,a=t.width,o=t.height,s=Math.floor(i/(n+1)),u=Math.floor(i%(n+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,o>>8&255,255&o,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),a=t.id,o=Math.floor(r/(n+1)),s=Math.floor(r%(n+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,i,a,o,s,u,l=t.samples||[],c=l.length,f=12+16*c,d=new Uint8Array(f);for(r+=8+f,d.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)i=l[n],a=i.duration,o=i.size,s=i.flags,u=i.cts,d.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);return e.box(e.types.trun,d)},e.initSegment=function(t){e.types||e.init();var r,n=e.moov(t);return r=new Uint8Array(e.FTYP.byteLength+n.byteLength),r.set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}();t.default=i},"./src/remux/mp4-remuxer.js":/*!**********************************!*\
  !*** ./src/remux/mp4-remuxer.js ***!
  \**********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./aac-helper */"./src/remux/aac-helper.js"),i=r(/*! ./mp4-generator */"./src/remux/mp4-generator.js"),a=r(/*! ../events */"./src/events.js"),o=r(/*! ../errors */"./src/errors.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=function(){function e(e,t,r,n){this.observer=e,this.config=t,this.typeSupported=r;var i=navigator.userAgent;this.isSafari=n&&n.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,r,n,i,o,u){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var l=e.samples.length,c=t.samples.length,f=i,d=i;if(l&&c){var h=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;f+=Math.max(0,h),d+=Math.max(0,-h)}if(l){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var p=this.remuxAudio(e,f,o,u);if(c){var v=void 0;p&&(v=p.endPTS-p.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,d,o,v,u)}}else if(c){var g=this.remuxVideo(t,d,o,0,u);g&&e.codec&&this.remuxEmptyAudio(e,f,o,g)}}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(a.default.FRAG_PARSED)},e.prototype.generateIS=function(e,t,r){var n,u,l=this.observer,c=e.samples,f=t.samples,d=this.typeSupported,h="audio/mp4",p={},v={tracks:p},g=void 0===this._initPTS;if(g&&(n=u=1/0),e.config&&c.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(d.mpeg?(h="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),p.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&d.mpeg?new Uint8Array:i.default.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(n=u=c[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&f.length){var y=t.inputTimeScale;t.timescale=y,p.video={container:"video/mp4",codec:t.codec,initSegment:i.default.initSegment([t]),metadata:{width:t.width,height:t.height}},g&&(n=Math.min(n,f[0].pts-y*r),u=Math.min(u,f[0].dts-y*r),this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(p).length?(l.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,v),this.ISGenerated=!0,g&&(this._initPTS=n,this._initDTS=u)):l.trigger(a.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,r,n,u){var l,c,f,d,h,p,v,g=8,y=e.timescale,_=e.samples,m=[],E=_.length,b=this._PTSNormalize,T=this._initPTS,S=this.nextAvcDts,A=this.isSafari;if(0!==E){A&&(r|=_.length&&S&&(u&&Math.abs(t-S/y)<.1||Math.abs(_[0].pts-S-T)<y/5)),r||(S=t*y),_.forEach(function(e){e.pts=b(e.pts-T,S),e.dts=b(e.dts-T,S)}),_.sort(function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id});var k=_.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(k<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(k/90)+" ms to overcome this issue");for(var O=0;O<_.length;O++)_[O].dts+=k}var w=_[0];h=Math.max(w.dts,0),d=Math.max(w.pts,0);var R=Math.round((h-S)/90);r&&R&&(R>1?s.logger.log("AVC:"+R+" ms hole between fragments detected,filling it"):R<-1&&s.logger.log("AVC:"+-R+" ms overlapping between fragments detected"),h=S,_[0].dts=h,d=Math.max(d-R,S),_[0].pts=d,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(d/90)+"/"+Math.round(h/90)+",delta:"+R+" ms")),w=_[_.length-1],v=Math.max(w.dts,0),p=Math.max(w.pts,0,v),A&&(l=Math.round((v-h)/(_.length-1)));for(var P=0,L=0,O=0;O<E;O++){for(var D=_[O],C=D.units,I=C.length,M=0,x=0;x<I;x++)M+=C[x].data.length;L+=M,P+=I,D.length=M,D.dts=A?h+O*l:Math.max(D.dts,h),D.pts=Math.max(D.pts,D.dts)}var N=L+4*P+8;try{c=new Uint8Array(N)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var j=new DataView(c.buffer);j.setUint32(0,N),c.set(i.default.types.mdat,4);for(var O=0;O<E;O++){for(var F=_[O],U=F.units,B=0,G=void 0,x=0,I=U.length;x<I;x++){var H=U[x],V=H.data,K=H.data.byteLength;j.setUint32(g,K),g+=4,c.set(V,g),g+=K,B+=4+K}if(A)G=Math.max(0,l*Math.round((F.pts-F.dts)/l));else{if(O<E-1)l=_[O+1].dts-F.dts;else{var Y=this.config,W=F.dts-_[O>0?O-1:O].dts;if(Y.stretchShortVideoTrack){var q=Y.maxBufferHole,X=Math.floor(q*y),z=(n?d+n*y:this.nextAudioPts)-F.pts;z>X?(l=z-W,l<0&&(l=W),s.logger.log("It is approximately "+z/90+" ms to the next segment; using duration "+l/90+" ms for the last video frame.")):l=W}else l=W}G=Math.round(F.pts-F.dts)}m.push({size:B,duration:l,cts:G,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:F.key?2:1,isNonSync:F.key?0:1}})}this.nextAvcDts=v+l;var J=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,m.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var Q=m[0].flags;Q.dependsOn=2,Q.isNonSync=0}e.samples=m,f=i.default.moof(e.sequenceNumber++,h,e),e.samples=[];var $={data1:f,data2:c,startPTS:d/y,endPTS:(p+l)/y,startDTS:h/y,endDTS:this.nextAvcDts/y,type:"video",hasAudio:!1,hasVideo:!0,nb:m.length,dropped:J};return this.observer.trigger(a.default.FRAG_PARSING_DATA,$),$}},e.prototype.remuxAudio=function(e,t,r,u){var l,c,f,d,h,p,v,g=e.inputTimeScale,y=e.timescale,_=g/y,m=e.isAAC?1024:1152,E=m*_,b=this._PTSNormalize,T=this._initPTS,S=!e.isAAC&&this.typeSupported.mpeg,A=e.samples,k=[],O=this.nextAudioPts;if(r|=A.length&&O&&(u&&Math.abs(t-O/g)<.1||Math.abs(A[0].pts-O-T)<20*E),A.forEach(function(e){e.pts=e.dts=b(e.pts-T,t*g)}),A=A.filter(function(e){return e.pts>=0}),0!==A.length){if(r||(O=u?t*g:A[0].pts),e.isAAC)for(var w=this.config.maxAudioFramesDrift,R=0,P=O;R<A.length;){var L,D=A[R],C=D.pts;L=C-P;var I=Math.abs(1e3*L/g);if(L<=-w*E)s.logger.warn("Dropping 1 audio frame @ "+(P/g).toFixed(3)+"s due to "+Math.round(I)+" ms overlap."),A.splice(R,1),e.len-=D.unit.length;else if(L>=w*E&&I<1e4&&P){var M=Math.round(L/E);s.logger.warn("Injecting "+M+" audio frame @ "+(P/g).toFixed(3)+"s due to "+Math.round(1e3*L/g)+" ms gap.");for(var x=0;x<M;x++){var N=Math.max(P,0);f=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),f||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),f=D.unit.subarray()),A.splice(R,0,{unit:f,pts:N,dts:N}),e.len+=f.length,P+=E,R++}D.pts=D.dts=P,P+=E,R++}else Math.abs(L),D.pts=D.dts=P,P+=E,R++}for(var x=0,j=A.length;x<j;x++){var F=A[x],U=F.unit,C=F.pts;if(void 0!==v)c.duration=Math.round((C-v)/_);else{var B=Math.round(1e3*(C-O)/g),G=0;if(r&&e.isAAC&&B){if(B>0&&B<1e4)G=Math.round((C-O)/E),s.logger.log(B+" ms hole between AAC samples detected,filling it"),G>0&&(f=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),f||(f=U.subarray()),e.len+=G*f.length);else if(B<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(O/g).toFixed(3)+"s/"+(C/g).toFixed(3)+"s/"+-B+"ms"),e.len-=U.byteLength;continue}C=O}if(p=C,!(e.len>0))return;var H=S?e.len:e.len+8;l=S?0:8;try{d=new Uint8Array(H)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:H,reason:"fail allocating audio mdat "+H})}if(!S){new DataView(d.buffer).setUint32(0,H),d.set(i.default.types.mdat,4)}for(var R=0;R<G;R++)f=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),f||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),f=U.subarray()),d.set(f,l),l+=f.byteLength,c={size:f.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(c)}d.set(U,l);var V=U.byteLength;l+=V,c={size:V,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(c),v=C}var K=0,Y=k.length;if(Y>=2&&(K=k[Y-2].duration,c.duration=K),Y){this.nextAudioPts=O=v+_*K,e.len=0,e.samples=k,h=S?new Uint8Array:i.default.moof(e.sequenceNumber++,p/_,e),e.samples=[];var W=p/g,q=O/g,X={data1:h,data2:d,startPTS:W,endPTS:q,startDTS:W,endDTS:q,type:"audio",hasAudio:!0,hasVideo:!1,nb:Y};return this.observer.trigger(a.default.FRAG_PARSING_DATA,X),X}return null}},e.prototype.remuxEmptyAudio=function(e,t,r,i){var a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,u=a/o,l=this.nextAudioPts,c=(void 0!==l?l:i.startDTS*a)+this._initDTS,f=i.endDTS*a+this._initDTS,d=1024*u,h=Math.ceil((f-c)/d),p=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),!p)return void s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var v=[],g=0;g<h;g++){var y=c+g*d;v.push({unit:p,pts:y,dts:y}),e.len+=p.length}e.samples=v,this.remuxAudio(e,t,r)},e.prototype.remuxID3=function(e){var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS,o=this._initDTS;if(r){for(var s=0;s<r;s++)t=e.samples[s],t.pts=(t.pts-i)/n,t.dts=(t.dts-o)/n;this.observer.trigger(a.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.prototype.remuxText=function(e){e.samples.sort(function(e,t){return e.pts-t.pts});var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS;if(r){for(var o=0;o<r;o++)t=e.samples[o],t.pts=(t.pts-i)/n;this.observer.trigger(a.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e.prototype._PTSNormalize=function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e},e}();t.default=u},"./src/remux/passthrough-remuxer.js":/*!******************************************!*\
  !*** ./src/remux/passthrough-remuxer.js ***!
  \******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../events */"./src/events.js"),i=function(){function e(e){this.observer=e}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,r,i,a,o,s,u){var l=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),l.trigger(n.default.FRAG_PARSING_DATA,{data1:u,startPTS:a,startDTS:a,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(n.default.FRAG_PARSED)},e}();t.default=i},"./src/task-loop.js":/*!**************************!*\
  !*** ./src/task-loop.js ***!
  \**************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ./event-handler */"./src/event-handler.js"),a=function(e){function t(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e.apply(this,[t].concat(r))||this;return i._tickInterval=null,i._tickTimer=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}return n(t,e),t.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.prototype.hasInterval=function(){return!!this._tickInterval},t.prototype.hasNextTick=function(){return!!this._tickTimer},t.prototype.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)},t.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.prototype.tick=function(){1===++this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.prototype.doTick=function(){},t}(i.default);t.default=a},"./src/utils/attr-list.js":/*!********************************!*\
  !*** ./src/utils/attr-list.js ***!
  \********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=/^(\d+)x(\d+)$/,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,i=function(){function t(e){"string"==typeof e&&(e=t.parseAttrList(e));for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r])}return t.prototype.decimalInteger=function(t){var r=parseInt(this[t],10);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var r=parseInt(this[t],16);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.prototype.enumeratedString=function(e){return this[e]},t.prototype.decimalResolution=function(e){var t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},t.parseAttrList=function(e){var t,r={};for(n.lastIndex=0;null!==(t=n.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r},t}();t.default=i}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/utils/binary-search.js":/*!************************************!*\
  !*** ./src/utils/binary-search.js ***!
  \************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={search:function(e,t){for(var r=0,n=e.length-1,i=null,a=null;r<=n;){i=(r+n)/2|0,a=e[i];var o=t(a);if(o>0)r=i+1;else{if(!(o<0))return a;n=i-1}}return null}};t.default=n},"./src/utils/buffer-helper.js":/*!************************************!*\
  !*** ./src/utils/buffer-helper.js ***!
  \************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var n=e.buffered,i=[],a=void 0;for(a=0;a<n.length;a++)i.push({start:n.start(a),end:n.end(a)});return this.bufferedInfo(i,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){var n,i,a,o,s,u=[];for(e.sort(function(e,t){var r=e.start-t.start;return r||t.end-e.end}),s=0;s<e.length;s++){var l=u.length;if(l){var c=u[l-1].end;e[s].start-c<r?e[s].end>c&&(u[l-1].end=e[s].end):u.push(e[s])}else u.push(e[s])}for(s=0,n=0,i=a=t;s<u.length;s++){var f=u[s].start,d=u[s].end;if(t+r>=f&&t<d)i=f,a=d,n=a-t;else if(t+r<f){o=f;break}}return{len:n,start:i,end:a,nextStart:o}},e}();t.BufferHelper=n},"./src/utils/cea-608-parser.js":/*!*************************************!*\
  !*** ./src/utils/cea-608-parser.js ***!
  \*************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)},a=15,o=100,s={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},u={17:2,18:4,21:6,22:8,23:10,19:13,20:15},l={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},f=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],d={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e];this.verboseLevel}},h=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},p=function(){function e(e,t,r,n,i){this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),v=function(){function e(e,t,r,n,i,a){this.uchar=e||" ",this.penState=new p(t,r,n,i,a)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),g=function(){function e(){this.chars=[];for(var e=0;e<o;e++)this.chars.push(new v);this.pos=0,this.currPenState=new p}return e.prototype.equals=function(e){for(var t=!0,r=0;r<o;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<o;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<o;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(d.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>o&&(d.log("ERROR","Too large cursor position "+this.pos),this.pos=o)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=i(e);if(this.pos>=o)return void d.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)},e.prototype.clearFromPos=function(e){var t;for(t=e;t<o;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,r=0;r<o;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),y=function(){function e(){this.rows=[];for(var e=0;e<a;e++)this.rows.push(new g);this.currRow=a-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<a;e++)this.rows[e].clear();this.currRow=a-1},e.prototype.equals=function(e){for(var t=!0,r=0;r<a;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<a;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<a;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){d.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){d.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<a;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var o=i.rows[n].cueStartTime;if(o&&o<d.time)for(var r=0;r<this.nrRollUpRows;r++)this.rows[t-this.nrRollUpRows+r+1].copy(i.rows[n+r])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,l=Math.max(u-1,0);s.setCursor(e.indent),e.color=s.chars[l].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(e){d.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null===this.nrRollUpRows)return void d.log("DEBUG","roll_up but nrRollUpRows not set yet");d.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),d.log("INFO","Rolling up")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<a;i++){var o=this.rows[i].getTextString();o&&(n=i+1,e?t.push("Row "+n+": '"+o+"'"):t.push(o.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},e.prototype.getTextAndFormat=function(){return this.rows},e}(),_=function(){function e(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new y,this.nonDisplayedMemory=new y,this.lastOutputScreen=new y,this.currRollUpRow=this.displayedMemory.rows[a-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[a-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,d.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";d.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(d.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){d.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){d.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){d.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){d.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){d.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){d.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){d.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){d.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){d.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){d.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){d.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(d.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,d.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){d.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[r]}d.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=d.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),m=function(){function e(e,t,r){this.field=e||1,this.outputs=[t,r],this.channels=[new _(1,t),new _(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var r,n,i,a=!1;this.lastTime=e,d.setTime(e);for(var o=0;o<t.length;o+=2)if(n=127&t[o],i=127&t[o+1],0!==n||0!==i){if(d.log("DATA","["+h([t[o],t[o+1]])+"] -> ("+h([n,i])+")"),r=this.parseCmd(n,i),r||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(a=this.parseChars(n,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else d.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,d.log("WARNING","Couldn't parse cleaned data "+h([n,i])+" orig: "+h([t[o],t[o+1]])))}else this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var r=null,n=(20===e||28===e)&&t>=32&&t<=47,i=(23===e||31===e)&&t>=33&&t<=35;if(!n&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,d.log("DEBUG","Repeated command ("+h([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var a=this.channels[r-1];return 20===e||28===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.parseMidrow=function(e,t){var r=null;if((17===e||25===e)&&t>=32&&t<=47){if((r=17===e?1:2)!==this.currChNr)return d.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[r-1].ccMIDROW(t),d.log("DEBUG","MIDROW ("+h([e,t])+")"),!0}return!1},e.prototype.parsePAC=function(e,t){var r=null,n=null,i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,a=(16===e||24===e)&&t>=64&&t<=95;if(!i&&!a)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,n=t>=64&&t<=95?1===r?s[e]:l[e]:1===r?u[e]:c[e];var o=this.interpretPAC(n,t);return this.channels[r-1].setPAC(o),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.interpretPAC=function(e,t){var r=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},e.prototype.parseChars=function(e,t){var r=null,n=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),a>=17&&a<=19){var o=t;o=17===a?t+80:18===a?t+112:t+144,d.log("INFO","Special char '"+i(o)+"' in channel "+r),n=[o]}else e>=32&&e<=127&&(n=0===t?[e]:[e,t]);if(n){var s=h(n);d.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n},e.prototype.parseBackgroundAttributes=function(e,t){var r,n,i,a,o=(16===e||24===e)&&t>=32&&t<=47,s=(23===e||31===e)&&t>=45&&t<=47;return!(!o&&!s)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=f[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),i=e<24?1:2,a=this.channels[i-1],a.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}();t.default=m},"./src/utils/codecs.js":/*!*****************************!*\
  !*** ./src/utils/codecs.js ***!
  \*****************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";function n(e,t){var r=a[t];return!!r&&!0===r[e.slice(0,4)]}function i(e,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}Object.defineProperty(t,"__esModule",{value:!0});var a={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};t.isCodecType=n,t.isCodecSupportedInMp4=i},"./src/utils/cues.js":/*!***************************!*\
  !*** ./src/utils/cues.js ***!
  \***************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";function n(e,t,r,n){for(var a,o,s,u,l,c=window.VTTCue||window.TextTrackCue,f=0;f<n.rows.length;f++)if(a=n.rows[f],s=!0,u=0,l="",!a.isEmpty()){for(var d=0;d<a.chars.length;d++)a.chars[d].uchar.match(/\s/)&&s?u++:(l+=a.chars[d].uchar,s=!1);a.cueStartTime=t,t===r&&(r+=1e-4),o=new c(t,r,i.fixLineBreaks(l.trim())),u>=16?u--:u++,navigator.userAgent.match(/Firefox\//)?o.line=f+1:o.line=f>7?f-2:f+1,o.align="left",o.position=Math.max(0,Math.min(100,u/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(o)}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(/*! ./vttparser */"./src/utils/vttparser.js");t.newCue=n},"./src/utils/discontinuities.js":/*!**************************************!*\
  !*** ./src/utils/discontinuities.js ***!
  \**************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){function n(e,t){for(var r=null,n=0;n<e.length;n+=1){var i=e[n];if(i&&i.cc===t){r=i;break}}return r}function i(e,t){return f.default.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}function a(e,t,r){var n=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(n=!0),n}function o(e,t){var r=e.fragments,i=t.fragments;if(!i.length||!r.length)return void d.logger.log("No fragments to align");var a=n(r,i[0].cc);return!a||a&&!a.startPTS?void d.logger.log("No frag in previous level to align on"):a}function s(e,t){t.fragments.forEach(function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}),t.PTSKnown=!0}function u(e,t,r){l(e,r,t),!r.PTSKnown&&t&&c(r,t.details)}function l(e,t,r){if(a(e,r,t)){var n=o(r.details,t);n&&(d.logger.log("Adjusting PTS using last level due to CC increase within current level"),s(n.start,t))}}function c(t,r){if(r&&r.fragments.length){if(!t.hasProgramDateTime||!r.hasProgramDateTime)return;var n=r.fragments[0].programDateTime,i=t.fragments[0].programDateTime,a=(i-n)/1e3+r.fragments[0].start;e.isFinite(a)&&(d.logger.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),s(a,t))}}Object.defineProperty(t,"__esModule",{value:!0});var f=r(/*! ./binary-search */"./src/utils/binary-search.js"),d=r(/*! ../utils/logger */"./src/utils/logger.js");t.findFirstFragWithCC=n,t.findFragWithCC=i,t.shouldAlignOnDiscontinuities=a,t.findDiscontinuousReferenceFrag=o,t.adjustPts=s,t.alignStream=u,t.alignDiscontinuities=l,t.alignPDT=c}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/utils/ewma-bandwidth-estimator.js":/*!***********************************************!*\
  !*** ./src/utils/ewma-bandwidth-estimator.js ***!
  \***********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../utils/ewma */"./src/utils/ewma.js"),i=function(){function e(e,t,r,i){this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new n.default(t),this.fast_=new n.default(r)}return e.prototype.sample=function(e,t){e=Math.max(e,this.minDelayMs_);var r=8e3*t/e,n=e/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}();t.default=i},"./src/utils/ewma.js":/*!***************************!*\
  !*** ./src/utils/ewma.js ***!
  \***************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();t.default=n},"./src/utils/get-self-scope.js":/*!*************************************!*\
  !*** ./src/utils/get-self-scope.js ***!
  \*************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";function n(){return"undefined"==typeof window?self:window}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelfScope=n},"./src/utils/logger.js":/*!*****************************!*\
  !*** ./src/utils/logger.js ***!
  \*****************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";function n(){}function i(e,t){return t="["+e+"] > "+t}function a(e){var t=c.console[e];return t?function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r[0]&&(r[0]=i(e,r[0])),t.apply(c.console,r)}:n}function o(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];t.forEach(function(t){l[t]=e[t]?e[t].bind(e):a(t)})}Object.defineProperty(t,"__esModule",{value:!0});var s=r(/*! ./get-self-scope */"./src/utils/get-self-scope.js"),u={trace:n,debug:n,log:n,warn:n,info:n,error:n},l=u,c=s.getSelfScope();t.enableLogs=function(e){if(!0===e||"object"==typeof e){o(e,"debug","log","info","warn","error");try{l.log()}catch(e){l=u}}else l=u},t.logger=l},"./src/utils/mediakeys-helper.js":/*!***************************************!*\
  !*** ./src/utils/mediakeys-helper.js ***!
  \***************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return"undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}();t.requestMediaKeySystemAccess=n},"./src/utils/mediasource-helper.js":/*!*****************************************!*\
  !*** ./src/utils/mediasource-helper.js ***!
  \*****************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";function n(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaSource=n},"./src/utils/output-filter.js":/*!************************************!*\
  !*** ./src/utils/output-filter.js ***!
  \************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e}();t.default=n},"./src/utils/texttrack-utils.js":/*!**************************************!*\
  !*** ./src/utils/texttrack-utils.js ***!
  \**************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";function n(e,t){var r=null;try{r=new window.Event("addtrack")}catch(e){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function i(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddTrackEvent=n,t.clearCurrentCues=i},"./src/utils/time-ranges.js":/*!**********************************!*\
  !*** ./src/utils/time-ranges.js ***!
  \**********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}};t.default=n},"./src/utils/vttcue.js":/*!*****************************!*\
  !*** ./src/utils/vttcue.js ***!
  \*****************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){return"string"==typeof e&&(!!a[e.toLowerCase()]&&e.toLowerCase())}function t(e){return"string"==typeof e&&(!!o[e.toLowerCase()]&&e.toLowerCase())}function r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function n(n,a,o){var s=this,u=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var c="",f=!1,d=n,h=a,p=o,v=null,g="",y=!0,_="auto",m="start",E=50,b="middle",T=50,S="middle";if(Object.defineProperty(s,"id",r({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",r({},l,{get:function(){return f},set:function(e){f=!!e}})),Object.defineProperty(s,"startTime",r({},l,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",r({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",r({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",r({},l,{get:function(){return v},set:function(e){v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",r({},l,{get:function(){return g},set:function(t){var r=e(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");g=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",r({},l,{get:function(){return y},set:function(e){y=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",r({},l,{get:function(){return _},set:function(e){if("number"!=typeof e&&e!==i)throw new SyntaxError("An invalid number or illegal string was specified.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",r({},l,{get:function(){return m},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");m=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",r({},l,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",r({},l,{get:function(){return b},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");b=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",r({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",r({},l,{get:function(){return S},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");S=r,this.hasBeenReset=!0}})),s.displayState=void 0,u)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var i="auto",a={"":!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},n}()},"./src/utils/vttparser.js":/*!********************************!*\
  !*** ./src/utils/vttparser.js ***!
  \********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";function n(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new c,this.regionList=[]}function i(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function a(){this.values=Object.create(null)}function o(e,t,r,n){var i=n?e.split(n):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(r);if(2===o.length){var s=o[0],u=o[1];t(s,u)}}}function s(e,t,r){function n(){var t=i(e);if(null===t)throw new Error("Malformed timestamp: "+u);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}var u=e;if(s(),t.startTime=n(),s(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+u);e=e.substr(3),s(),t.endTime=n(),s(),function(e,t){var n=new a;o(e,function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];n.integer(e,o),n.percent(e,o)&&n.set("snapToLines",!1),n.alt(e,o,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start",d,"end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start",d,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",d,"end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===f.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",d);var s=n.get("position","auto");"auto"===s&&50===f.position&&(s="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=s}(e,t)}function u(e){return e.replace(/<br(?: \/)?>/gi,"\n")}Object.defineProperty(t,"__esModule",{value:!0});var l=r(/*! ./vttcue */"./src/utils/vttcue.js"),c=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var f=new l.default(0,0,0),d="middle"===f.align?"middle":"center";t.fixLineBreaks=u,n.prototype={parse:function(e){function t(){var e=r.buffer,t=0;for(e=u(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,r.buffer=e.substr(t),n}var r=this;e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));try{var n=void 0;if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;n=t();var i=n.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");r.state="HEADER"}for(var a=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(a?a=!1:n=t(),r.state){case"HEADER":/:/.test(n)?function(e){o(e,function(e,t){},/:/)}(n):n||(r.state="ID");continue;case"NOTE":n||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){r.state="NOTE";break}if(!n)continue;if(r.cue=new l.default(0,0,""),r.state="CUE",-1===n.indexOf("--\x3e")){r.cue.id=n;continue}case"CUE":try{s(n,r.cue,r.regionList)}catch(e){r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var c=-1!==n.indexOf("--\x3e");if(!n||c&&(a=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=n;continue;case"BADCUE":n||(r.state="ID");continue}}}catch(e){"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return e.onflush&&e.onflush(),this}},t.default=n},"./src/utils/webvtt-parser.js":/*!************************************!*\
  !*** ./src/utils/webvtt-parser.js ***!
  \************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./vttparser */"./src/utils/vttparser.js"),i=r(/*! ../demux/id3 */"./src/demux/id3.js"),a=function(e,t,r){return e.substr(r||0,t.length)===t},o=function(t){var r=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),a=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;return e.isFinite(r)&&e.isFinite(n)&&e.isFinite(i)&&e.isFinite(a)?(r+=1e3*n,r+=6e4*i,r+=36e5*a):-1},s=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},u=function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;i&&i.new;)e.ccOffset+=n.start-i.start,n.new=!1,n=i,i=e[n.prevCC];e.presentationOffset=r},l={parse:function(e,t,r,l,c,f){var d,h=/\r\n|\n\r|\n|\r/g,p=i.utf8ArrayToStr(new Uint8Array(e)).trim().replace(h,"\n").split("\n"),v="00:00.000",g=0,y=0,_=0,m=[],E=!0,b=new n.default;b.oncue=function(e){var t=r[l],n=r.ccOffset;t&&t.new&&(void 0!==y?n=r.ccOffset=t.start:u(r,l,_)),_&&(n=_-r.presentationOffset),e.startTime+=n-y,e.endTime+=n-y,e.id=s(e.startTime.toString())+s(e.endTime.toString())+s(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&m.push(e)},b.onparsingerror=function(e){d=e},b.onflush=function(){if(d&&f)return void f(d);c(m)},p.forEach(function(e){if(E){if(a(e,"X-TIMESTAMP-MAP=")){E=!1,e.substr(16).split(",").forEach(function(e){a(e,"LOCAL:")?v=e.substr(6):a(e,"MPEGTS:")&&(g=parseInt(e.substr(7)))});try{t+(9e4*r[l].start||0)<0&&(t+=8589934592),g-=t,y=o(v)/1e3,_=g/9e4,-1===y&&(d=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){d=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(E=!1)}b.parse(e+"\n")}),b.flush()}};t.default=l}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/utils/xhr-loader.js":/*!*********************************!*\
  !*** ./src/utils/xhr-loader.js ***!
  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../utils/logger */"./src/utils/logger.js"),i=window.performance,a=window.XMLHttpRequest,o=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:i.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new a;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(r){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,a=this.stats,o=this.context,s=this.config;if(!a.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===a.tfirst&&(a.tfirst=Math.max(i.now(),a.trequest)),4===r){var u=t.status;if(u>=200&&u<300){a.tload=Math.max(a.tfirst,i.now());var l=void 0,c=void 0;"arraybuffer"===o.responseType?(l=t.response,c=l.byteLength):(l=t.responseText,c=l.length),a.loaded=a.total=c;var f={url:t.responseURL,data:l};this.callbacks.onSuccess(f,a,o,t)}else a.retry>=s.maxRetry||u>=400&&u<499?(n.logger.error(u+" while loading "+o.url),this.callbacks.onError({code:u,text:t.statusText},o,t)):(n.logger.warn(u+" while loading "+o.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),a.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)},e.prototype.loadtimeout=function(){n.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)},e}();t.default=o}}).default})},function(e,t,r){"use strict"},function(e,t,r){!function(t,n){e.exports=n(r(11))}(0,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAME=t.VERSION=void 0;var n=r(0),i=r(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=a.default,t.VERSION="0.10.0",t.NAME="@playkit-js/playkit-js-kanalytics",(0,n.registerPlugin)("kanalytics",a.default)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=r(3),c=r(4),f=n(c),d=r(5),h=n(d),p=function(e){function t(e,r,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n));return o._lastSeekEvent=0,o._hasSeeked=!1,o._ended=!1,o._ks="",o._timePercentEvent={},o._widgetLoadedEventSent=!1,o._registerListeners(),o}return o(t,e),s(t,null,[{key:"isValid",value:function(){return!0}}]),s(t,[{key:"reset",value:function(){this._hasSeeked=!1,this._ended=!1,this._ks="",this._timePercentEvent={}}},{key:"destroy",value:function(){this.eventManager.destroy()}},{key:"_registerListeners",value:function(){var e=this.player.Event;this.eventManager.listen(this.player,e.SOURCE_SELECTED,this._onSourceSelected.bind(this)),this.eventManager.listen(this.player,e.FIRST_PLAY,this._sendAnalytics.bind(this,f.default.PLAY)),this.eventManager.listen(this.player,e.PLAY,this._onPlay.bind(this)),this.eventManager.listen(this.player,e.ENDED,this._onEnded.bind(this)),this.eventManager.listen(this.player,e.SEEKED,this._sendSeekAnalytic.bind(this)),this.eventManager.listen(this.player,e.TIME_UPDATE,this._sendTimePercentAnalytic.bind(this)),this.eventManager.listen(this.player,e.PLAYER_STATE_CHANGED,this._onPlayerStateChanged.bind(this))}},{key:"_onSourceSelected",value:function(){var e=this;this._widgetLoadedEventSent||(this._sendAnalytics(f.default.WIDGET_LOADED),this._widgetLoadedEventSent=!0),this.player.ready().then(function(){e._sendAnalytics(f.default.MEDIA_LOADED)})}},{key:"_onPlay",value:function(){this._ended&&(this._ended=!1,this._sendAnalytics(f.default.REPLAY))}},{key:"_onEnded",value:function(){this._ended=!0}},{key:"_onPlayerStateChanged",value:function(e){e.payload.newState.type===this.player.State.BUFFERING&&this._sendAnalytics(f.default.BUFFER_START),e.payload.oldState.type===this.player.State.BUFFERING&&this._sendAnalytics(f.default.BUFFER_END)}},{key:"_sendSeekAnalytic",value:function(){var e=(new Date).getTime();this._lastSeekEvent+2e3<e&&("Live"!==this.player.config.type||this.player.config.dvr)&&(this._sendAnalytics(f.default.SEEK),this._hasSeeked=!0),this._lastSeekEvent=e}},{key:"_sendTimePercentAnalytic",value:function(){if("Live"!==this.player.config.type){var e=this.player.currentTime/this.player.duration;!this._timePercentEvent.PLAY_REACHED_25&&e>=.25&&(this._timePercentEvent.PLAY_REACHED_25=!0,this._sendAnalytics(f.default.PLAY_REACHED_25)),!this._timePercentEvent.PLAY_REACHED_50&&e>=.5&&(this._timePercentEvent.PLAY_REACHED_50=!0,this._sendAnalytics(f.default.PLAY_REACHED_50)),!this._timePercentEvent.PLAY_REACHED_75&&e>=.75&&(this._timePercentEvent.PLAY_REACHED_75=!0,this._sendAnalytics(f.default.PLAY_REACHED_75)),!this._timePercentEvent.PLAY_REACHED_100&&e>=1&&(this._timePercentEvent.PLAY_REACHED_100=!0,this._sendAnalytics(f.default.PLAY_REACHED_100))}}},{key:"_sendAnalytics",value:function(e){var t=this;if(this._validate()){var r=new h.default(e);r.currentPoint=this.player.currentTime,r.duration=this.player.duration,r.seek=this._hasSeeked,Object.assign(r,this._playerParams);var n={event:r,hasKanalony:this.config.hasKanalony};l.OVPStatsService.collect(this.config.serviceUrl,this._ks,this.config.playerVersion,n).doHttpRequest().then(function(){t.logger.debug("Analytics event sent ",r)},function(e){t.logger.error("Failed to send analytics event ",r,e)})}}},{key:"_validate",value:function(){return this.config.partnerId?!!this.config.entryId||(this._logMissingParam("entryId"),!1):(this._logMissingParam("partnerId"),!1)}},{key:"_logMissingParam",value:function(e){this.logger.warn("block report because of missing param "+e)}},{key:"_playerParams",get:function(){this._ks=this.config.ks;var e={clientVer:this.config.playerVersion,entryId:this.config.entryId,sessionId:this.config.sessionId,uiConfId:this.config.uiConfId||0,partnerId:this.config.partnerId,widgetId:this.config.partnerId?"_"+this.config.partnerId:"",referrer:this.config.referrer};return this.config.playlistId&&(e.playlistId=this.config.playlistId),e}}]),t}(u.BasePlugin);p.defaultConfig={serviceUrl:"//stats.kaltura.com/api_v3/index.php",hasKanalony:!1},t.default=p},function(e,t,r){!function(t,r){e.exports=function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=16)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;n(this,e),this.headers=t}return a(e,[{key:"getUrl",value:function(e){return e+"/service/"+this.service+(this.action?"/action/"+this.action:"")}},{key:"doHttpRequest",value:function(){var e=this;if(!this.url)throw new Error("serviceUrl is mandatory for request builder");var t=new XMLHttpRequest;return new Promise(function(r,n){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=void 0;try{e=JSON.parse(t.responseText)}catch(e){return n(e.message+", "+t.responseText)}e&&"object"===(void 0===e?"undefined":i(e))&&e.code&&e.message?n(e):r(e)}else n(t.responseText)},t.open(e.method,e.url),e.headers.forEach(function(e,r){t.setRequestHeader(r,e)}),t.send(e.params)})}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.OVPConfiguration=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(4),o={serviceUrl:"https://cdnapisec.kaltura.com/api_v3",cdnUrl:"//cdnapisec.kaltura.com",serviceParams:{apiVersion:"3.3.0",format:1}},s=function(){function e(){n(this,e)}return i(e,null,[{key:"set",value:function(e){e&&Object.assign(o,e)}},{key:"get",value:function(){return(0,a.clone)(o)}}]),e}();t.default=s,t.OVPConfiguration=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){n(this,e),this.hasError=!1,"KalturaAPIException"===t.objectType?(this.hasError=!0,this.error=new a(t.code,t.message)):t.error&&"KalturaAPIException"===t.error.objectType?(this.hasError=!0,this.error=new a(t.error.code,t.error.message)):this.data=t};t.default=i;var a=function e(t,r){n(this,e),this.code=t,this.message=r}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MultiRequestResult=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(0),c=n(l),f=r(5),d=n(f),h=r(2),p=n(h),v=function(e){function t(){var e,r,n,i;a(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.requests=[],i=r,o(n,i)}return s(t,e),u(t,[{key:"add",value:function(e){this.requests.push(e);var t={},r={service:e.service,action:e.action};return Object.assign(t,i({},this.requests.length,Object.assign(r,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:"execute",value:function(){var e=this;try{this.params=JSON.stringify(this.params)}catch(e){t._logger.error(""+e.message)}return new Promise(function(t,r){e.doHttpRequest().then(function(e){t(new g(e))},function(e){r("Error on multiRequest execution, error <"+e+">.")})})}}]),t}(c.default);v._logger=(0,d.default)("MultiRequestBuilder"),t.default=v;var g=t.MultiRequestResult=function e(t){var r=this;a(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var n=new p.default(t);if(r.results.push(n),n.hasError)return e._logger.error("Service returned an error with error code: "+n.error.code+" and message: "+n.error.message+"."),void(r.success=!1)})};g._logger=(0,d.default)("MultiRequestResult")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function e(t){var r=void 0;return Array.isArray(t)?(r=t.length>0?t.slice(0):[],r.forEach(function(t,i){("object"===(void 0===t?"undefined":n(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(r[i]=e(t))})):"object"===(void 0===t?"undefined":n(t))?(r=Object.assign({},t),Object.keys(r).forEach(function(t){("object"===n(r[t])&&r[t]!=={}||Array.isArray(r[t])&&r[t].length>0)&&(r[t]=e(r[t]))})):r=t,r};t.clone=i},function(e,t,r){"use strict";function n(e){return e?s.get(e):s}function i(e){return n(e).getLevel()}function a(e,t){n(t).setLevel(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var o=r(6),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),u={DEBUG:s.DEBUG,INFO:s.INFO,TIME:s.TIME,WARN:s.WARN,ERROR:s.ERROR,OFF:s.OFF};s.useDefaults({defaultLevel:s.ERROR}),t.default=n,t.LogLevel=u,t.getLogLevel=i,t.setLogLevel=a},function(e,t,r){var n,i;/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(a){"use strict";var o={};o.VERSION="1.4.1";var s,u={},l=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,r=arguments,n=r[0];for(t=1;t<r.length;t++)for(e in r[t])e in n||!r[t].hasOwnProperty(e)||(n[e]=r[t][e]);return n},f=function(e,t){return{value:e,name:t}};o.DEBUG=f(1,"DEBUG"),o.INFO=f(2,"INFO"),o.TIME=f(3,"TIME"),o.WARN=f(4,"WARN"),o.ERROR=f(8,"ERROR"),o.OFF=f(99,"OFF");var d=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};d.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(o.DEBUG,arguments)},info:function(){this.invoke(o.INFO,arguments)},warn:function(){this.invoke(o.WARN,arguments)},error:function(){this.invoke(o.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"end"])},invoke:function(e,t){s&&this.enabledFor(e)&&s(t,c({level:e},this.context))}};var h=new d({filterLevel:o.OFF});!function(){var e=o;e.enabledFor=l(h,h.enabledFor),e.debug=l(h,h.debug),e.time=l(h,h.time),e.timeEnd=l(h,h.timeEnd),e.info=l(h,h.info),e.warn=l(h,h.warn),e.error=l(h,h.error),e.log=e.info}(),o.setHandler=function(e){s=e},o.setLevel=function(e){h.setLevel(e);for(var t in u)u.hasOwnProperty(t)&&u[t].setLevel(e)},o.getLevel=function(){return h.getLevel()},o.get=function(e){return u[e]||(u[e]=new d(c({name:e},h.context)))},o.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},r=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(n,i){n=Array.prototype.slice.call(n);var a,s=console.log;i.level===o.TIME?(a=(i.name?"["+i.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):r(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(i.level===o.WARN&&console.warn?s=console.warn:i.level===o.ERROR&&console.error?s=console.error:i.level===o.INFO&&console.info?s=console.info:i.level===o.DEBUG&&console.debug&&(s=console.debug),e.formatter(n,i),r(s,n))}},o.useDefaults=function(e){o.setLevel(e&&e.defaultLevel||o.DEBUG),o.setHandler(o.createDefaultHandler(e))},n=o,void 0!==(i="function"==typeof n?n.call(t,r,t,e):n)&&(e.exports=i)}()},,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(3),s=n(o),u=r(1),l=n(u),c=function(){function e(){i(this,e)}return a(e,null,[{key:"getMultiRequest",value:function(e,t,r){var n=l.default.get(),i=n.serviceParams;Object.assign(i,{ks:t,clientTag:"html5:v"+e}),r&&Object.assign(i,{partnerId:r});var a=new Map;a.set("Content-Type","application/json");var o=new s.default(a);return o.method="POST",o.service="multirequest",o.url=o.getUrl(n.serviceUrl),o.params=i,o}}]),e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){var t=[],r=/\[\]$/,i=function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=function(e,r){r="function"==typeof r?r():null===r?"":void 0===r?"":r,t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(r)};return function e(o,s){var u=void 0,l=void 0,c=void 0;if(o)if(i(s))for(u=0,l=s.length;u<l;u++)r.test(o)?a(o,s[u]):e(o+":"+("object"===n(s[u])?u:""),s[u]);else if(s&&"[object Object]"===String(s))for(c in s)e(o+":"+c,s[c]);else a(o,s);else if(i(s))for(u=0,l=s.length;u<l;u++)a(s[u].name,s[u].value);else for(c in s)e(c,s[c]);return t}("",e).join("&").replace(/%20/g,"+")};t.param=i},,,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(8),l=n(u),c=r(0),f=n(c),d=r(1),h=n(d),p=r(9),v=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"collect",value:function(e,t,r,n){var i=h.default.get(),a={};Object.assign(a,i.serviceParams,{ks:t,clientTag:"html5:v"+r},n);var o=new f.default;return o.service="stats",o.action="collect",o.method="GET",o.tag="stats-collect",o.params=a,o.url=e+"?service="+o.service+"&action="+o.action+"&"+(0,p.param)(o.params),o}}]),t}(l.default);t.default=v},,,,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.NAME=t.RequestBuilder=t.OVPConfiguration=t.OVPStatsService=void 0;var i=r(0),a=n(i),o=r(1),s=n(o),u=r(12),l=n(u);t.OVPStatsService=l.default,t.OVPConfiguration=s.default,t.RequestBuilder=a.default,t.NAME="playkit-js-providers-stats-service",t.VERSION="2.5.0"}])}()}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={WIDGET_LOADED:1,MEDIA_LOADED:2,PLAY:3,PLAY_REACHED_25:4,PLAY_REACHED_50:5,PLAY_REACHED_75:6,PLAY_REACHED_100:7,OPEN_EDIT:8,OPEN_VIRAL:9,OPEN_DOWNLOAD:10,OPEN_REPORT:11,BUFFER_START:12,BUFFER_END:13,OPEN_FULL_SCREEN:14,CLOSE_FULL_SCREEN:15,REPLAY:16,SEEK:17,OPEN_UPLOAD:18,SAVE_PUBLISH:19,CLOSE_EDITOR:20,PRE_BUMPER_PLAYED:21,POST_BUMPER_PLAYED:22,BUMPER_CLICKED:23,PREROLL_STARTED:24,MIDROLL_STARTED:25,POSTROLL_STARTED:26,OVERLAY_STARTED:27,PREROLL_CLICKED:28,MIDROLL_CLICKED:29,POSTROLL_CLICKED:30,OVERLAY_CLICKED:31,PREROLL_25:32,PREROLL_50:33,PREROLL_75:34,MIDROLL_25:35,MIDROLL_50:36,MIDROLL_75:37,POSTROLL_25:38,POSTROLL_50:39,POSTROLL_75:40};t.default=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){n(this,e),this.eventType=t,this.isFirstInSession=!1,this.eventTimestamp=(new Date).getTime()};t.default=i}])})},function(e,t,r){!function(t,n){e.exports=n(r(11))}("undefined"!=typeof self&&self,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,r){"use strict";function n(e,t){var r={eventType:e.index,partnerId:t.getPartnerId(),entryId:t.getEntryId(),sessionId:t.getSessionId(),eventIndex:t.getEventIndex(),referrer:t.getReferrer(),deliveryType:t.getDeliveryType(),playbackType:t.getPlaybackType(),clientVer:t.getClientVer(),clientTag:t.getClientTag(),position:t.getPosition()};t.getSessionStartTime()&&(r.sessionStartTime=t.getSessionStartTime()),t.getKS()&&(r.ks=t.getKS()),t.getUIConfId()&&(r.uiConfId=t.getUIConfId()),t.getPlaylistId()&&(r.playlistId=t.getPlaylistId()),t.getCustomVar1()&&(r.customVar1=t.getCustomVar1()),t.getCustomVar2()&&(r.customVar2=t.getCustomVar2()),t.getCustomVar3()&&(r.customVar3=t.getCustomVar3()),t.getPlaybackContext()&&(r.playbackContext=t.getPlaybackContext()),t.getApplicationVersion()&&(r.applicationVersion=t.getApplicationVersion());var n=e.getEventModel(t);return Object.assign(n,r)}Object.defineProperty(t,"__esModule",{value:!0}),t.KavaEventType=t.KavaEventModel=void 0,t.getEventModel=n;var i=(r(2),t.KavaEventModel={VIEW:{type:"VIEW",index:99,getEventModel:function(e){return{playTimeSum:e.getPlayTimeSum(),bufferTime:e.getBufferTime(),bufferTimeSum:e.getBufferTimeSum(),actualBitrate:e.getActualBitrate(),averageBitrate:e.getAverageBitrate()}}},IMPRESSION:{type:"IMPRESSION",index:1,getEventModel:function(){return{}}},PLAY_REQUEST:{type:"PLAY_REQUEST",index:2,getEventModel:function(){return{}}},PLAY:{type:"PLAY",index:3,getEventModel:function(e){return{bufferTime:e.getBufferTime(),bufferTimeSum:e.getBufferTimeSum(),actualBitrate:e.getActualBitrate(),joinTime:e.getJoinTime()}}},RESUME:{type:"RESUME",index:4,getEventModel:function(e){return{bufferTime:e.getBufferTime(),bufferTimeSum:e.getBufferTimeSum(),actualBitrate:e.getActualBitrate()}}},PAUSE:{type:"PAUSE",index:33,getEventModel:function(){return{}}},BUFFER_START:{type:"BUFFER_START",index:45,getEventModel:function(){return{}}},BUFFER_END:{type:"BUFFER_END",index:46,getEventModel:function(){return{}}},REPLAY:{type:"REPLAY",index:34,getEventModel:function(){return{}}},SEEK:{type:"SEEK",index:35,getEventModel:function(e){return{targetPosition:e.getTargetPosition()}}},PLAY_REACHED_25_PERCENT:{type:"PLAY_REACHED_25_PERCENT",index:11,getEventModel:function(){return{}}},PLAY_REACHED_50_PERCENT:{type:"PLAY_REACHED_50_PERCENT",index:12,getEventModel:function(){return{}}},PLAY_REACHED_75_PERCENT:{type:"PLAY_REACHED_75_PERCENT",index:13,getEventModel:function(){return{}}},PLAY_REACHED_100_PERCENT:{type:"PLAY_REACHED_100_PERCENT",index:14,getEventModel:function(){return{}}},SOURCE_SELECTED:{type:"SOURCE_SELECTED",index:39,getEventModel:function(e){return{actualBitrate:e.getActualBitrate()}}},AUDIO_SELECTED:{type:"AUDIO_SELECTED",index:42,getEventModel:function(e){return{language:e.getLanguage()}}},FLAVOR_SWITCH:{type:"FLAVOR_SWITCH",index:43,getEventModel:function(e){return{actualBitrate:e.getActualBitrate()}}},CAPTIONS:{type:"CAPTIONS",index:38,getEventModel:function(e){return{caption:e.getCaption()}}},ERROR:{type:"ERROR",index:98,getEventModel:function(e){return{errorCode:e.getErrorCode()}}}});t.KavaEventType=function(e){return Object.keys(i).forEach(function(t){return e[t]=t}),e}({})},function(t,r){t.exports=e},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.KavaModel=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),o=function(){function e(t){n(this,e),t&&this.updateModel(t)}return i(e,[{key:"getPlayTimeSum",value:function(){return this.playTimeSum}},{key:"getBufferTime",value:function(){return this.bufferTime}},{key:"getBufferTimeSum",value:function(){return this.bufferTimeSum}},{key:"getJoinTime",value:function(){return this.joinTime}},{key:"getTargetPosition",value:function(){return this.targetPosition}},{key:"getLanguage",value:function(){return this.language}},{key:"getCaption",value:function(){return this.caption}},{key:"getErrorCode",value:function(){return this.errorCode}},{key:"getEventIndex",value:function(){return this.eventIndex}},{key:"getSessionStartTime",value:function(){return this.sessionStartTime}},{key:"updateModel",value:function(e){Object.assign(this,e)}},{key:"getModel",value:function(e){return(0,a.getEventModel)(e,this)}}]),e}();t.KavaModel=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAME=t.VERSION=t.EventType=t.Plugin=void 0;var n=r(0);Object.defineProperty(t,"EventType",{enumerable:!0,get:function(){return n.KavaEventType}});var i=r(1),a=r(4);t.Plugin=a.Kava,t.VERSION="0.5.1",t.NAME="@playkit-js/playkit-js-kava",(0,i.registerPlugin)("kava",a.Kava)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Kava=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),l=r(5),c=r(0),f=r(6),d=r(7),h=r(2),p=function(e){function t(e,r,a){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a));return o._rateHandler=new f.KavaRateHandler,o._model=new h.KavaModel,o._setModelDelegates(),o._timer=new d.KavaTimer({resetCounter:o.config.resetSessionCountdown,eventCounter:o.config.viewEventCountdown}),o._viewEventEnabled=!0,o._resetFlags(),o._addBindings(),o._model.updateModel({eventIndex:1,bufferTime:0,bufferTimeSum:0,playTimeSum:0}),o}return a(t,e),s(t,null,[{key:"isValid",value:function(){return!0}}]),s(t,[{key:"destroy",value:function(){this.eventManager.destroy(),this._timer.destroy(),this._rateHandler.destroy()}},{key:"reset",value:function(){this.eventManager.removeAll(),this._rateHandler.destroy(),this._timer.destroy(),this._resetFlags(),this._addBindings(),this._model.updateModel({eventIndex:1,bufferTime:0,bufferTimeSum:0,playTimeSum:0,sessionStartTime:null})}},{key:"getEventModel",value:function(e){if(e)return this._model.getModel(c.KavaEventModel[e])}},{key:"sendAnalytics",value:function(e){var t=this;return new Promise(function(r,n){l.OVPAnalyticsService.trackEvent(t.config.serviceUrl,e).doHttpRequest().then(function(n){t._handleServerResponseSuccess(n,e),r()},function(r){t._handleServerResponseFailed(r,e),n(r)}),t._model.updateModel({eventIndex:t._model.getEventIndex()+1})})}},{key:"_resetFlags",value:function(){this._previousCurrentTime=0,this._isPlaying=!1,this._isFirstPlay=!0,this._isEnded=!1,this._isPaused=!1,this._isBuffering=!1,this._timePercentEvent={PLAY_REACHED_25_PERCENT:!1,PLAY_REACHED_50_PERCENT:!1,PLAY_REACHED_75_PERCENT:!1,PLAY_REACHED_100_PERCENT:!1}}},{key:"_resetSession",value:function(){this.logger.debug("Reset KAVA session"),this._rateHandler.reset(),this._model.updateModel({eventIndex:1,bufferTimeSum:0,playTimeSum:0})}},{key:"_sendAnalytics",value:function(e){if(this._validate()){this._isBuffering&&(this._updateBufferModel(),this._bufferStartTime=Date.now());var t=this._model.getModel(e);if("function"==typeof this.config.tamperAnalyticsHandler&&!this.config.tamperAnalyticsHandler(t))return void this.logger.debug("Cancel KAVA request",t);this.logger.debug("Sending KAVA event "+t.eventType+":"+e.type),this.sendAnalytics(t)}}},{key:"_handleServerResponseSuccess",value:function(e,t){this.logger.debug("KAVA event sent",t),this._updateSessionStartTimeModel(e)}},{key:"_handleServerResponseFailed",value:function(e,t){this.logger.error("Failed to send KAVA event",t,e)}},{key:"_addBindings",value:function(){var e=this;this.eventManager.listen(this._timer,d.KavaTimer.Event.TICK,function(){return e._rateHandler.countCurrent()}),this.eventManager.listen(this._timer,d.KavaTimer.Event.REPORT,function(){return e._onReport()}),this.eventManager.listen(this._timer,d.KavaTimer.Event.RESET,function(){return e._resetSession()}),this.eventManager.listen(this.player,this.player.Event.SOURCE_SELECTED,function(){return e._onSourceSelected()}),this.eventManager.listen(this.player,this.player.Event.ERROR,function(t){return e._onError(t)}),this.eventManager.listen(this.player,this.player.Event.FIRST_PLAY,function(){return e._onFirstPlay()}),this.eventManager.listen(this.player,this.player.Event.TRACKS_CHANGED,function(){return e._setInitialTracks()}),this.eventManager.listen(this.player,this.player.Event.PLAYING,function(){return e._onPlaying()}),this.eventManager.listen(this.player,this.player.Event.FIRST_PLAYING,function(){return e._isPlaying=!0}),this.eventManager.listen(this.player,this.player.Event.SEEKING,function(){return e._onSeeking()}),this.eventManager.listen(this.player,this.player.Event.PAUSE,function(){return e._onPause()}),this.eventManager.listen(this.player,this.player.Event.ENDED,function(){return e._onEnded()}),this.eventManager.listen(this.player,this.player.Event.TIME_UPDATE,function(){return e._onTimeUpdate()}),this.eventManager.listen(this.player,this.player.Event.VIDEO_TRACK_CHANGED,function(t){return e._onVideoTrackChanged(t)}),this.eventManager.listen(this.player,this.player.Event.AUDIO_TRACK_CHANGED,function(t){return e._onAudioTrackChanged(t)}),this.eventManager.listen(this.player,this.player.Event.TEXT_TRACK_CHANGED,function(t){return e._onTextTrackChanged(t)}),this.eventManager.listen(this.player,this.player.Event.PLAYER_STATE_CHANGED,function(t){return e._onPlayerStateChanged(t)})}},{key:"_getRates",value:function(){var e=[];return this.player.getTracks(this.player.Track.VIDEO).forEach(function(t){return e.push(t.bandwidth/1024)}),e}},{key:"_setInitialTracks",value:function(){var e=this._getRates(),t=this.player.getActiveTracks();this._rateHandler.setRates(e),t.video&&this._rateHandler.setCurrent(t.video.bandwidth/1024),t.audio&&this._model.updateModel({language:t.audio.language}),t.text&&this._model.updateModel({caption:t.text.language})}},{key:"_onReport",value:function(){this._viewEventEnabled?(this._updatePlayTimeSumModel(),this._sendAnalytics(c.KavaEventModel.VIEW)):this.logger.warn("VIEW event blocked because server response of viewEventsEnabled=false"),this._model.updateModel({bufferTime:0})}},{key:"_onPlaying",value:function(){this._isFirstPlay?(this._timer.start(),this._isFirstPlay=!1,this._model.updateModel({joinTime:t._getTimeDifferenceInSeconds(this._firstPlayRequestTime)}),this._sendAnalytics(c.KavaEventModel.PLAY)):this._isEnded?(this._timer.start(),this._isEnded=!1,this._sendAnalytics(c.KavaEventModel.REPLAY)):this._isPaused&&(this._timer.resume(),this._isPaused=!1,this._sendAnalytics(c.KavaEventModel.RESUME))}},{key:"_onFirstPlay",value:function(){this._firstPlayRequestTime=Date.now(),this._sendAnalytics(c.KavaEventModel.PLAY_REQUEST)}},{key:"_onSourceSelected",value:function(){this._sendAnalytics(c.KavaEventModel.IMPRESSION)}},{key:"_onSeeking",value:function(){this._previousCurrentTime=this.player.currentTime,this._model.updateModel({targetPosition:this.player.currentTime}),this._sendAnalytics(c.KavaEventModel.SEEK)}},{key:"_onPause",value:function(){this._isPaused=!0,this._timer.stop(),this._sendAnalytics(c.KavaEventModel.PAUSE)}},{key:"_onEnded",value:function(){this._isEnded=!0,this._onTimeUpdate(),this._model.updateModel({bufferTime:0})}},{key:"_onTimeUpdate",value:function(){if(!this.player.isLive()){this._updatePlayTimeSumModel();var e=this.player.currentTime/this.player.duration;!this._timePercentEvent.PLAY_REACHED_25&&e>=.25&&(this._timePercentEvent.PLAY_REACHED_25=!0,this._sendAnalytics(c.KavaEventModel.PLAY_REACHED_25_PERCENT)),!this._timePercentEvent.PLAY_REACHED_50&&e>=.5&&(this._timePercentEvent.PLAY_REACHED_50=!0,this._sendAnalytics(c.KavaEventModel.PLAY_REACHED_50_PERCENT)),!this._timePercentEvent.PLAY_REACHED_75&&e>=.75&&(this._timePercentEvent.PLAY_REACHED_75=!0,this._sendAnalytics(c.KavaEventModel.PLAY_REACHED_75_PERCENT)),this._timePercentEvent.PLAY_REACHED_100||1!==e||(this._timePercentEvent.PLAY_REACHED_100=!0,this._sendAnalytics(c.KavaEventModel.PLAY_REACHED_100_PERCENT))}}},{key:"_onVideoTrackChanged",value:function(e){var t=e.payload.selectedVideoTrack;this._rateHandler.setCurrent(t.bandwidth/1024),this.player.isAdaptiveBitrateEnabled()?this._sendAnalytics(c.KavaEventModel.FLAVOR_SWITCH):this._sendAnalytics(c.KavaEventModel.SOURCE_SELECTED)}},{key:"_onAudioTrackChanged",value:function(e){var t=e.payload.selectedAudioTrack;this._model.updateModel({language:t.language}),this._sendAnalytics(c.KavaEventModel.AUDIO_SELECTED)}},{key:"_onTextTrackChanged",value:function(e){if(this._isPlaying){var t=e.payload.selectedTextTrack;this._model.updateModel({caption:t.language}),this._sendAnalytics(c.KavaEventModel.CAPTIONS)}}},{key:"_onError",value:function(e){e.payload&&e.payload.severity===u.Error.Severity.CRITICAL&&(this._model.updateModel({errorCode:e.payload.code}),this._sendAnalytics(c.KavaEventModel.ERROR),this.reset())}},{key:"_onPlayerStateChanged",value:function(e){var t=e.payload.oldState,r=e.payload.newState;t.type===this.player.State.BUFFERING&&(this._isBuffering=!1,this._updateBufferModel(),this._sendAnalytics(c.KavaEventModel.BUFFER_END)),r.type===this.player.State.BUFFERING&&(this._isBuffering=!0,this._bufferStartTime=Date.now(),this._sendAnalytics(c.KavaEventModel.BUFFER_START))}},{key:"_updateSessionStartTimeModel",value:function(e){!this._model.getSessionStartTime()&&e&&("object"===(void 0===e?"undefined":o(e))?(this._model.updateModel({sessionStartTime:e.time}),this._viewEventEnabled=e.viewEventsEnabled):this._model.updateModel({sessionStartTime:e})),this._timer.isStopped()&&this._model.updateModel({sessionStartTime:null})}},{key:"_updateBufferModel",value:function(){var e=t._getTimeDifferenceInSeconds(this._bufferStartTime);this._model.updateModel({bufferTime:this._model.getBufferTime()+e,bufferTimeSum:this._model.getBufferTimeSum()+e})}},{key:"_updatePlayTimeSumModel",value:function(){var e=void 0;this.player.isLive()?e=this.config.viewEventCountdown-this._model.getBufferTime():(e=this.player.currentTime-this._previousCurrentTime,this._previousCurrentTime=this.player.currentTime),this._model.updateModel({playTimeSum:this._model.getPlayTimeSum()+e})}},{key:"_setModelDelegates",value:function(){var e=this;this._model.getActualBitrate=function(){return e._rateHandler.getCurrent()},this._model.getAverageBitrate=function(){return e._rateHandler.getAverage()},this._model.getPartnerId=function(){return e.config.partnerId},this._model.getEntryId=function(){return e.config.entryId},this._model.getPlaylistId=function(){return e.config.playlistId},this._model.getSessionId=function(){return e.config.sessionId},this._model.getClientVer=function(){return e.config.playerVersion},this._model.getClientTag=function(){return"html5:v"+e.config.playerVersion},this._model.getKS=function(){return e.config.ks},this._model.getUIConfId=function(){return e.config.uiConfId},this._model.getReferrer=function(){return e.config.referrer},this._model.getCustomVar1=function(){return e.config.customVar1},this._model.getCustomVar2=function(){return e.config.customVar2},this._model.getCustomVar3=function(){return e.config.customVar3},this._model.getPosition=function(){return e._getPosition()},this._model.getDeliveryType=function(){return e._getDeliveryType()},this._model.getPlaybackType=function(){return e._getPlaybackType()},this._model.getPlaybackContext=function(){return e.config.playbackContext},this._model.getApplicationVersion=function(){return e.config.applicationVersion}}},{key:"_getPosition",value:function(){return this.player.isLive()?Number.isNaN(this.player.duration)?0:this.player.duration-this.player.currentTime<1?0:-(this.player.duration-this.player.currentTime):this.player.currentTime}},{key:"_getDeliveryType",value:function(){return this.player.streamType===this.player.StreamType.PROGRESSIVE?"url":this.player.streamType}},{key:"_getPlaybackType",value:function(){return this.player.isLive()?this.player.isDvr()&&this.player.duration-this.player.currentTime>=this.config.dvrThreshold?"dvr":"live":"vod"}},{key:"_validate",value:function(){return this.config.partnerId?!!this.config.entryId||(this._logMissingParam("entryId"),!1):(this._logMissingParam("partnerId"),!1)}},{key:"_logMissingParam",value:function(e){this.logger.warn("Kava analytics block report because of missing param "+e)}},{key:"EventType",get:function(){return u.Utils.Object.copyDeep(c.KavaEventType)}}],[{key:"_getTimeDifferenceInSeconds",value:function(e){return(Date.now()-e)/1e3}}]),t}(u.BasePlugin);p.defaultConfig={serviceUrl:"//analytics.kaltura.com/api_v3/index.php",viewEventCountdown:10,resetSessionCountdown:30,dvrThreshold:120,playbackContext:"",applicationVersion:""},t.Kava=p},function(e,t,r){!function(t,r){e.exports=function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=15)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;n(this,e),this.headers=t}return a(e,[{key:"getUrl",value:function(e){return e+"/service/"+this.service+(this.action?"/action/"+this.action:"")}},{key:"doHttpRequest",value:function(){var e=this;if(!this.url)throw new Error("serviceUrl is mandatory for request builder");var t=new XMLHttpRequest;return new Promise(function(r,n){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=void 0;try{e=JSON.parse(t.responseText)}catch(e){return n(e.message+", "+t.responseText)}e&&"object"===(void 0===e?"undefined":i(e))&&e.code&&e.message?n(e):r(e)}else n(t.responseText)},t.open(e.method,e.url),e.headers.forEach(function(e,r){t.setRequestHeader(r,e)}),t.send(e.params)})}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.OVPConfiguration=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(4),o={serviceUrl:"https://cdnapisec.kaltura.com/api_v3",cdnUrl:"//cdnapisec.kaltura.com",serviceParams:{apiVersion:"3.3.0",format:1}},s=function(){function e(){n(this,e)}return i(e,null,[{key:"set",value:function(e){e&&Object.assign(o,e)}},{key:"get",value:function(){return(0,a.clone)(o)}}]),e}();t.default=s,t.OVPConfiguration=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){n(this,e),this.hasError=!1,"KalturaAPIException"===t.objectType?(this.hasError=!0,this.error=new a(t.code,t.message)):t.error&&"KalturaAPIException"===t.error.objectType?(this.hasError=!0,this.error=new a(t.error.code,t.error.message)):this.data=t};t.default=i;var a=function e(t,r){n(this,e),this.code=t,this.message=r}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MultiRequestResult=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(0),c=n(l),f=r(5),d=n(f),h=r(2),p=n(h),v=function(e){function t(){var e,r,n,i;a(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=n=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.requests=[],i=r,o(n,i)}return s(t,e),u(t,[{key:"add",value:function(e){this.requests.push(e);var t={},r={service:e.service,action:e.action};return Object.assign(t,i({},this.requests.length,Object.assign(r,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:"execute",value:function(){var e=this;try{this.params=JSON.stringify(this.params)}catch(e){t._logger.error(""+e.message)}return new Promise(function(t,r){e.doHttpRequest().then(function(e){t(new g(e))},function(e){r("Error on multiRequest execution, error <"+e+">.")})})}}]),t}(c.default);v._logger=(0,d.default)("MultiRequestBuilder"),t.default=v;var g=t.MultiRequestResult=function e(t){var r=this;a(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var n=new p.default(t);if(r.results.push(n),n.hasError)return e._logger.error("Service returned an error with error code: "+n.error.code+" and message: "+n.error.message+"."),void(r.success=!1)})};g._logger=(0,d.default)("MultiRequestResult")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function e(t){var r=void 0;return Array.isArray(t)?(r=t.length>0?t.slice(0):[],r.forEach(function(t,i){("object"===(void 0===t?"undefined":n(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(r[i]=e(t))})):"object"===(void 0===t?"undefined":n(t))?(r=Object.assign({},t),Object.keys(r).forEach(function(t){("object"===n(r[t])&&r[t]!=={}||Array.isArray(r[t])&&r[t].length>0)&&(r[t]=e(r[t]))})):r=t,r};t.clone=i},function(e,t,r){"use strict";function n(e){return e?s.get(e):s}function i(e){return n(e).getLevel()}function a(e,t){n(t).setLevel(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var o=r(6),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),u={DEBUG:s.DEBUG,INFO:s.INFO,TIME:s.TIME,WARN:s.WARN,ERROR:s.ERROR,OFF:s.OFF};s.useDefaults({defaultLevel:s.ERROR}),t.default=n,t.LogLevel=u,t.getLogLevel=i,t.setLogLevel=a},function(e,t,r){var n,i;/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(a){"use strict";var o={};o.VERSION="1.4.1";var s,u={},l=function(e,t){return function(){return t.apply(e,arguments)}},c=function(){var e,t,r=arguments,n=r[0];for(t=1;t<r.length;t++)for(e in r[t])e in n||!r[t].hasOwnProperty(e)||(n[e]=r[t][e]);return n},f=function(e,t){return{value:e,name:t}};o.DEBUG=f(1,"DEBUG"),o.INFO=f(2,"INFO"),o.TIME=f(3,"TIME"),o.WARN=f(4,"WARN"),o.ERROR=f(8,"ERROR"),o.OFF=f(99,"OFF");var d=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};d.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(o.DEBUG,arguments)},info:function(){this.invoke(o.INFO,arguments)},warn:function(){this.invoke(o.WARN,arguments)},error:function(){this.invoke(o.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(o.TIME,[e,"end"])},invoke:function(e,t){s&&this.enabledFor(e)&&s(t,c({level:e},this.context))}};var h=new d({filterLevel:o.OFF});!function(){var e=o;e.enabledFor=l(h,h.enabledFor),e.debug=l(h,h.debug),e.time=l(h,h.time),e.timeEnd=l(h,h.timeEnd),e.info=l(h,h.info),e.warn=l(h,h.warn),e.error=l(h,h.error),e.log=e.info}(),o.setHandler=function(e){s=e},o.setLevel=function(e){h.setLevel(e);for(var t in u)u.hasOwnProperty(t)&&u[t].setLevel(e)},o.getLevel=function(){return h.getLevel()},o.get=function(e){return u[e]||(u[e]=new d(c({name:e},h.context)))},o.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},r=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(n,i){n=Array.prototype.slice.call(n);var a,s=console.log;i.level===o.TIME?(a=(i.name?"["+i.name+"] ":"")+n[0],"start"===n[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):r(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(i.level===o.WARN&&console.warn?s=console.warn:i.level===o.ERROR&&console.error?s=console.error:i.level===o.INFO&&console.info?s=console.info:i.level===o.DEBUG&&console.debug&&(s=console.debug),e.formatter(n,i),r(s,n))}},o.useDefaults=function(e){o.setLevel(e&&e.defaultLevel||o.DEBUG),o.setHandler(o.createDefaultHandler(e))},n=o,void 0!==(i="function"==typeof n?n.call(t,r,t,e):n)&&(e.exports=i)}()},,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(3),s=n(o),u=r(1),l=n(u),c=function(){function e(){i(this,e)}return a(e,null,[{key:"getMultiRequest",value:function(e,t,r){var n=l.default.get(),i=n.serviceParams;Object.assign(i,{ks:t,clientTag:"html5:v"+e}),r&&Object.assign(i,{partnerId:r});var a=new Map;a.set("Content-Type","application/json");var o=new s.default(a);return o.method="POST",o.service="multirequest",o.url=o.getUrl(n.serviceUrl),o.params=i,o}}]),e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){var t=[],r=/\[\]$/,i=function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=function(e,r){r="function"==typeof r?r():null===r?"":void 0===r?"":r,t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(r)};return function e(o,s){var u=void 0,l=void 0,c=void 0;if(o)if(i(s))for(u=0,l=s.length;u<l;u++)r.test(o)?a(o,s[u]):e(o+":"+("object"===n(s[u])?u:""),s[u]);else if(s&&"[object Object]"===String(s))for(c in s)e(o+":"+c,s[c]);else a(o,s);else if(i(s))for(u=0,l=s.length;u<l;u++)a(s[u].name,s[u].value);else for(c in s)e(c,s[c]);return t}("",e).join("&").replace(/%20/g,"+")};t.param=i},,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(8),l=n(u),c=r(0),f=n(c),d=r(1),h=n(d),p=r(9),v=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"trackEvent",value:function(e,t){var r=h.default.get(),n={};Object.assign(n,r.serviceParams,t);var i=new f.default;return i.service="analytics",i.action="trackEvent",i.method="GET",i.tag="analytics-trackEvent",i.params=n,i.url=e+"?service="+i.service+"&action="+i.action+"&"+(0,p.param)(i.params),i}}]),t}(l.default);t.default=v},,,,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.NAME=t.RequestBuilder=t.OVPConfiguration=t.OVPAnalyticsService=void 0;var i=r(0),a=n(i),o=r(1),s=n(o),u=r(11),l=n(u);t.OVPAnalyticsService=l.default,t.OVPConfiguration=s.default,t.RequestBuilder=a.default,t.NAME="playkit-js-providers-analytics-service",t.VERSION="2.7.0"}])}()}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e),this._rates=[],this._rates=[]}return i(e,[{key:"setRates",value:function(e){var t=this;this._rates=[],e.forEach(function(e){t._rates.push({rate:e,active:!1,duration:0})})}},{key:"setCurrent",value:function(e){this._rates.forEach(function(e){return e.active=!1});var t=this._rates.find(function(t){return t.rate===e});t&&(t.active=!0)}},{key:"getCurrent",value:function(){var e=this._rates.find(function(e){return e.active});return e?e.rate:-1}},{key:"countCurrent",value:function(){var e=this._rates.find(function(e){return e.active});e&&e.duration++}},{key:"getAverage",value:function(){var e=0,t=0;return this._rates.forEach(function(r){t+=r.rate*r.duration,e+=r.duration}),e?t/e:0}},{key:"reset",value:function(){this._rates.forEach(function(e){return e.duration=0})}},{key:"destroy",value:function(){this._rates=[]}}]),e}();t.KavaRateHandler=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.KavaTimer=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(1),u=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._config=e,r}return a(t,e),o(t,[{key:"start",value:function(){var e=this;this._clearTimeout(),this._stopped=!1,this._resetCounter=0,this._eventCounter=0,this._intervalId=setInterval(function(){return e._monitor()},1e3)}},{key:"resume",value:function(){this._stopped=!1,this._resetCounter=0}},{key:"stop",value:function(){this._stopped=!0}},{key:"isStopped",value:function(){return this._stopped}},{key:"destroy",value:function(){this._clearTimeout()}},{key:"_clearTimeout",value:function(){this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)}},{key:"_monitor",value:function(){this._stopped?(this._resetCounter===this._config.resetCounter&&(this.dispatchEvent(new s.FakeEvent(t.Event.RESET)),this._resetCounter=0,this._eventCounter=0),this._resetCounter++):(this.dispatchEvent(new s.FakeEvent(t.Event.TICK)),this._eventCounter===this._config.eventCounter&&(this.dispatchEvent(new s.FakeEvent(t.Event.REPORT)),this._eventCounter=0),this._eventCounter++)}}]),t}(s.FakeEventTarget);u.Event={TICK:"tick",RESET:"reset",REPORT:"report"},t.KavaTimer=u}])})},function(e,t,r){"use strict"},function(e,t,r){"use strict";function n(e){e=(0,o.supportLegacyOptions)(e),(0,o.validateConfig)(e);var t=(0,o.getDefaultOptions)(e);(0,o.setLogLevel)(t),(0,o.printSetupMessages)(),(0,a.evaluatePluginsConfig)(t),(0,o.setStorageConfig)(t);var r=(0,i.getPlayerProxy)(t);return(0,o.setStorageTextStyle)(r),(0,o.applyStorageSupport)(r),(0,o.applyCastSupport)(t,r),(0,o.attachToFirstClick)(r),r}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;var i=(r(51),r(139)),a=r(135),o=r(133);t.setup=n},function(e,t,r){"use strict";function n(e){var t=i.Utils.Object.getPropertyPath(e,"plugins.kava");t||(t=i.Utils.Object.mergeDeep(e,{plugins:{kava:{}}}));var r=i.Utils.Object.getPropertyPath(e,"plugins.kanalytics");r||(r=i.Utils.Object.mergeDeep(e,{plugins:{kanalytics:{}}})),!e.plugins||t.disable||r.disable||Object.assign(e.plugins.kanalytics,{hasKanalony:!0})}Object.defineProperty(t,"__esModule",{value:!0}),t.setDefaultAnalyticsPlugin=n;var i=r(11)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={INITIAL_CONFIG_REQUIRED:"Must provide initial providers config",PARTNER_ID_REQUIRED:"Must provide partner id",TARGET_ID_REQUIRED:"Must provide target id",DOM_ELEMENT_WITH_TARGET_ID_REQUIRED:"Must provide DOM element with id of: "};t.ValidationErrorType=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(359),s=n(o),u=r(28),l=n(u),c=r(11),f=function(){function e(){i(this,e)}return a(e,null,[{key:"isLocalStorageAvailable",value:function(){return s.default.isLocalStorageAvailable()}},{key:"attach",value:function(t){var r=this;e._logger.debug("Attach local storage"),t.addEventListener(t.Event.UI.USER_CLICKED_MUTE,function(){t.isCasting()||s.default.setItem(e.StorageKeys.MUTED,t.muted)}),t.addEventListener(t.Event.UI.USER_CLICKED_UNMUTE,function(){t.isCasting()||s.default.setItem(e.StorageKeys.MUTED,t.muted)}),t.addEventListener(t.Event.UI.USER_CHANGED_VOLUME,function(){t.isCasting()||(t.volume>0?s.default.setItem(e.StorageKeys.MUTED,!1):s.default.setItem(e.StorageKeys.MUTED,!0),s.default.setItem(e.StorageKeys.VOLUME,t.volume))}),t.addEventListener(t.Event.UI.USER_SELECTED_AUDIO_TRACK,function(t){var r=t.payload.audioTrack;s.default.setItem(e.StorageKeys.AUDIO_LANG,r.language)}),t.addEventListener(t.Event.UI.USER_SELECTED_CAPTION_TRACK,function(t){var r=t.payload.captionTrack;s.default.setItem(e.StorageKeys.TEXT_LANG,r.language)}),t.addEventListener(t.Event.UI.USER_SELECTED_CAPTIONS_STYLE,function(t){try{var n=JSON.stringify(t.payload.captionsStyle);s.default.setItem(e.StorageKeys.TEXT_STYLE,n)}catch(e){r._logger.error(e.message)}})}},{key:"getPlayerTextStyle",value:function(){return s.default.getItem(e.StorageKeys.TEXT_STYLE)}},{key:"hasStorage",value:function(){var e=s.default.size,t=0!==e;return t?this._logger.debug("Storage found with size of ",e):this._logger.debug("No storage found"),t}},{key:"getStorageConfig",value:function(){var t=e._getExistingValues(),r=e._buildStorageConfig(t);return this._logger.debug("Gets storage config",r),r}},{key:"_getExistingValues",value:function(){var t={};return Object.keys(e.StorageKeys).forEach(function(r){var n=e.StorageKeys[r],i=s.default.getItem(n);null!=i&&(t[n]=i)}),t}},{key:"_buildStorageConfig",value:function(e){var t=c.Utils.Object.mergeDeep({},e);return delete t.textStyle,{playback:t}}}]),e}();f.StorageKeys={MUTED:"muted",VOLUME:"volume",AUDIO_LANG:"audioLanguage",TEXT_LANG:"textLanguage",TEXT_STYLE:"textStyle"},f._logger=(0,l.default)("StorageManager"),t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(28),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(){n(this,e)}return i(e,null,[{key:"isLocalStorageAvailable",value:function(){if("undefined"==typeof Storage)return!1;try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}},{key:"setItem",value:function(t,r){e._validateKey(t);try{e._logger.debug("Sets item for key: "+t,r),localStorage.setItem("kaltura-player-js_"+t,r)}catch(t){e._isQuotaExceeded(t)?e._logger.error("Quota exceeded: "+t.message):e._logger.error(t.message)}}},{key:"getItem",value:function(t){e._validateKey(t);var r=null;try{return r=localStorage.getItem("kaltura-player-js_"+t),"string"==typeof r?JSON.parse(r):null}catch(e){return r}}},{key:"_isQuotaExceeded",value:function(e){var t=!1;if(e)if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else-2147024882===e.number&&(t=!0);return t}},{key:"_validateKey",value:function(e){if("string"!=typeof e||0===e.length)throw new Error("Invalid key")}},{key:"size",get:function(){return Object.keys(localStorage).filter(function(e){return e.startsWith("kaltura-player-js_")}).length}}]),e}();s._logger=(0,o.default)("StorageWrapper"),t.default=s},function(e,t,r){"use strict";function n(e,t){var r=function(e){var t=document.createElement("a");return t.href=e,t.hostname},n=r(t),i=!1,a="",o="";return e&&(e.flavors&&Array.isArray(e.flavors)?(i=1===e.flavors.length,a=i&&r(e.flavors[0].url),o=e.flavors[0].url):e.result&&(i=!0,a=r(e.result.url),o=e.result.url)),i&&n!==a?o:t}function i(e){var t=a.Utils.Object.getPropertyPath(e,"sources.options");t||(a.Utils.Object.mergeDeep(e,{sources:{options:{}}}),t=e.sources&&e.sources.options),t&&"function"!=typeof t.redirectExternalStreamsHandler&&(t.redirectExternalStreamsHandler=n)}Object.defineProperty(t,"__esModule",{value:!0}),t.configureExternalStreamRedirect=void 0;var a=r(11);t.configureExternalStreamRedirect=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.cast=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.cast=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.templateRegex=t.pluginConfig=void 0;var n=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r(11),a={youbora:{playerVersion:"{{pVersion}}",playerName:"{{pName}}",entryId:"{{entryId}}",entryName:"{{entryName}}",entryType:"{{entryType}}",sessionId:"{{sessionId}}",uiConfId:"{{uiConfId}}"},kanalytics:{playerVersion:"{{pVersion}}",playlistId:"{{playlistId}}",entryId:"{{entryId}}",entryType:"{{entryType}}",sessionId:"{{sessionId}}",ks:"{{ks}}",uiConfId:"{{uiConfId}}",partnerId:"{{partnerId}}",referrer:"{{referrer}}"},googleAnalytics:{entryId:"{{entryId}}",entryName:"{{entryName}}",uiConfId:"{{uiConfId}}",partnerId:"{{partnerId}}"},ottAnalytics:{entryId:"{{entryId}}",ks:"{{ks}}",isAnonymous:"{{isAnonymous}}",partnerId:"{{partnerId}}",serviceUrl:"{{serviceUrl}}"},ima:{playerVersion:"{{pVersion}}",playerName:"{{pName}}"},kava:{playerVersion:"{{pVersion}}",playerName:"{{pName}}",partnerId:"{{partnerId}}",playlistId:"{{playlistId}}",entryId:"{{entryId}}",entryType:"{{entryType}}",sessionId:"{{sessionId}}",ks:"{{ks}}",uiConfId:"{{uiConfId}}",referrer:"{{referrer}}"},comscore:{playerVersion:"{{pVersion}}"},vr:{rootElement:"{{domRootElementId}}"}},o=i.Utils.Object.copyDeep(a),s=new RegExp("{{.*}}"),u=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(t).reduce(function(t,r){var a=n(r,2),o=a[0],u=a[1];return i.Utils.Object.isObject(u)?t[o]=e(u):"string"==typeof u&&s.test(u)?t[o]=u:t[o]=void 0,t},{})},l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(t).reduce(function(t,r){var a=n(r,2),o=a[0],s=a[1];return i.Utils.Object.isObject(s)?t[o]=e(s):s&&(t[o]=s),t},{})},c={get:function(){return o},set:function(e){if(e){var t=u(e);o=l(i.Utils.Object.mergeDeep(o,t))}},reset:function(){o=i.Utils.Object.copyDeep(a)}};t.pluginConfig=c,t.templateRegex=s},function(e,t,r){var n=r(96);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;var a=r(366)(n,i);n.locals&&(e.exports=n.locals),n.locals||e.hot.accept(96,function(){var t=r(96);"string"==typeof t&&(t=[[e.i,t,""]]),a(t)}),e.hot.dispose(function(){a()})},function(e,t){function r(e,t){var r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"==typeof btoa){var a=n(i);return[r].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([a]).join("\n")}return[r].join("\n")}function n(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=r(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(n[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&n[o[0]]||(r&&!o[2]?o[2]=r:r&&(o[2]="("+o[2]+") and ("+r+")"),t.push(o))}},t}},function(e,t,r){function n(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=p[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(c(n.parts[a],t))}else{for(var o=[],a=0;a<n.parts.length;a++)o.push(c(n.parts[a],t));p[n.id]={id:n.id,refs:1,parts:o}}}}function i(e,t){for(var r=[],n={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],s=a[1],u=a[2],l=a[3],c={css:s,media:u,sourceMap:l};n[o]?n[o].parts.push(c):r.push(n[o]={id:o,parts:[c]})}return r}function a(e,t){var r=g(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=m[m.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),m.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function o(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=m.indexOf(e);t>=0&&m.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),a(e,t),t}function u(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),a(e,t),t}function l(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function c(e,t){var r,n,i,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var l=_++;r=y||(y=s(t)),n=f.bind(null,r,l,!1),i=f.bind(null,r,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=u(t),n=h.bind(null,r,t),i=function(){o(r),r.href&&URL.revokeObjectURL(r.href)}):(r=s(t),n=d.bind(null,r),i=function(){o(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}function f(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function d(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function h(e,t,r){var n=r.css,i=r.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(n=E(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var p={},v=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),g=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e.call(this,r)),t[r]}}(function(e){return document.querySelector(e)}),y=null,_=0,m=[],E=r(367);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=v()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=i(e,t);return n(r,t),function(e){for(var a=[],o=0;o<r.length;o++){var s=r[o],u=p[s.id];u.refs--,a.push(u)}if(e){n(i(e,t),t)}for(var o=0;o<a.length;o++){var u=a[o];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete p[u.id]}}}};var b=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var a;return a=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")"})}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var r=document.getElementById(e);r&&r.appendChild(t)}function a(e,t){return{thumbsSprite:(0,l.getThumbSlicesUrl)(e,t),thumbsWidth:l.DEFAULT_THUMBS_WIDTH,thumbsSlices:l.DEFAULT_THUMBS_SLICES}}Object.defineProperty(t,"__esModule",{value:!0}),t.UIWrapper=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(95),u=r(11),l=r(369),c=(r(51),function(){function e(t,r){var a=this;n(this,e),this._disabled=!1;var o=r.ui;return o.disable?(this._disabled=!0,i(o.targetId,t.getView())):(this._uiManager=new s.UIManager(t,o),o.customPreset?this._uiManager.buildCustomUI(o.customPreset):this._uiManager.buildDefaultUI(),this._handleVr(r.plugins)),new Proxy(this,{get:function(e,t){return a._disabled?function(){}:e[t]}})}return o(e,[{key:"destroy",value:function(){this._uiManager.destroy()}},{key:"reset",value:function(){this._resetErrorState()}},{key:"setConfig",value:function(e,t){this._uiManager.setConfig(e,t)}},{key:"_resetErrorState",value:function(){this.setConfig({hasError:!1},"engine")}},{key:"setSeekbarConfig",value:function(e,t){var r=u.Utils.Object.getPropertyPath(t,"components.seekbar"),n=a(e,r);this.setConfig(u.Utils.Object.mergeDeep({},n,r),"seekbar")}},{key:"setLoadingSpinnerState",value:function(e){this.setConfig({show:e},"loading")}},{key:"_handleVr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.vr&&!e.vr.disable&&(this._setFullscreenConfig(),this._setStereoConfig(e.vr))}},{key:"_setFullscreenConfig",value:function(){var e=u.Utils.Object.getPropertyPath(this._uiManager,"config.components.fullscreen");this.setConfig(u.Utils.Object.mergeDeep({},{inBrowserFullscreenForIOS:!0},e),"fullscreen")}},{key:"_setStereoConfig",value:function(e){(e.toggleStereo||u.Env.device.type&&!1!==e.toggleStereo)&&this.setConfig(u.Utils.Object.mergeDeep({},{vrStereoMode:!!e.startInStereo}),"vrStereo")}}]),e}());t.UIWrapper=c},function(e,t,r){"use strict";function n(e,t){var r=e.sources&&e.sources.poster;if("string"==typeof r){if(/.*\/p\/\d+\/(?:[a-zA-Z]+\/\d+\/)*thumbnail\/entry_id\/\w+\/.*\d+/.test(r))try{var n={thumbnailUrl:r,ks:e.session.ks,width:t&&t.thumbsWidth||o,slices:t&&t.thumbsSlices||s};return(0,a.default)(u,n)}catch(e){return""}}return""}Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_THUMBS_SLICES=t.DEFAULT_THUMBS_WIDTH=void 0,t.getThumbSlicesUrl=n;var i=r(136),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=t.DEFAULT_THUMBS_WIDTH=164,s=t.DEFAULT_THUMBS_SLICES=100,u="{{thumbnailUrl}}/width/{{width}}/vid_slices/{{slices}}/ks/{{ks}}"},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.PlaylistManager=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=(r(51),r(11)),s=r(97),u=r(28),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=r(371),f=(r(138),r(137)),d=function(){function e(t,r){n(this,e),this._logger=(0,l.default)("PlaylistManager"),this._player=t,this._eventManager=new o.EventManager,this._playlist=new c.Playlist,this._options={autoContinue:!0},this._countdown={duration:10,showing:!0},this._mediaInfoList=[],this._playerOptions=r}return a(e,[{key:"configure",value:function(e,t){e&&(this._playlist.configure(e),o.Utils.Object.mergeDeep(this._options,e.options),o.Utils.Object.mergeDeep(this._countdown,e.countdown),e.items&&e.items.find(function(e){return!!e.sources})&&(this._mediaInfoList=e.items.map(function(e,r){return t&&t.entries&&"object"===i(t.entries[r])?t.entries[r]:{entryId:e.sources.id}}),this._player.dispatchEvent(new o.FakeEvent(s.PlaylistEventType.PLAYLIST_LOADED,{playlist:this})),this._addBindings(),this.playNext()))}},{key:"load",value:function(e,t,r){var n=this._getMergedPlaylistData(e,t);this.configure(n,r)}},{key:"reset",value:function(){this._eventManager.removeAll(),this._playlist=new c.Playlist,this._mediaInfoList=[]}},{key:"playNext",value:function(){this._logger.debug("playNext");var e=this._playlist.next;e.item&&this._setItem(e.item,e.index)}},{key:"playPrev",value:function(){this._logger.debug("playPrev");var e=this._playlist.prev;e.item&&this._setItem(e.item,e.index)}},{key:"playItem",value:function(e){this._logger.debug("playItem("+e+")");var t=this._playlist.items[e];t&&this._setItem(t,e)}},{key:"_getMergedPlaylistData",value:function(e,t){var r=this;return{id:e.id,metadata:e.metadata,poster:e.poster,options:t?t.options:this._options,countdown:t?t.countdown:this.countdown,items:e.items.map(function(e,n){var i=o.Utils.Object.copyDeep(e);return o.Utils.Object.mergeDeep(i.sources,t&&t.items&&t.items[n]&&t.items[n].sources),(0,f.addKalturaPoster)(i.sources,e.sources,r._player.dimensions),{sources:i.sources,config:t&&t.items&&t.items[n]&&t.items[n].config}})}}},{key:"_addBindings",value:function(){var e=this;this._eventManager.listen(this._player,this._player.Event.Core.PLAYBACK_ENDED,function(){return e._onPlaybackEnded()})}},{key:"_onPlaybackEnded",value:function(){this._playlist.next.item?!this._options.autoContinue||!this._playerOptions.ui.disable&&this.countdown.showing||this.playNext():this._player.dispatchEvent(new o.FakeEvent(s.PlaylistEventType.PLAYLIST_ENDED))}},{key:"_setItem",value:function(e,t){var r=this;return this._logger.debug("Playing item number "+t,e),this._playlist.current.item&&this._player.configure({playback:{autoplay:!0}}),this._playlist.activeItemIndex=t,e.isPlayable()?(this._player.reset(),this._player.setMedia({session:{},plugins:{},sources:e.sources}),this._player.dispatchEvent(new o.FakeEvent(s.PlaylistEventType.PLAYLIST_ITEM_CHANGED,{index:t,activeItem:e})),Promise.resolve()):this._mediaInfoList[t]?this._player.loadMedia(this._mediaInfoList[t]).then(function(n){r._playlist.updateItemSources(t,n.sources),r._player.dispatchEvent(new o.FakeEvent(s.PlaylistEventType.PLAYLIST_ITEM_CHANGED,{index:t,activeItem:e}))}):Promise.reject()}},{key:"items",get:function(){return this._playlist.items}},{key:"next",get:function(){return this._playlist.next.item}},{key:"prev",get:function(){return this._playlist.prev.item}},{key:"id",get:function(){return this._playlist.id}},{key:"metadata",get:function(){return this._playlist.metadata}},{key:"poster",get:function(){return this._playlist.poster}},{key:"countdown",get:function(){if(this._playlist.current.item&&this._playlist.current.item.config){var e={duration:10,showing:!0};return o.Utils.Object.mergeDeep(e,this._countdown,this._playlist.current.item.config.countdown),e}return this._countdown}},{key:"options",get:function(){return this._options}}]),e}();t.PlaylistManager=d},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Playlist=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(138),o=function(){function e(){n(this,e),this._id="",this._metadata={name:"",description:""},this._poster="",this._items=[],this._activeItemIndex=-1}return i(e,[{key:"configure",value:function(e){var t=this;this._id=e.id,this._poster=e.poster,this._metadata=e.metadata,e.items&&(this._items=[],e.items.forEach(function(e){t._items.push(new a.PlaylistItem(e.sources,e.config))}))}},{key:"updateItemSources",value:function(e,t){this._items[e].updateSources(t)}},{key:"id",get:function(){return this._id}},{key:"items",get:function(){return this._items}},{key:"metadata",get:function(){return this._metadata}},{key:"poster",get:function(){return this._poster}},{key:"current",get:function(){return{item:this._items[this._activeItemIndex]||null,index:this._activeItemIndex}}},{key:"next",get:function(){return{item:this._items[this._activeItemIndex+1]||null,index:this._activeItemIndex+1}}},{key:"prev",get:function(){return{item:this._items[this._activeItemIndex-1]||null,index:this._activeItemIndex-1}}},{key:"activeItemIndex",set:function(e){this._activeItemIndex=e}}]),e}();t.Playlist=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playlist=void 0;var n=r(97),i={PlaylistEventType:n.PlaylistEventType};t.playlist=i}])});
//# sourceMappingURL=kaltura-player.js.map